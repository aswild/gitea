{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./web_src/js/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","htmlEncode","text","jQuery","html","csrf","suburl","previewFileModes","simpleMDEditor","codeMirrorEditor","initCommentPreviewTab","$form","$tabMenu","find","tab","data","click","$this","$","this","post","val","$previewPanel","emojify","run","each","hljs","highlightBlock","buttonsClickOnEnter","initEditForm","length","$previewTab","split","initEditPreviewTab","$diffPreviewPanel","initEditDiffTab","updateIssuesMeta","url","action","issueIds","elementId","Promise","resolve","ajax","type","success","reload","window","location","initImagePaste","target","field","addEventListener","event","pasteEvent","callback","clipboardData","items","indexOf","blob","getAsFile","preventDefault","stopPropagation","retrieveImageFromClipboardAsBlob","img","substr","lastIndexOf","selectionStart","startPos","endPos","selectionEnd","substring","insertAtCursor","file","xhr","XMLHttpRequest","onload","status","responseText","open","setRequestHeader","formData","FormData","append","send","uploadFile","res","JSON","parse","oldval","newval","replace","replaceAndKeepCursor","uuid","input","initCommentForm","initListSubmits","selector","outerSelector","$list","$noSelect","$listMenu","hasLabelUpdateAction","labels","dropdown","promises","keys","forEach","label","promise","push","all","then","hasClass","removeClass","addClass","listIds","parent","join","selectItem","select_id","input_id","$menu","hasUpdateAction","$selectBranch","selectedValue","css","initBranchSelector","initRepository","initFilterSearchDropdown","$dropdown","fullTextSearch","selectOnKeydown","onChange","_text","_value","$choice","href","message","noResults","$data","searchTerm","canCreateBranch","menuVisible","active","branch","tag","selected","remove","Vue","delimiters","el","beforeMount","vm","$el","getAttribute","document","body","contains","set","watch","visible","focusSearchField","computed","filteredItems","filter","item","toLowerCase","showCreateNewBranch","showNoResults","methods","prev","getSelected","createNewBranch","$refs","newBranchForm","submit","nextTick","searchField","focus","j","getSelectedIndexInFiltered","scrollToActive","Array","isArray","cont","scrollContainer","offsetTop","scrollTop","clientHeight","keydown","keyCode","keyup","$prompt","toString","show","hide","change","checked","$newLabelPanel","minicolors","color_hex","modal","onApprove","$datepicker","datetimepicker","lang","inline","timepicker","startDate","formatDate","onSelectDate","ct","dateFormat","$issueTitle","$editInput","editTitleToggle","toggle","title","$segment","next","$editContentZone","$renderContent","$rawContent","$textarea","issuesTribute","attach","emojiTribute","$dropzone","$files","filenameDict","dropzone","headers","maxFiles","maxFilesize","acceptedFiles","addRemoveLinks","dictDefaultMessage","dictInvalidFileType","dictFileTooBig","dictRemoveFile","init","on","submitted","_csrf","getJSON","drop","removeAllFiles","empty","imgSrc","emit","files","$editContentForm","attr","$attachments","map","content","$content","attachments","confirm","$statusButton","$mergeButton","e","closest","initReactionSelector","reactions","popup","done","resp","react","insertBefore","appendTo","hasEmoji","$item","addLine","delLine","addPercent","parseFloat","localStorage","setItem","select","$repoComparePull","assingMenuAttributes","menu","id","Math","floor","random","initRepositoryCollaboration","initEditor","prop","$editFilename","$section","$divider","parts","getCursorPosition","last","setSelectionRange","element","trigger","$editArea","markdownFileExts","lineWrapExtensions","spec","extension","extWithDot","dataUrl","apiCall","exec","info","CodeMirror","findModeByExtension","previewLink","mime","toTextArea","SimpleMDE","autoDownloadFontAwesome","forceSync","renderingConfig","singleLineBreaks","indentWithTabs","tabSize","spellChecker","previewRender","plainText","preview","setTimeout","innerHTML","toolbar","setSimpleMDE","fromTextArea","lineNumbers","cm","_change","getValue","setCodeMirror","setOption","autoLoadMode","editorconfig","indent_style","Tab","spaces","parseInt","getOption","replaceSelection","indent_size","tab_width","$commitButton","$editForm","areYouSure","silent","dirtyClass","fieldSelector","dirty","initUserSettings","keypress","initCodeView","$select","siblings","selectRange","shiftKey","eq","getSelection","removeAllRanges","selection","hash","match","$first","offset","top","u2fSigned","stringify","contentType","fail","u2fError","u2fRegistered","errorCode","checkError","errorType","u2fErrors","1","2","3","4","5","u2fRegisterRequest","req","registeredKeys","u2fApi","register","appId","registerRequests","catch","reason","undefined","metaData","code","changeHash","history","pushState","$from","a","b","classes","showDeletePopup","dialog","closable","redirect","showAddAllPopup","Dropzone","autoDiscover","from","toStr","isCallable","fn","maxSafeInteger","pow","toLength","len","number","Number","isNaN","isFinite","abs","toInteger","min","max","arrayLike","C","TypeError","mapFn","arguments","T","A","kValue","k","assign","_varArgs","to","index","nextSource","nextKey","writable","configurable","String","endsWith","pattern","pos","Sel","createRange","SelLength","moveStart","ready","onShow","transition","direction","accordion","checkbox","progress","showActivity","slideToggle","nodes","slice","querySelectorAll","setConfig","img_dir","ignore_emoticons","getElementsByClassName","childNodes","nodeName","clipboard","Clipboard","clearSelection","setAttribute","node","encodeURIComponent","wrap","children","dataset","issueIDs","issueId","_","first","search","minCharacters","apiSettings","onResponse","response","_i","login","full_name","image","avatar_url","results","searchFields","$searchTeamBox","permission","searchTeams","$searchRepoBox","description","searchRepositories","dbType","dbDefaults","_type","defaultHost","is","toggleMigrations","authUserName","cloneAddr","startsWith","initMigration","simplemde","codemirror","cursorPos","getCursor","setCursor","line","ch","className","getInputField","initWikiForm","updateContentType","initWebhook","removeAttr","authType","onOAuth2Change","onSecurityProtocolChange","onUsePagedSearchChange","onOAuth2UseCustomURLChange","$detailModal","$checkboxes","ids","provider","initAdmin","getElementById","component","props","searchLimit","default","required","uid","organizations","isOrganization","Boolean","canCreateOrganization","organizationsTotalCount","moreReposLink","repos","reposTotalCount","reposFilter","searchQuery","isLoading","repoTypes","count","searchMode","showMoreReposLink","searchURL","repoTypeCount","mounted","searchRepos","changeTab","changeReposFilter","showRepo","repo","owner","mirror","fork","self","searchedMode","searchedURL","searchedQuery","result","_textStatus","request","getResponseHeader","always","repoClass","private","querySelector","initVueApp","ctrlKey","altKey","metaKey","isExpanded","initNavbarContentToggle","mgrBtn","editDiv","viewDiv","saveBtn","topicDropdown","topicForm","topicPrompts","hidePrompt","prompts","countPrompt","formatPrompt","getPrompts","topics","_data","responseJSON","topicArray","invalidTopics","topicLables","form","allowAdditions","forceSelection","fields","saveRemoteData","duration","variation","blue","basic","throttle","cache","formattedResponse","query","urlData","trim","found_query","current_topics","found","topic_name","unshift","sort","onLabelCreate","contents","replaceWith","onAdd","addedValue","_addedText","$addedChoice","settings","rules","validateTopic","_values","regExp","identifier","prompt","initTopicbar","ensureSupport","sign","challenge","err","allowMultiple","repolink","repoId","crossRepoSearch","issueSearchUrl","filteredResponse","currIssueId","issue","repository","regStr","newStr","RegExp","selectedItems","initIssueList","toUpperCase","wipPrefixes","sticky","isSplit","side","idx","path","tr","ntr","after","td","commentCloud","initRepoStatusChecker","migrating","repo_name","complete","$repoTemplate","checkTemplate","$templateUnits","$nonTemplate","changeOwner","_r","initTemplateSearch","getItem","routes","$cloneAddr","$repoName","arrays","$title","timeAddManual","toggleStopwatch","cancelStopwatch","initHeatmap","appElementId","heatmapUser","locale","contributions","no_contributions","vueDelimeters","user","colorRange","endDate","values","totalContributions","getColor","Date","loadHeatmap","userName","chartRawData","chartData","date","timestamp","createElement","appendChild","color","getComputedStyle","backgroundColor","removeChild","template","toggleDeadlineForm","fadeToggle","setDeadline","deadlineString","realDeadline","newDate","error","updateDeadline","deleteDependencyModal","cancelCodeComment","btn","onOAuthLoginClick","oauthLoader","oauthNav"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,+BC7ErD,SAASC,EAAWC,GACjB,OAAOC,OAAO,WAAWD,KAAKA,GAAME,OAGvC,IAAIC,EACAC,EACAC,EACAC,EACAC,EAoHJ,SAASC,EAAsBC,GAC3B,MAAMC,EAAWD,EAAME,KAAK,iBAC5BD,EAASC,KAAK,SAASC,MACvBF,EAASC,KAAK,mBAAqBD,EAASG,KAAK,WAAa,MAAMC,OAAM,WACtE,MAAMC,EAAQC,EAAEC,MAChBD,EAAEE,KAAKH,EAAMF,KAAK,OAAQ,CAClB,MAASV,EACT,KAAQ,MACR,QAAWY,EAAMF,KAAK,WACtB,KAAQJ,EAAME,KAAK,0BAA4BD,EAASG,KAAK,SAAW,eAAeM,QAE3F,SAAUN,GACN,MAAMO,EAAgBX,EAAME,KAAK,0BAA4BD,EAASG,KAAK,WAAa,MACxFO,EAAclB,KAAKW,GACnBQ,QAAQC,IAAIF,EAAc,IAC1BJ,EAAE,WAAYI,EAAc,IAAIG,MAAK,WACjCC,KAAKC,eAAeR,eAMpCS,IAkDJ,SAASC,IACyB,GAA1BX,EAAE,cAAcY,SAhDxB,SAA4BnB,GACxB,MAAMC,EAAWD,EAAME,KAAK,iBAC5BD,EAASC,KAAK,SAASC,MACvB,MAAMiB,EAAcnB,EAASC,KAAK,mBAAqBD,EAASG,KAAK,WAAa,MAC9EgB,EAAYD,SACZvB,EAAmBwB,EAAYhB,KAAK,sBAAsBiB,MAAM,KAChED,EAAYf,OAAM,WACd,MAAMC,EAAQC,EAAEC,MAChBD,EAAEE,KAAKH,EAAMF,KAAK,OAAQ,CAClB,MAASV,EACT,KAAQ,MACR,QAAWY,EAAMF,KAAK,WACtB,KAAQJ,EAAME,KAAK,0BAA4BD,EAASG,KAAK,SAAW,eAAeM,QAE3F,SAAUN,GACN,MAAMO,EAAgBX,EAAME,KAAK,0BAA4BD,EAASG,KAAK,WAAa,MACxFO,EAAclB,KAAKW,GACnBQ,QAAQC,IAAIF,EAAc,IAC1BJ,EAAE,WAAYI,EAAc,IAAIG,MAAK,WACjCC,KAAKC,eAAeR,gBAiCxCc,CAAmBf,EAAE,eAzBzB,SAAyBP,GACrB,MAAMC,EAAWD,EAAME,KAAK,iBAC5BD,EAASC,KAAK,SAASC,MACvBF,EAASC,KAAK,mBAAqBD,EAASG,KAAK,QAAU,MAAMC,OAAM,WACnE,MAAMC,EAAQC,EAAEC,MAChBD,EAAEE,KAAKH,EAAMF,KAAK,OAAQ,CAClB,MAASV,EACT,QAAWY,EAAMF,KAAK,WACtB,QAAWJ,EAAME,KAAK,0BAA4BD,EAASG,KAAK,SAAW,eAAeM,QAE9F,SAAUN,GACN,MAAMmB,EAAoBvB,EAAME,KAAK,0BAA4BD,EAASG,KAAK,QAAU,MACzFmB,EAAkB9B,KAAKW,GACvBQ,QAAQC,IAAIU,EAAkB,UAa1CC,CAAgBjB,EAAE,gBAoBtB,SAASkB,EAAiBC,EAAKC,EAAQC,EAAUC,GAC7C,OAAO,IAAIC,SAAQ,SAASC,GACxBxB,EAAEyB,KAAK,CACHC,KAAM,OACNP,IAAKA,EACLtB,KAAM,CACF,MAASV,EACT,OAAUiC,EACV,UAAaC,EACb,GAAMC,GAEVK,QAASH,OA8JrB,SAASI,IACLC,OAAOC,SAASF,SAGpB,SAASG,EAAeC,GACpBA,EAAOzB,MAAK,WACR,MAAM0B,EAAQhC,KACdgC,EAAMC,iBAAiB,SAAS,SAASC,IA7CjD,SAA0CC,EAAYC,GAClD,IAAKD,EAAWE,cACZ,OAGJ,MAAMC,EAAQH,EAAWE,cAAcC,MACvC,QAAsB,IAAZ,EAIV,IAAK,IAAIxF,EAAI,EAAGA,EAAIwF,EAAM3B,OAAQ7D,IAAK,CACnC,IAAwC,IAApCwF,EAAMxF,GAAG2E,KAAKc,QAAQ,SAAiB,SAC3C,MAAMC,EAAOF,EAAMxF,GAAG2F,YAEG,mBAAf,IACNN,EAAWO,iBACXP,EAAWQ,kBACXP,EAASI,KA6BTI,CAAiCV,GAAO,SAASW,GAC7C,MAAMxF,EAAOwF,EAAIxF,KAAKyF,OAAO,EAAGD,EAAIxF,KAAK0F,YAAY,OAzErE,SAAwBf,EAAOjE,GAC3B,GAAIiE,EAAMgB,gBAA2C,IAAzBhB,EAAMgB,eAAsB,CACpD,MAAMC,EAAWjB,EAAMgB,eACjBE,EAASlB,EAAMmB,aACrBnB,EAAMjE,MAAQiE,EAAMjE,MAAMqF,UAAU,EAAGH,GACjClF,EACAiE,EAAMjE,MAAMqF,UAAUF,EAAQlB,EAAMjE,MAAM4C,QAChDqB,EAAMgB,eAAiBC,EAAWlF,EAAM4C,OACxCqB,EAAMmB,aAAeF,EAAWlF,EAAM4C,YAEtCqB,EAAMjE,OAASA,EAgEPsF,CAAerB,EAAO,KAAO3E,EAAO,OA1BpD,SAAoBiG,EAAMlB,GACtB,MAAMmB,EAAM,IAAIC,eAEhBD,EAAIE,OAAS,WACS,KAAdF,EAAIG,QACJtB,EAASmB,EAAII,eAIrBJ,EAAIK,KAAK,OAAQzE,EAAS,gBAAgB,GAC1CoE,EAAIM,iBAAiB,eAAgB3E,GACrC,MAAM4E,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQV,EAAMA,EAAKjG,MACnCkG,EAAIU,KAAKH,GAcGI,CAAWrB,GAAK,SAASsB,GACrB,MAAMvE,EAAOwE,KAAKC,MAAMF,IA9D5C,SAA8BnC,EAAOsC,EAAQC,GACzC,GAAIvC,EAAMgB,gBAA2C,IAAzBhB,EAAMgB,eAAsB,CACpD,MAAMC,EAAWjB,EAAMgB,eACjBE,EAASlB,EAAMmB,aACrBnB,EAAMjE,MAAQiE,EAAMjE,MAAMyG,QAAQF,EAAQC,GAC1CvC,EAAMgB,eAAiBC,EAAWsB,EAAO5D,OAAS2D,EAAO3D,OACzDqB,EAAMmB,aAAeD,EAASqB,EAAO5D,OAAS2D,EAAO3D,YAErDqB,EAAMjE,MAAQiE,EAAMjE,MAAMyG,QAAQF,EAAQC,GAuD9BE,CAAqBzC,EAAO,KAAO3E,EAAO,MAAO,KAAOA,EAAO,KAAO8B,EAAS,gBAAkBS,EAAK8E,KAAO,KAC7G,MAAMC,EAAQ5E,EAAE,cAAgBH,EAAK8E,KAAO,iCAAiCxE,IAAIN,EAAK8E,MACtF3E,EAAE,UAAUiE,OAAOW,YAG5B,MAIX,SAASC,IAUL,SAASC,EAAgBC,EAAUC,GAC/B,MAAMC,EAAQjF,EAAE,OAASgF,EAAgB,SACnCE,EAAYD,EAAMtF,KAAK,cACvBwF,EAAYnF,EAAE,IAAM+E,EAAW,UACrC,IAAIK,EAAmD,UAA5BD,EAAUtF,KAAK,UAC1C,MAAMwF,EAAS,GAEfrF,EAAE,IAAM+E,GAAUO,SAAS,UAAW,UAAU,WAE5C,GADAF,EAAmD,UAA5BD,EAAUtF,KAAK,UACZ,CACtB,MAAM0F,EAAW,GACjB9H,OAAO+H,KAAKH,GAAQI,SAAQ,SAASnE,GACjC,MAAMoE,EAAQL,EAAO/D,GACfqE,EAAUzE,EACZwE,EAAM,cACNA,EAAc,OACdA,EAAM,YACNpE,GAEJiE,EAASK,KAAKD,MAElBpE,QAAQsE,IAAIN,GAAUO,KAAKlE,OAInCuD,EAAUxF,KAAK,yBAAyBG,OAAM,WAG1C,GAAgB,2BAAZiF,EAmBA,OAfI/E,EAAEC,MAAM8F,SAAS,YACjB/F,EAAEC,MAAM+F,YAAY,WACpBhG,EAAEC,MAAMN,KAAK,YAAYqG,YAAY,mBAErChG,EAAEC,MAAMgG,SAAS,WACjBjG,EAAEC,MAAMN,KAAK,YAAYsG,SAAS,kBAGtC/E,EACIiE,EAAUtF,KAAK,cACf,GACAsF,EAAUtF,KAAK,YACfG,EAAEC,MAAMJ,KAAK,OAEjBsF,EAAUtF,KAAK,SAAU,WAClB,EAGPG,EAAEC,MAAM8F,SAAS,YACjB/F,EAAEC,MAAM+F,YAAY,WACpBhG,EAAEC,MAAMN,KAAK,YAAYqG,YAAY,iBACjCZ,IACMpF,EAAEC,MAAMJ,KAAK,QAASwF,SAOjBA,EAAOrF,EAAEC,MAAMJ,KAAK,OAN3BwF,EAAOrF,EAAEC,MAAMJ,KAAK,OAAS,CACzB,aAAcsF,EAAUtF,KAAK,cAC7B,OAAU,SACV,WAAYsF,EAAUtF,KAAK,gBAOvCG,EAAEC,MAAMgG,SAAS,WACjBjG,EAAEC,MAAMN,KAAK,YAAYsG,SAAS,iBAC9Bb,IACMpF,EAAEC,MAAMJ,KAAK,QAASwF,SAOjBA,EAAOrF,EAAEC,MAAMJ,KAAK,OAN3BwF,EAAOrF,EAAEC,MAAMJ,KAAK,OAAS,CACzB,aAAcsF,EAAUtF,KAAK,cAC7B,OAAU,SACV,WAAYsF,EAAUtF,KAAK,eAQ3C,MAAMqG,EAAU,GAehB,OAdAlG,EAAEC,MAAMkG,SAASxG,KAAK,SAASY,MAAK,WAC5BP,EAAEC,MAAM8F,SAAS,YACjBG,EAAQN,KAAK5F,EAAEC,MAAMJ,KAAK,OAC1BG,EAAEA,EAAEC,MAAMJ,KAAK,gBAAgBmG,YAAY,SAE3ChG,EAAEA,EAAEC,MAAMJ,KAAK,gBAAgBoG,SAAS,WAG1B,GAAlBC,EAAQtF,OACRsE,EAAUc,YAAY,QAEtBd,EAAUe,SAAS,QAEvBjG,EAAEA,EAAEC,MAAMkG,SAAStG,KAAK,OAAOM,IAAI+F,EAAQE,KAAK,OACzC,KAEXjB,EAAUxF,KAAK,mBAAmBG,OAAM,YAChCsF,GAAoC,2BAAZL,IACxB7D,EACIiE,EAAUtF,KAAK,cACf,QACAsF,EAAUtF,KAAK,YACf,IACFiG,KAAKlE,GAGX5B,EAAEC,MAAMkG,SAASxG,KAAK,SAASY,MAAK,WAChCP,EAAEC,MAAM+F,YAAY,WACpBhG,EAAEC,MAAMN,KAAK,YAAYqG,YAAY,oBAGzCf,EAAMtF,KAAK,SAASY,MAAK,WACrBP,EAAEC,MAAMgG,SAAS,WAErBf,EAAUc,YAAY,QACtBhG,EAAEA,EAAEC,MAAMkG,SAAStG,KAAK,OAAOM,IAAI,OAU3C,SAASkG,EAAWC,EAAWC,GAC3B,MAAMC,EAAQxG,EAAEsG,EAAY,UACtBrB,EAAQjF,EAAE,MAAQsG,EAAY,SAC9BG,EAA0C,UAAxBD,EAAM3G,KAAK,UAEnC2G,EAAM7G,KAAK,yBAAyBG,OAAM,WActC,OAbAE,EAAEC,MAAMkG,SAASxG,KAAK,SAASY,MAAK,WAChCP,EAAEC,MAAM+F,YAAY,sBAGxBhG,EAAEC,MAAMgG,SAAS,mBACbQ,GACAvF,EACIsF,EAAM3G,KAAK,cACX,GACA2G,EAAM3G,KAAK,YACXG,EAAEC,MAAMJ,KAAK,OACfiG,KAAKlE,GAEH2E,GACJ,IAAK,gBACDtB,EAAMtF,KAAK,aAAaT,KAAK,wBAA0Bc,EAAEC,MAAMJ,KAAK,QAAU,IAC1Ed,EAAWiB,EAAEC,MAAMjB,QAAU,QACjC,MACJ,IAAK,eACDiG,EAAMtF,KAAK,aAAaT,KAAK,wBAA0Bc,EAAEC,MAAMJ,KAAK,QAAU,qCACpCG,EAAEC,MAAMJ,KAAK,UAAY,IAC/Dd,EAAWiB,EAAEC,MAAMjB,QAAU,QAEzCgB,EAAE,MAAQsG,EAAY,oBAAoBL,SAAS,QACnDjG,EAAEuG,GAAUpG,IAAIH,EAAEC,MAAMJ,KAAK,UAEjC2G,EAAM7G,KAAK,mBAAmBG,OAAM,WAChCE,EAAEC,MAAMkG,SAASxG,KAAK,yBAAyBY,MAAK,WAChDP,EAAEC,MAAM+F,YAAY,sBAGpBS,GACAvF,EACIsF,EAAM3G,KAAK,cACX,GACA2G,EAAM3G,KAAK,YACXG,EAAEC,MAAMJ,KAAK,OACfiG,KAAKlE,GAGXqD,EAAMtF,KAAK,aAAaT,KAAK,IAC7B+F,EAAMtF,KAAK,cAAcqG,YAAY,QACrChG,EAAEuG,GAAUpG,IAAI,OAvLS,GAA7BH,EAAE,iBAAiBY,UAjN3B,WACI,MAAM8F,EAAgB1G,EAAE,qBACJ0G,EAAc/G,KAAK,wBAC3BA,KAAK,yBAAyBG,OAAM,WAC5C,MAAM6G,EAAgB3G,EAAEC,MAAMJ,KAAK,MACnCG,EAAEA,EAAEC,MAAMJ,KAAK,gBAAgBM,IAAIwG,GACnCD,EAAc/G,KAAK,oBAAoBX,KAAK2H,MAEhDD,EAAc/G,KAAK,qBAAqBG,OAAM,WAK1C,OAJA4G,EAAc/G,KAAK,kCAAkCiH,IAAI,UAAW,QACpEF,EAAc/G,KAAK,oBAAoBqG,YAAY,SACnDhG,EAAEA,EAAEC,MAAMJ,KAAK,WAAW+G,IAAI,UAAW,SACzC5G,EAAEC,MAAMN,KAAK,SAASsG,SAAS,UACxB,KAwMXY,GACArH,EAAsBQ,EAAE,kBACxB+B,EAAe/B,EAAE,2BA6HjB8E,EAAgB,eAAgB,UAChCA,EAAgB,mBAAoB,aACpCA,EAAgB,0BAA2B,aAuD3CuB,EAAW,oBAAqB,iBAChCA,EAAW,mBAAoB,iBA+FnC,SAASS,IACL,GAA+B,GAA3B9G,EAAE,eAAeY,OACjB,OAGJ,SAASmG,EAAyBhC,GAC9B,MAAMiC,EAAYhH,EAAE+E,GACpBiC,EAAU1B,SAAS,CACf2B,gBAAgB,EAChBC,iBAAiB,EACjBC,SAAU,SAAUC,EAAOC,EAAQC,GAC3BA,EAAQzH,KAAK,SACbgC,OAAOC,SAASyF,KAAOD,EAAQzH,KAAK,SAG5C2H,QAAS,CAACC,UAAWT,EAAUnH,KAAK,iBAgD5C,IA3CIG,EAAE,yBAAyBY,OAAS,GACpC,sBAAwBA,OAAS,IAonErCZ,EAnnEgC,+BAmnEpBO,MAAK,WACb,MACMmH,EADY1H,EAAEC,MACIN,KAAK,SACvBE,EAAO,CACT0C,MAAO,GACPrE,KAAMwJ,EAAM7H,KAAK,QACjB8H,WAAY,GACZF,UAAW,GACXG,iBAAiB,EACjBC,aAAa,EACbC,OAAQ,GAEZJ,EAAM/H,KAAK,SAASY,MAAK,WACrBV,EAAK0C,MAAMqD,KAAK,CACZtI,KAAM0C,EAAEC,MAAMjB,OACdmC,IAAKnB,EAAEC,MAAMJ,KAAK,OAClBkI,OAAQ/H,EAAEC,MAAM8F,SAAS,UACzBiC,IAAKhI,EAAEC,MAAM8F,SAAS,OACtBkC,SAAUjI,EAAEC,MAAM8F,SAAS,iBAGnC2B,EAAMQ,SACN,IAAIC,IAAI,CACJC,WAAY,CAAC,KAAM,KACnBC,GAAIpI,KACJJ,KAAMA,EAENyI,YAAa,WACT,MAAMC,EAAKtI,KAEXA,KAAKwH,UAAYc,EAAGC,IAAIC,aAAa,mBACrCxI,KAAK2H,gBAAoE,SAAlDW,EAAGC,IAAIC,aAAa,0BAE3CC,SAASC,KAAKzG,iBAAiB,SAAS,SAASC,GACzCoG,EAAGC,IAAII,SAASzG,EAAMH,SAGtBuG,EAAGV,aACHM,IAAIU,IAAIN,EAAI,eAAe,OAKvCO,MAAO,CACHjB,YAAa,SAASkB,GACdA,GACA9I,KAAK+I,qBAKjBC,SAAU,CACNC,cAAe,WACX,MAAMX,EAAKtI,KAELsC,EAAQgG,EAAGhG,MAAM4G,QAAO,SAAUC,GACpC,OAAqB,aAAZb,EAAGrK,MAAuBkL,EAAKrB,QAChB,SAAZQ,EAAGrK,MAAmBkL,EAAKpB,QAC9BO,EAAGZ,YACDyB,EAAK9L,KAAK+L,cAAc7G,QAAQ+F,EAAGZ,WAAW0B,gBAAkB,MAK/E,OAFAd,EAAGT,OAA2B,IAAjBvF,EAAM3B,QAAgB2H,EAAGe,oBAAsB,GAAK,EAE1D/G,GAEXgH,cAAe,WACX,OAAqC,IAA9BtJ,KAAKiJ,cAActI,SACdX,KAAKqJ,qBAErBA,oBAAqB,WACjB,MAAMf,EAAKtI,KACX,SAAKA,KAAK2H,kBAAoBW,EAAGZ,YAA0B,SAAZY,EAAGrK,OAMpC,IAFPqK,EAAGhG,MAAM4G,QAAO,SAAUC,GAC7B,OAAOA,EAAK9L,KAAK+L,gBAAkBd,EAAGZ,WAAW0B,iBAClDzI,SAIX4I,QAAS,CACLnD,WAAY,SAAS+C,GACjB,MAAMK,EAAOxJ,KAAKyJ,cACL,OAATD,IACAA,EAAKxB,UAAW,GAEpBmB,EAAKnB,UAAW,EAChBpG,OAAOC,SAASyF,KAAO6B,EAAKjI,KAEhCwI,gBAAiB,WACR1J,KAAKqJ,qBAGVrJ,KAAK2J,MAAMC,cAAcC,UAE7Bd,iBAAkB,WACd,MAAMT,EAAKtI,KACXkI,IAAI4B,UAAS,WACTxB,EAAGqB,MAAMI,YAAYC,YAG7BP,YAAa,WACT,IAAK,IAAI3M,EAAI,EAAGmN,EAAIjK,KAAKsC,MAAM3B,OAAQ7D,EAAImN,IAAKnN,EAC5C,GAAIkD,KAAKsC,MAAMxF,GAAGkL,SACd,OAAOhI,KAAKsC,MAAMxF,GAE1B,OAAO,MAEXoN,2BAA4B,WACxB,IAAK,IAAIpN,EAAI,EAAGmN,EAAIjK,KAAKiJ,cAActI,OAAQ7D,EAAImN,IAAKnN,EACpD,GAAIkD,KAAKiJ,cAAcnM,GAAGkL,SACtB,OAAOlL,EAEf,OAAQ,GAEZqN,eAAgB,WACZ,IAAI/B,EAAKpI,KAAK2J,MAAM,WAAa3J,KAAK6H,QACtC,IAAKO,GAAoB,IAAdA,EAAGzH,OACV,OAEAyJ,MAAMC,QAAQjC,KACdA,EAAKA,EAAG,IAGZ,MAAMkC,EAAOtK,KAAK2J,MAAMY,gBAEnBnC,EAAGoC,UAAYF,EAAKG,UACpBH,EAAKG,UAAYrC,EAAGoC,UAEfpC,EAAGoC,UAAYpC,EAAGsC,aAAeJ,EAAKG,UAAYH,EAAKI,eAC7DJ,EAAKG,UAAYrC,EAAGoC,UAAYpC,EAAGsC,aAAeJ,EAAKI,eAG/DC,QAAS,SAASzI,GACd,MAAMoG,EAAKtI,KACX,GAAsB,KAAlBkC,EAAM0I,QAAgB,CAQtB,GANA1I,EAAMQ,kBAEa,IAAf4F,EAAGT,SACHS,EAAGT,OAASS,EAAG4B,8BAGf5B,EAAGT,QAAUS,EAAGe,oBAAsB,EAAI,IAAMf,EAAGW,cAActI,OACjE,OAEJ2H,EAAGT,SACHS,EAAG6B,iBAEP,GAAsB,KAAlBjI,EAAM0I,QAAgB,CAQrB,GAND1I,EAAMQ,kBAEc,IAAf4F,EAAGT,SACJS,EAAGT,OAASS,EAAG4B,8BAGd5B,EAAGT,QAAU,EACd,OAEJS,EAAGT,SACHS,EAAG6B,iBAEc,IAAjBjI,EAAM0I,UAEN1I,EAAMQ,iBAED4F,EAAGT,QAAUS,EAAGW,cAActI,OAC/B2H,EAAGoB,kBACIpB,EAAGT,QAAU,GACpBS,EAAGlC,WAAWkC,EAAGW,cAAcX,EAAGT,UAGrB,IAAjB3F,EAAM0I,UAEN1I,EAAMQ,iBACN4F,EAAGV,aAAc,UAjyEjC7H,EAAE,yBAAyBY,OAAS,GACpCmG,EAAyB,0BAIzB/G,EAAE,gCAAgCY,OAAS,IAC3CZ,EAAE,cAAc8K,OAAM,WAClB,MAAMC,EAAU/K,EAAE,4BACdA,EAAEC,MAAME,MAAM6K,WAAW3B,eAAiBrJ,EAAEC,MAAMJ,KAAK,QAAQmL,WAAW3B,cAC1E0B,EAAQE,OAERF,EAAQG,UAKhBlL,EAAE,kBAAkBmL,QAAO,WACnBlL,KAAKmL,SACLpL,EAAEA,EAAEC,MAAMJ,KAAK,WAAWmG,YAAY,YACjChG,EAAEC,MAAMJ,KAAK,YAAYG,EAAEA,EAAEC,MAAMJ,KAAK,YAAYoG,SAAS,cAElEjG,EAAEA,EAAEC,MAAMJ,KAAK,WAAWoG,SAAS,YAC9BjG,EAAEC,MAAMJ,KAAK,YAAYG,EAAEA,EAAEC,MAAMJ,KAAK,YAAYmG,YAAY,gBAG7EhG,EAAE,wBAAwBmL,QAAO,WACX,SAAdlL,KAAKjC,OACLgC,EAAEA,EAAEC,MAAMJ,KAAK,WAAWoG,SAAS,iBACI,IAA5BjG,EAAEC,MAAMJ,KAAK,YAA4BG,EAAEA,EAAEC,MAAMJ,KAAK,YAAYmG,YAAY,aACtE,QAAd/F,KAAKjC,QACZgC,EAAEA,EAAEC,MAAMJ,KAAK,WAAWmG,YAAY,iBACC,IAA5BhG,EAAEC,MAAMJ,KAAK,YAA6BG,EAAEA,EAAEC,MAAMJ,KAAK,YAAYoG,SAAS,iBAMjGjG,EAAE,sBAAsBY,OAAS,EAAG,CAEpC,MAAMyK,EAAiBrL,EAAE,sBACzBA,EAAE,qBAAqBF,OAAM,WACzBuL,EAAeJ,UAEnBjL,EAAE,8BAA8BF,OAAM,WAClCuL,EAAeH,UAGnBlL,EAAE,iBAAiBO,MAAK,WACpBP,EAAEC,MAAMqL,gBAEZtL,EAAE,qBAAqBF,OAAM,WACzB,MAAMyL,EAAYvL,EAAEC,MAAMJ,KAAK,aAC/BG,EAAE,iBAAiBG,IAAIoL,GACvBvL,EAAE,4BAA4B4G,IAAI,mBAAoB2E,MAE1DvL,EAAE,sBAAsBF,OAAM,WAW1B,OAVAE,EAAE,mBAAmBG,IAAIH,EAAEC,MAAMJ,KAAK,OACtCG,EAAE,gCAAgCG,IAAIH,EAAEC,MAAMJ,KAAK,UACnDG,EAAE,qCAAqCG,IAAIH,EAAEC,MAAMJ,KAAK,gBACxDG,EAAE,6BAA6BG,IAAIH,EAAEC,MAAMJ,KAAK,UAChDG,EAAE,4BAA4B4G,IAAI,mBAAoB5G,EAAEC,MAAMJ,KAAK,UACnEG,EAAE,qBAAqBwL,MAAM,CACzBC,UAAW,WACPzL,EAAE,oBAAoB8J,YAE3B0B,MAAM,SACF,KAKf,GAAIxL,EAAE,6BAA6BY,OAAS,EAAG,CAC3C,MAAM8K,EAAc1L,EAAE,yBACtB0L,EAAYC,eAAe,CACvBC,KAAMF,EAAY7L,KAAK,QACvBgM,QAAQ,EACRC,YAAY,EACZC,UAAWL,EAAY7L,KAAK,cAC5BmM,WAAY,QACZC,aAAc,SAAUC,GACpBlM,EAAE,aAAaG,IAAI+L,EAAGC,WAAW,aAGzCnM,EAAE,eAAeF,OAAM,WAEnB,OADAE,EAAE,aAAaG,IAAI,KACZ,KAKf,GAAIH,EAAE,0BAA0BY,OAAS,EAAG,CAExC,MAAMwL,EAAcpM,EAAE,gBAChBqM,EAAarM,EAAE,2BACfsM,EAAkB,WAMpB,OALAF,EAAYG,SACZvM,EAAE,gBAAgBuM,SAClBvM,EAAE,qBAAqBuM,SACvBvM,EAAE,YAAYuM,SACdF,EAAWpC,SACJ,GAEXjK,EAAE,eAAeF,MAAMwM,GACvBtM,EAAE,sBAAsBF,MAAMwM,GAC9BtM,EAAE,oBAAoBF,MAAMwM,GAAiBxM,OAAM,WAC/C,OAA+B,GAA3BuM,EAAWlM,MAAMS,QACjByL,EAAWlM,OAASiM,EAAYpN,QAChCqN,EAAWlM,IAAIiM,EAAYpN,SACpB,IAGXgB,EAAEE,KAAKF,EAAEC,MAAMJ,KAAK,cAAe,CAC3B,MAASV,EACT,MAASkN,EAAWlM,QAExB,SAAUN,GACNwM,EAAWlM,IAAIN,EAAK2M,OACpBJ,EAAYpN,KAAKa,EAAK2M,OACtB5K,QAED,MAIX5B,EAAE,iBAAiBF,OAAM,WACrB,MAAM2M,EAAWzM,EAAEC,MAAMkG,SAASA,SAASA,SAASuG,OAC9CC,EAAmBF,EAAS9M,KAAK,sBACjCiN,EAAiBH,EAAS9M,KAAK,mBAC/BkN,EAAcJ,EAAS9M,KAAK,gBAClC,IAAImN,EAGJ,GAAsC,GAAlCH,EAAiBzN,OAAO0B,OAAa,CACrC+L,EAAiBzN,KAAKc,EAAE,sBAAsBd,QAC9C4N,EAAYH,EAAiBhN,KAAK,YAClCoN,cAAcC,OAAOF,EAAUlP,OAC/BqP,aAAaD,OAAOF,EAAUlP,OAE9B,MAAMsP,EAAYP,EAAiBhN,KAAK,aACxCuN,EAAUrN,KAAK,SAAS,GACxB,MAAMsN,EAASR,EAAiBhN,KAAK,kBACrC,GAAIuN,EAAUtM,OAAS,EAAG,CACtB,MAAMwM,EAAe,GACrBF,EAAUG,SAAS,CACflM,IAAK+L,EAAUrN,KAAK,cACpByN,QAAS,CAAC,eAAgBnO,GAC1BoO,SAAUL,EAAUrN,KAAK,YACzB2N,YAAaN,EAAUrN,KAAK,YAC5B4N,cAA8C,QAA9BP,EAAUrN,KAAK,WAAwB,KAAOqN,EAAUrN,KAAK,WAC7E6N,gBAAgB,EAChBC,mBAAoBT,EAAUrN,KAAK,mBACnC+N,oBAAqBV,EAAUrN,KAAK,sBACpCgO,eAAgBX,EAAUrN,KAAK,gBAC/BiO,eAAgBZ,EAAUrN,KAAK,eAC/BkO,KAAM,WACF9N,KAAK+N,GAAG,WAAW,SAAUzK,EAAM1D,GAC/BuN,EAAa7J,EAAKjG,MAAQ,CACtB,KAAQuC,EAAK8E,KACb,WAAa,GAEjB,MAAMC,EAAQ5E,EAAE,cAAgBH,EAAK8E,KAAO,iCAAiCxE,IAAIN,EAAK8E,MACtFwI,EAAOlJ,OAAOW,MAElB3E,KAAK+N,GAAG,eAAe,SAAUzK,GACvBA,EAAKjG,QAAQ8P,IAGnBpN,EAAE,IAAMoN,EAAa7J,EAAKjG,MAAMqH,MAAMuD,SAClCgF,EAAUrN,KAAK,eAAiBqN,EAAUrN,KAAK,UAAYuN,EAAa7J,EAAKjG,MAAM2Q,WACnFjO,EAAEE,KAAKgN,EAAUrN,KAAK,cAAe,CACjC0D,KAAM6J,EAAa7J,EAAKjG,MAAMqH,KAC9BuJ,MAAOhB,EAAUrN,KAAK,cAIlCI,KAAK+N,GAAG,UAAU,WACdhO,EAAEO,KAAK6M,GAAc,SAAS9P,GAC1B8P,EAAa9P,GAAM2Q,WAAY,QAGvChO,KAAK+N,GAAG,UAAU,WACdhO,EAAEmO,QAAQxB,EAAiB9M,KAAK,mBAAmB,SAASA,GACxD,MAAMuO,EAAOlB,EAAUtP,IAAI,GAAGyP,SAC9Be,EAAKC,gBAAe,GACpBlB,EAAOmB,QACPtO,EAAEO,KAAKV,GAAM,WACT,MAAM0O,EAAUrB,EAAUrN,KAAK,cAAgB,IAAMI,KAAK0E,KAC1DyJ,EAAKI,KAAK,YAAavO,MACvBmO,EAAKI,KAAK,YAAavO,KAAMsO,GAC7BH,EAAKI,KAAK,WAAYvO,MACtBmO,EAAKK,MAAM7I,KAAK3F,MAChBmN,EAAanN,KAAK3C,MAAQ,CACtB,WAAa,EACb,KAAQ2C,KAAK0E,MAEjBuI,EAAUvN,KAAK,YAAc4O,EAAS,MAAM3H,IAAI,YAAa,QAC7D,MAAMhC,EAAQ5E,EAAE,cAAgBC,KAAK0E,KAAO,iCAAiCxE,IAAIF,KAAK0E,MACtFwI,EAAOlJ,OAAOW,eAMlCsI,EAAUtP,IAAI,GAAGyP,SAASmB,KAAK,UAGnC,MAAME,EAAmB/B,EAAiBhN,KAAK,oBACzCD,EAAWgP,EAAiB/O,KAAK,iBACvCD,EAASiP,KAAK,aAAchC,EAAiB9M,KAAK,UAClDH,EAASiP,KAAK,eAAgBhC,EAAiB9M,KAAK,YACpDH,EAASC,KAAK,eAAegP,KAAK,WAAYhC,EAAiB9M,KAAK,UACpEH,EAASC,KAAK,iBAAiBgP,KAAK,WAAYhC,EAAiB9M,KAAK,YACtE6O,EAAiB/O,KAAK,kBAAkBgP,KAAK,WAAYhC,EAAiB9M,KAAK,UAC/E6O,EAAiB/O,KAAK,oBAAoBgP,KAAK,WAAYhC,EAAiB9M,KAAK,YAEjFL,EAAsBkP,GAEtB/B,EAAiBhN,KAAK,kBAAkBG,OAAM,WAC1C8M,EAAe3B,OACf0B,EAAiBzB,OACjBgC,EAAUtP,IAAI,GAAGyP,SAASmB,KAAK,aAEnC7B,EAAiBhN,KAAK,gBAAgBG,OAAM,WACxC8M,EAAe3B,OACf0B,EAAiBzB,OACjB,MAAM0D,EAAezB,EAAOxN,KAAK,gBAAgBkP,KAAI,WACjD,OAAO7O,EAAEC,MAAME,SAChBvC,MACHoC,EAAEE,KAAKyM,EAAiB9M,KAAK,cAAe,CACxC,MAASV,EACT,QAAW2N,EAAU3M,MACrB,QAAWwM,EAAiB9M,KAAK,WACjC,MAAS+O,IAEb,SAAU/O,GACa,GAAfA,EAAKe,OACLgM,EAAe1N,KAAKc,EAAE,eAAed,SAErC0N,EAAe1N,KAAKW,EAAKiP,SACzBzO,QAAQC,IAAIsM,EAAe,IAC3B5M,EAAE,WAAY4M,EAAe,IAAIrM,MAAK,WAClCC,KAAKC,eAAeR,UAG5B,MAAM8O,EAAWtC,EAAStG,SACtB4I,EAASpP,KAAK,oBAAoBiB,OAUP,IAApBf,EAAKmP,YACZD,EAASpP,KAAK,oBAAoBwG,SAAS+B,SAE3C6G,EAASpP,KAAK,oBAAoBT,KAAKW,EAAKmP,aAZrB,IAApBnP,EAAKmP,cACJD,EAAS9K,OACT,6FAKA8K,EAASpP,KAAK,oBAAoBT,KAAKW,EAAKmP,cAOpD9B,EAAUtP,IAAI,GAAGyP,SAASmB,KAAK,UAC/BtB,EAAUtP,IAAI,GAAGyP,SAASmB,KAAK,qBAIvC1B,EAAYL,EAAS9M,KAAK,YAU9B,OANAgN,EAAiB1B,OACjB2B,EAAe1B,OACe,GAA1B4B,EAAU3M,MAAMS,QAChBkM,EAAU3M,IAAI0M,EAAY7N,QAE9B8N,EAAU7C,SACH,KAIXjK,EAAE,mBAAmBF,OAAM,WACvB,MAAMC,EAAQC,EAAEC,MAQhB,OAPIgP,QAAQlP,EAAMF,KAAK,YACnBG,EAAEE,KAAKH,EAAMF,KAAK,OAAQ,CACtB,MAASV,IACVwC,SAAQ,WACP3B,EAAE,IAAMD,EAAMF,KAAK,eAAeqI,aAGnC,KAIX,MAAMgH,EAAgBlP,EAAE,kBACxBA,EAAE,4BAA4B8K,OAAM,WACJ,GAAxB9K,EAAEC,MAAME,MAAMS,OACdsO,EAAclQ,KAAKkQ,EAAcrP,KAAK,WAEtCqP,EAAclQ,KAAKkQ,EAAcrP,KAAK,0BAG9CqP,EAAcpP,OAAM,WAChBE,EAAE,WAAWG,IAAI+O,EAAcrP,KAAK,eACpCG,EAAE,iBAAiB8J,YAIvB,MAAMqF,EAAenP,EAAE,0BACvBmP,EAAanB,GAAG,SAAS,SAASoB,GAC9BA,EAAEzM,iBACF3C,EAAE,IAAMA,EAAEC,MAAMJ,KAAK,MAAQ,WAAWoL,OACxCjL,EAAEC,MAAMkG,SAAS+E,UAErBlL,EAAE,6BAA6BsF,SAAS,CACpC6B,SAAU,SAAUC,EAAOC,EAAQC,GAC3BA,EAAQzH,KAAK,QACbsP,EAAaxP,KAAK,gBAAgBX,KAAKsI,EAAQtI,QAC/CmQ,EAAatP,KAAK,KAAMyH,EAAQzH,KAAK,WAIjDG,EAAE,iBAAiBgO,GAAG,SAAS,SAASoB,GACpCA,EAAEzM,iBACF3C,EAAEC,MAAMoP,QAAQ,SAASnE,OACzBiE,EAAahJ,SAAS8E,UAtwBlC,SAASqE,EAAqBnJ,GAC1B,IAAIoJ,EAAY,GACXpJ,IACDA,EAASnG,EAAE0I,UACX6G,EAAY,iBAGhBpJ,EAAOxG,KAAK4P,EAAY,WAAWC,MAAM,CAAC,SAAY,cAAe,SAAY,CAAC,QAAW,QAAS,MAAS,UAE/GrJ,EAAOxG,KAAK,qCAAuC4P,EAAY,WAAWvB,GAAG,SAAS,SAASoB,GAC3F,MAAM7G,EAAKtI,KAGX,GAFAmP,EAAEzM,iBAEE3C,EAAEC,MAAM8F,SAAS,YAAa,OAElC,MAGM5E,GAHYnB,EAAEC,MAAM8F,SAAS,QAC3B/F,EAAEC,MAAMoP,QAAQ,oBAAoBxP,KAAK,cACzCG,EAAEC,MAAMJ,KAAK,eACG,KAAOG,EAAEC,MAAM8F,SAAS,QAAU,UAAY,SACtE/F,EAAEyB,KAAK,CACHC,KAAM,OACNP,IAAKA,EACLtB,KAAM,CACF,MAASV,EACT,QAAWa,EAAEC,MAAMJ,KAAK,cAE7B4P,MAAK,SAASC,GACb,GAAIA,IAASA,EAAKxQ,MAAQwQ,EAAKpB,OAAQ,CACnC,MAAMQ,EAAU9O,EAAEuI,GAAI8G,QAAQ,YAC9B,IAAIM,EAAQb,EAAQnP,KAAK,sBAIzB,IAHK+P,EAAKpB,OAASqB,EAAM/O,OAAS,GAC9B+O,EAAMzH,UAELwH,EAAKpB,MAAO,CACbqB,EAAQ3P,EAAE,qDACV,MAAMgP,EAAcF,EAAQnP,KAAK,yBAC7BqP,EAAYpO,OAAS,EACrB+O,EAAMC,aAAaZ,GAEnBW,EAAME,SAASf,GAEnBa,EAAMzQ,KAAKwQ,EAAKxQ,MAChB,MAAM4Q,EAAWH,EAAMhQ,KAAK,cAC5B,IAAK,IAAI5C,EAAI,EAAGA,EAAI+S,EAASlP,OAAQ7D,IACjCsD,QAAQC,IAAIwP,EAASlS,IAAIb,IAE7B4S,EAAMhQ,KAAK,aAAa2F,WACxBgK,EAAqBK,WA0tBjCL,GAIAtP,EAAE,oBAAoBY,OAAS,GAC/BZ,EAAE,iBAAiBO,MAAK,WACpB,MAAMwP,EAAQ/P,EAAEC,MACV+P,EAAUD,EAAMpQ,KAAK,uBAAuBE,KAAK,QACjDoQ,EAAUF,EAAMpQ,KAAK,uBAAuBE,KAAK,QACjDqQ,EAAaC,WAAWH,IAAYG,WAAWH,GAAWG,WAAWF,IAAY,IACvFF,EAAMpQ,KAAK,aAAaiH,IAAI,QAASsJ,EAAa,QAK1DlQ,EAAE,mBAAmBF,OAAM,WACvBE,EAAE,cAAchB,KAAKgB,EAAEC,MAAMJ,KAAK,SAClCG,EAAE,mBAAmBG,IAAIH,EAAEC,MAAMJ,KAAK,SACtCG,EAAEC,MAAMgG,SAAS,QACjBjG,EAAE,qBAAqBgG,YAAY,QACnCoK,aAAaC,QAAQ,sBAAuB,UAEhDrQ,EAAE,qBAAqBF,OAAM,WACzBE,EAAE,cAAchB,KAAKgB,EAAEC,MAAMJ,KAAK,SAClCG,EAAE,mBAAmBG,IAAIH,EAAEC,MAAMJ,KAAK,SACtCG,EAAEC,MAAMgG,SAAS,QACjBjG,EAAE,mBAAmBgG,YAAY,QACjCoK,aAAaC,QAAQ,sBAAuB,YAEhDrQ,EAAE,mBAAmBF,OAAM,WACvBE,EAAEC,MAAMqQ,YAIZ,MAAMC,EAAmBvQ,EAAE,4BACvBuQ,EAAiB3P,OAAS,IAC1BmG,EAAyB,4BAEzBwJ,EAAiB5Q,KAAK,oBAAoBqO,GAAG,SAAS,SAASoB,GAC3DA,EAAEzM,iBACF4N,EAAiB5Q,KAAK,qBAAqBsL,OAC3CjL,EAAEC,MAAMkG,SAAS+E,WAKrBlL,EAAE,iCAAiCY,OAAS,IAC5CmG,EAAyB,iCACzB/G,EAAE,yCAAyCmL,QAAO,WAC1ClL,KAAKmL,QACLpL,EAAEA,EAAEC,MAAMJ,KAAK,WAAWmG,YAAY,YAEtChG,EAAEA,EAAEC,MAAMJ,KAAK,WAAWoG,SAAS,gBAgHnD,SAASuK,EAAqBC,GAC1B,MAAMC,EAAKC,KAAKC,MAAMD,KAAKE,SAAWF,KAAKC,MAAM,MAUjD,OATAH,EAAK9B,KAAK,aAAc8B,EAAK9B,KAAK,cAAgB+B,GAClDD,EAAK9B,KAAK,eAAgB8B,EAAK9B,KAAK,gBAAkB+B,GACtDD,EAAK9Q,KAAK,SAASY,MAAK,WACpB,MAAMX,EAAMI,EAAEC,MAAM0O,KAAK,YAAc+B,EACvC1Q,EAAEC,MAAM0O,KAAK,WAAY/O,MAE7B6Q,EAAKtK,SAASxG,KAAK,uBAAuBgP,KAAK,WAAY,QAAU+B,GACrED,EAAKtK,SAASxG,KAAK,yBAAyBgP,KAAK,WAAY,UAAY+B,GACzElR,EAAsBiR,EAAKtK,OAAO,UAC3BuK,EAGX,SAASI,IAEL9Q,EAAE,2BAA2BF,OAAM,WAC/B,MAAM0G,EAAQxG,EAAEC,MAAMkG,SACtBnG,EAAEE,KAAKsG,EAAM3G,KAAK,OAAQ,CACtB,MAASV,EACT,IAAOqH,EAAM3G,KAAK,OAClB,KAAQG,EAAEC,MAAMJ,KAAK,cAuLjC,SAASkR,IACL/Q,EAAE,gCAAgCmL,QAAO,WAChB,wBAAjBnL,EAAEC,MAAME,OACRH,EAAE,2BAA2BiL,OAC7BjL,EAAE,iCAAiCgR,KAAK,YAAW,KAEnDhR,EAAE,2BAA2BkL,OAC7BlL,EAAE,iCAAiCgR,KAAK,YAAW,IAEvDhR,EAAE,kBAAkBhB,KAAKgB,EAAEC,MAAM0O,KAAK,mBAG1C,MAAMsC,EAAgBjR,EAAE,cACxBiR,EAAcnG,OAAM,SAAUsE,GAC1B,MAAM8B,EAAWlR,EAAE,4BACbmR,EAAWnR,EAAE,2BACnB,IAAIhC,EACAoT,EAaJ,GAXiB,GAAbhC,EAAEvE,SACiC,GAA/B7K,EAAEC,MAAMoR,qBACJH,EAAStQ,OAAS,IAClB5C,EAAQkT,EAASI,OAAO3R,KAAK,KAAKX,OAClCgB,EAAEC,MAAME,IAAInC,EAAQgC,EAAEC,MAAME,OAC5BH,EAAEC,MAAM,GAAGsR,kBAAkBvT,EAAM4C,OAAQ5C,EAAM4C,QACjDsQ,EAASI,OAAOpJ,SAChBiJ,EAASG,OAAOpJ,UAIX,KAAbkH,EAAEvE,QAAgB,CAClBuG,EAAQpR,EAAEC,MAAME,MAAMW,MAAM,KAC5B,IAAK,IAAI/D,EAAI,EAAGA,EAAIqU,EAAMxQ,SAAU7D,EAChCiB,EAAQoT,EAAMrU,GACVA,EAAIqU,EAAMxQ,OAAS,EACf5C,EAAM4C,SACNZ,EAAE,qCAAuChC,EAAQ,eAAe4R,aAAa5P,EAAEC,OAC/ED,EAAE,kCAAkC4P,aAAa5P,EAAEC,QAIvDD,EAAEC,MAAME,IAAInC,GAEhBgC,EAAEC,MAAM,GAAGsR,kBAAkB,EAAG,GAGxCH,EAAQ,GACRpR,EAAE,4BAA4BO,MAAK,WAC/B,MAAMiR,EAAUxR,EAAEC,MACduR,EAAQ7R,KAAK,KAAKiB,OAClBwQ,EAAMxL,KAAK4L,EAAQ7R,KAAK,KAAKX,QAE7BoS,EAAMxL,KAAK4L,EAAQxS,WAGvBgB,EAAEC,MAAME,OACRiR,EAAMxL,KAAK5F,EAAEC,MAAME,OACvBH,EAAE,cAAcG,IAAIiR,EAAMhL,KAAK,SAChCqL,QAAQ,SAEX,MAAMC,EAAY1R,EAAE,yCACpB,IAAK0R,EAAU9Q,OACX,OAEJ,MAAM+Q,EAAmBD,EAAU7R,KAAK,sBAAsBiB,MAAM,KAC9D8Q,EAAqBF,EAAU7R,KAAK,wBAAwBiB,MAAM,KAExEmQ,EAAcjD,GAAG,SAAS,WACtB,MAAM7N,EAAM8Q,EAAc9Q,MAC1B,IAAIjC,EAAM2T,EAAMC,EAAWC,EAAYC,EAASC,EAEhDH,EAAYC,EAAa,GACzB,MAAM5U,EAAI,eAAe+U,KAAK/R,GAC1BhD,IAEA4U,EAAa,KADbD,EAAY3U,EAAE,KAIlB,MAAMgV,EAAOC,WAAWC,oBAAoBP,GACtCQ,EAActS,EAAE,uBAoBtB,GAnBImS,GACAjU,EAAOiU,EAAKjU,KACZ2T,EAAOM,EAAKI,KACZN,EAAU/T,GAGV+T,EAAUH,EAGVQ,EAAY1R,QAAUqR,GAAW5S,GAAoBA,EAAiBuB,QAAUvB,EAAiBmD,QAAQyP,IAAY,GACrHD,EAAUM,EAAYzS,KAAK,OAC3ByS,EAAYzS,KAAK,MAAOmS,EAAQvN,QAAQ,YAAa,MAAQvG,IAC7DoU,EAAYrH,QAGZqH,EAAYpH,OAIZyG,EAAiBnP,QAAQuP,IAAe,GAxKpD,SAAsBL,GAMlB,OALInS,IACAA,EAAiBiT,aACjBjT,EAAmB,QAGnBD,IAIJA,EAAiB,IAAImT,UAAU,CAC3BC,yBAAyB,EACzBlB,QAASE,EAAU,GACnBiB,WAAW,EACXC,gBAAiB,CACbC,kBAAkB,GAEtBC,gBAAgB,EAChBC,QAAS,EACTC,cAAc,EACdC,cAAe,SAAUC,EAAWC,GAgBhC,OAfAC,YAAW,WAEPpT,EAAEE,KAAKwR,EAAU7R,KAAK,OAAQ,CACtB,MAASV,EACT,KAAQ,MACR,QAAWuS,EAAU7R,KAAK,WAC1B,KAAQqT,IAEZ,SAAUrT,GACNsT,EAAQE,UAAY,oCAAsCxT,EAAO,SACjEQ,QAAQC,IAAIN,EAAE,mBAAmB,SAG1C,GAEI,cAEXsT,QAAS,CAAC,OAAQ,SAAU,gBAAiB,IACzC,YAAa,YAAa,YAAa,iBAAkB,kBAAmB,IAC5E,OAAQ,QAAS,IACjB,iBAAkB,eAAgB,IAClC,OAAQ,QAAS,QAAS,kBAAmB,IAC7C,cAAe,UAAW,aAAc,mBAGzC,GA2HKC,CAAa7B,GACb,OAKR,IAAKnS,IA9Hb,SAAuBmS,GAMnB,OALIpS,IACAA,EAAekT,aACflT,EAAiB,QAGjBC,KAIJA,EAAmB6S,WAAWoB,aAAa9B,EAAU,GAAI,CACrD+B,aAAa,KAEAzF,GAAG,UAAU,SAAU0F,EAAIC,GACxCjC,EAAUvR,IAAIuT,EAAGE,gBAGd,GA6GuBC,CAAcnC,GACpC,OAGAxT,IACAqB,EAAiBuU,UAAU,OAAQjC,GACnCO,WAAW2B,aAAaxU,EAAkBrB,IAG1C0T,EAAmBpP,QAAQuP,IAAe,EAC1CxS,EAAiBuU,UAAU,gBAAgB,GAG3CvU,EAAiBuU,UAAU,gBAAgB,GAI/C,IAAI9V,EAAQiT,EAAc9Q,MACL,IAAjBnC,EAAM4C,SAIV5C,GADAA,EAAQA,EAAM8C,MAAM,MACN9C,EAAM4C,OAAS,GAE7BZ,EAAEmO,QAAQ8C,EAAcpR,KAAK,iBAAiB7B,GAAO,SAASgW,GACxB,QAA9BA,EAAaC,cACb1U,EAAiBuU,UAAU,kBAAkB,GAC7CvU,EAAiBuU,UAAU,YAAa,MAExCvU,EAAiBuU,UAAU,kBAAkB,GAI7CvU,EAAiBuU,UAAU,YAAa,CACpCI,IAAK,SAASR,GACV,MAAMS,EAAS9J,MAAM+J,SAASV,EAAGW,UAAU,eAAiB,GAAGjO,KAAK,KACpEsN,EAAGY,iBAAiBH,OAIhC5U,EAAiBuU,UAAU,aAAcE,EAAaO,aAAe,GACrEhV,EAAiBuU,UAAU,UAAWE,EAAaQ,WAAa,UAErE/C,QAAQ,SAIX,MAAMgD,EAAgBzU,EAAE,kBAClB0U,EAAY1U,EAAE,iBAIpByU,EAAczD,KAAK,YAAY,GAG/B0D,EAAUC,WAAW,CACjBC,QAAQ,EACRC,WARmB,aASnBC,cAAe,0CACf3J,OAAQ,WACJ,MAAM4J,EAAQ/U,EAAEC,MAAM8F,SAXP,cAYf0O,EAAczD,KAAK,YAAa+D,MAIxCN,EAAc3U,OAAM,SAAUqC,GAEK,IAA3BuP,EAAUvR,MAAMS,SAChBZ,EAAE,6BAA6BwL,MAAM,CACjCC,UAAW,WACPzL,EAAE,cAAc8J,YAErB0B,MAAM,QACTrJ,EAAMQ,qBAuBlB,SAASqS,IAEDhV,EAAE,0BAA0BY,OAAS,GACrCZ,EAAE,aAAa8K,OAAM,WACjB,MAAMC,EAAU/K,EAAE,uBACdA,EAAEC,MAAME,MAAM6K,WAAW3B,eAAiBrJ,EAAEC,MAAMJ,KAAK,QAAQmL,WAAW3B,cAC1E0B,EAAQE,OAERF,EAAQG,UA4PxB,SAASxK,IACLV,EAAE,cAAciV,UAAS,SAAU7F,GACd,IAAbA,EAAEvE,SAA8B,IAAbuE,EAAEvE,SACrB7K,EAAEC,MAAMH,WA8EpB,SAASoV,IACDlV,EAAE,wBAAwBY,OAAS,IACnCZ,EAAE0I,UAAUsF,GAAG,QAAS,mBAAmB,SAAUoB,GACjD,MAAM+F,EAAUnV,EAAEC,MACZgF,EAAQkQ,EAAQhP,SAASiP,SAAS,eAAezV,KAAK,oBAC5D0V,EAAYpQ,EAAOA,EAAMkE,OAAO,QAAUgM,EAAQxG,KAAK,MAAQ,KAAOS,EAAEkG,SAAWrQ,EAAMkE,OAAO,WAAWoM,GAAG,GAAK,MAsfvH1T,OAAO2T,aACP3T,OAAO2T,eAAeC,kBAEtB/M,SAASgN,UAAUpH,WArfnBtO,EAAE6B,QAAQmM,GAAG,cAAc,WACvB,IAAI7Q,EAAI0E,OAAOC,SAAS6T,KAAKC,MAAM,oBACnC,MAAM3Q,EAAQjF,EAAE,+BAChB,IAAI6V,EACJ,GAAI1Y,EAIA,OAHA0Y,EAAS5Q,EAAMkE,OAAO,IAAMhM,EAAE,IAC9BkY,EAAYpQ,EAAO4Q,EAAQ5Q,EAAMkE,OAAO,IAAMhM,EAAE,UAChD6C,EAAE,cAAc0K,UAAUmL,EAAOC,SAASC,IAAM,MAGpD5Y,EAAI0E,OAAOC,SAAS6T,KAAKC,MAAM,oBAE3BC,EAAS5Q,EAAMkE,OAAO,KAAOhM,EAAE,IAC/BkY,EAAYpQ,EAAO4Q,GACnB7V,EAAE,cAAc0K,UAAUmL,EAAOC,SAASC,IAAM,SAErDtE,QAAQ,eA0BnB,SAASuE,EAAUtG,GACf1P,EAAEyB,KAAK,CACHN,IAAK/B,EAAS,iBACdsC,KAAM,OACN4L,QAAS,CAAC,eAAgBnO,GAC1BU,KAAMwE,KAAK4R,UAAUvG,GACrBwG,YAAa,oCACdzG,MAAK,SAASrL,GACbvC,OAAOC,SAAS2C,QAAQL,MACzB+R,MAAK,WACJC,EAAS,MAIjB,SAASC,EAAc3G,IAmBvB,SAAoBA,GAChB,KAAM,cAAeA,GACjB,OAAO,EAEX,GAAuB,IAAnBA,EAAK4G,UACL,OAAO,EAGX,OADAF,EAAS1G,EAAK4G,YACP,GA1BHC,CAAW7G,IAGf1P,EAAEyB,KAAK,CACHN,IAAK/B,EAAS,uCACdsC,KAAM,OACN4L,QAAS,CAAC,eAAgBnO,GAC1BU,KAAMwE,KAAK4R,UAAUvG,GACrBwG,YAAa,kCACbvU,QAAS,WACLC,KAEJuU,KAAM,WACFC,EAAS,MAiBrB,SAASA,EAASI,GACd,MAAMC,EAAY,CACd,QAAWzW,EAAE,wBACb0W,EAAG1W,EAAE,gBACL2W,EAAG3W,EAAE,gBACL4W,EAAG5W,EAAE,gBACL6W,EAAG7W,EAAE,gBACL8W,EAAG9W,EAAE,iBAETyW,EAAUD,GAAWxQ,YAAY,QACjC,IAAI,MAAMtE,KAAQ+U,EACX/U,GAAQ8U,GACPC,EAAU/U,GAAMuE,SAAS,QAGjCjG,EAAE,cAAcwL,MAAM,QAgB1B,SAASuL,IACL/W,EAAEE,KAAKd,EAAS,+CAAgD,CAC5D,MAASD,EACT,KAAQa,EAAE,aAAaG,QACxBwB,SAAQ,SAASqV,GAChBhX,EAAE,aAAaqP,QAAQ,aAAarJ,YAAY,SAChDhG,EAAE,oBAAoBwL,MAAM,QACF,OAAvBwL,EAAIC,iBACHD,EAAIC,eAAiB,IAEzBC,OAAOC,SAASH,EAAII,MAAOJ,EAAIK,iBAAkBL,EAAIC,eAAgB,IAChEnR,KAAKuQ,GACLiB,OAAM,SAAUC,GAKbnB,OAJcoB,IAAXD,EAIMA,EAAOE,SAASC,KAHZ,SAKtBvB,MAAK,SAAS3S,GACK,MAAfA,EAAIG,QACH3D,EAAE,aAAaqP,QAAQ,aAAapJ,SAAS,YA6VzD,SAAS0R,EAAWhC,GACZiC,QAAQC,UACRD,QAAQC,UAAU,KAAM,KAAMlC,GAG9B7T,SAAS6T,KAAOA,EAYxB,SAASN,EAAYpQ,EAAOkQ,EAAS2C,GAEjC,GADA7S,EAAMe,YAAY,UACd8R,EAAO,CACP,IAEI1a,EAFA2a,EAAI3D,SAASe,EAAQxG,KAAK,OAAO5L,OAAO,IACxCiV,EAAI5D,SAAS0D,EAAMnJ,KAAK,OAAO5L,OAAO,IAE1C,GAAIgV,GAAKC,EAAG,CACJD,EAAIC,IACJ5a,EAAI2a,EACJA,EAAIC,EACJA,EAAI5a,GAER,MAAM6a,EAAU,GAChB,IAAK,IAAIlb,EAAIgb,EAAGhb,GAAKib,EAAGjb,IACpBkb,EAAQrS,KAAK,KAAO7I,GAIxB,OAFAkI,EAAMkE,OAAO8O,EAAQ7R,KAAK,MAAMH,SAAS,eACzC0R,EAAW,KAAOI,EAAI,KAAYC,IAI1C7C,EAAQlP,SAAS,UACjB0R,EAAW,IAAMxC,EAAQxG,KAAK,QAoBlC,SAASuJ,IACL,MAAMnY,EAAQC,EAAEC,MAChB,IAAIkJ,EAAS,GACTpJ,EAAM4O,KAAK,QACXxF,GAAU,IAAMpJ,EAAM4O,KAAK,OAG/B,MAAMwJ,EAASnY,EAAE,gBAAkBmJ,GAmBnC,OAlBAgP,EAAOxY,KAAK,SAASX,KAAKe,EAAMF,KAAK,SAErCsY,EAAO3M,MAAM,CACT4M,UAAU,EACV3M,UAAW,WACmB,QAAtB1L,EAAMF,KAAK,QAKfG,EAAEE,KAAKH,EAAMF,KAAK,OAAQ,CACtB,MAASV,EACT,GAAMY,EAAMF,KAAK,QAClB4P,MAAK,SAAS5P,GACbgC,OAAOC,SAASyF,KAAO1H,EAAKwY,YAR5BrY,EAAED,EAAMF,KAAK,SAASiK,YAW/B0B,MAAM,SACF,EAGX,SAAS8M,IACL,MAAMvY,EAAQC,EAAEC,MAChB,IAAIkJ,EAAS,GACTpJ,EAAM4O,KAAK,QACXxF,GAAU,IAAMpJ,EAAM4O,KAAK,OAG/B,MAAMwJ,EAASnY,EAAE,gBAAkBmJ,GAmBnC,OAlBAgP,EAAOxY,KAAK,SAASX,KAAKe,EAAMF,KAAK,SAErCsY,EAAO3M,MAAM,CACT4M,UAAU,EACV3M,UAAW,WACmB,QAAtB1L,EAAMF,KAAK,QAKfG,EAAEE,KAAKH,EAAMF,KAAK,OAAQ,CACtB,MAASV,EACT,GAAMY,EAAMF,KAAK,QAClB4P,MAAK,SAAS5P,GACbgC,OAAOC,SAASyF,KAAO1H,EAAKwY,YAR5BrY,EAAED,EAAMF,KAAK,SAASiK,YAW/B0B,MAAM,SACF,EAjgFc,oBAAf,WACN+M,SAASC,cAAe,GAIvBnO,MAAMoO,OACPpO,MAAMoO,KAAQ,WACV,MAAMC,EAAQjb,OAAOkB,UAAUqM,SACzB2N,EAAa,SAAUC,GACzB,MAAqB,mBAAPA,GAAwC,sBAAnBF,EAAMxb,KAAK0b,IAQ5CC,EAAiBlI,KAAKmI,IAAI,EAAG,IAAM,EACnCC,EAAW,SAAU/a,GACvB,MAAMgb,EARQ,SAAUhb,GACxB,MAAMib,EAASC,OAAOlb,GACtB,OAAImb,MAAMF,GAAkB,EACb,IAAXA,GAAiBG,SAASH,IACtBA,EAAS,EAAI,GAAK,GAAKtI,KAAKC,MAAMD,KAAK0I,IAAIJ,IADHA,EAKpCK,CAAUtb,GACtB,OAAO2S,KAAK4I,IAAI5I,KAAK6I,IAAIR,EAAK,GAAIH,IAItC,OAAO,SAAcY,GAEjB,MAAMC,EAAIzZ,KAGJsC,EAAQ9E,OAAOgc,GAGrB,GAAiB,MAAbA,EACA,MAAM,IAAIE,UAAU,oEAIxB,MAAMC,EAAQC,UAAUjZ,OAAS,EAAIiZ,UAAU,QAAK,EACpD,IAAIC,EACJ,QAAqB,IAAVF,EAAuB,CAG9B,IAAKjB,EAAWiB,GACZ,MAAM,IAAID,UAAU,qEAIpBE,UAAUjZ,OAAS,IACnBkZ,EAAID,UAAU,IAMtB,MAAMb,EAAMD,EAASxW,EAAM3B,QAKrBmZ,EAAIpB,EAAWe,GAAKjc,OAAO,IAAIic,EAAEV,IAAQ,IAAI3O,MAAM2O,GAGzD,IAEIgB,EAFAC,EAAI,EAGR,KAAOA,EAAIjB,GACPgB,EAASzX,EAAM0X,GAEXF,EAAEE,GADFL,OACoB,IAANE,EAAoBF,EAAMI,EAAQC,GAAKL,EAAM1c,KAAK4c,EAAGE,EAAQC,GAEpED,EAEXC,GAAK,EAKT,OAFAF,EAAEnZ,OAASoY,EAEJe,GAvEF,IA6EW,mBAAjBtc,OAAOyc,QAEdzc,OAAOC,eAAeD,OAAQ,SAAU,CACpCO,MAAO,SAAgBgE,EAAQmY,GAE3B,GAAc,MAAVnY,EACA,MAAM,IAAI2X,UAAU,8CAGxB,MAAMS,EAAK3c,OAAOuE,GAElB,IAAK,IAAIqY,EAAQ,EAAGA,EAAQR,UAAUjZ,OAAQyZ,IAAS,CACnD,MAAMC,EAAaT,UAAUQ,GAE7B,GAAkB,MAAdC,EACA,IAAK,MAAMC,KAAWD,EAEd7c,OAAOkB,UAAUC,eAAe1B,KAAKod,EAAYC,KACjDH,EAAGG,GAAWD,EAAWC,IAKzC,OAAOH,GAEXI,UAAU,EACVC,cAAc,IAwrCtBC,OAAO/b,UAAUgc,SAAW,SAAUC,GAClC,MAAMvd,EAAI4C,KAAKW,OAASga,EAAQha,OAChC,OAAOvD,GAAK,GAAK4C,KAAK+C,YAAY4X,KAAavd,GAInD2C,EAAE4Y,GAAGvH,kBAAoB,WACrB,MAAMhJ,EAAKrI,EAAEC,MAAMrC,IAAI,GACvB,IAAIid,EAAM,EACV,GAAI,mBAAoBxS,EACpBwS,EAAMxS,EAAGpF,oBACN,GAAI,cAAeyF,SAAU,CAChCL,EAAG4B,QACH,MAAM6Q,EAAMpS,SAASgN,UAAUqF,cACzBC,EAAYtS,SAASgN,UAAUqF,cAAc/b,KAAK4B,OACxDka,EAAIG,UAAU,aAAc5S,EAAGrK,MAAM4C,QACrCia,EAAMC,EAAI9b,KAAK4B,OAASoa,EAE5B,OAAOH,GAg0BX7a,EAAE0I,UAAUwS,OAAM,WAiDd,GAhDA/b,EAAOa,EAAE,oBAAoB2O,KAAK,WAClCvP,EAASY,EAAE,sBAAsB2O,KAAK,WAGtC3O,EAAE,eAAeO,MAAK,WAClBP,EAAEC,MAAMgG,SAAS,aAAa0I,KAAK,eAAgB3O,EAAEC,MAAM0O,KAAK,UAAUA,KAAK,iBAAkB,iBAAiBA,KAAK,QAAS,OAIpI3O,EAAE,0BAA0BsF,WAC5BtF,EAAE,kBAAkBsF,SAAS,CACzBlE,OAAQ,OACR+Z,OAAQ,WACJnb,EAAE,cAAcwP,MAAM,WAG9BxP,EAAE,sBAAsBsF,SAAS,CAC7B8V,WAAY,aAEhBpb,EAAE,oBAAoBsF,SAAS,CAC3B+V,UAAW,WAEfrb,EAAE,iBAAiBsb,YACnBtb,EAAE,gBAAgBub,WAClBvb,EAAE,gBAAgBwb,SAAS,CACvBC,cAAc,IAElBzb,EAAE,cAAcwP,QAChBxP,EAAE,wBAAwBwP,MAAM,CAC5B2L,OAAQ,WACJ,GAAInb,EAAE,8BAA8B+F,SAAS,WACzC,OAAO,KAInB/F,EAAE,uBAAuBJ,MACzBI,EAAE,uBAAuBJ,MAEzBI,EAAE,kBAAkBF,OAAM,WACtBE,EAAEA,EAAEC,MAAMJ,KAAK,WAAW6b,YAAY,QAI1C1b,EAAE,iBAAiBF,OAAM,WACrB+B,OAAOC,SAAW9B,EAAEC,MAAMJ,KAAK,WAIhB,oBAARW,KAAqB,CAC5B,MAAMmb,EAAQ,GAAGC,MAAM1e,KAAKwL,SAASmT,iBAAiB,aAAe,IACrE,IAAK,IAAI9e,EAAI,EAAGA,EAAI4e,EAAM/a,OAAQ7D,IAC9ByD,KAAKC,eAAekb,EAAM5e,IAKlC,MAAMmQ,EAAYlN,EAAE,aACpB,GAAIkN,EAAUtM,OAAS,EAAG,CACtB,MAAMwM,EAAe,GAErB,IAAImL,SAAS,YAAa,CACtBpX,IAAK+L,EAAUrN,KAAK,cACpByN,QAAS,CAAC,eAAgBnO,GAC1BoO,SAAUL,EAAUrN,KAAK,YACzB2N,YAAaN,EAAUrN,KAAK,YAC5B4N,cAA8C,QAA9BP,EAAUrN,KAAK,WAAwB,KAAOqN,EAAUrN,KAAK,WAC7E6N,gBAAgB,EAChBC,mBAAoBT,EAAUrN,KAAK,mBACnC+N,oBAAqBV,EAAUrN,KAAK,sBACpCgO,eAAgBX,EAAUrN,KAAK,gBAC/BiO,eAAgBZ,EAAUrN,KAAK,eAC/BkO,KAAM,WACF9N,KAAK+N,GAAG,WAAW,SAAUzK,EAAM1D,GAC/BuN,EAAa7J,EAAKjG,MAAQuC,EAAK8E,KAC/B,MAAMC,EAAQ5E,EAAE,cAAgBH,EAAK8E,KAAO,iCAAiCxE,IAAIN,EAAK8E,MACtF3E,EAAE,UAAUiE,OAAOW,MAEvB3E,KAAK+N,GAAG,eAAe,SAAUzK,GACzBA,EAAKjG,QAAQ8P,GACbpN,EAAE,IAAMoN,EAAa7J,EAAKjG,OAAO4K,SAEjCgF,EAAUrN,KAAK,eAAiBqN,EAAUrN,KAAK,SAC/CG,EAAEE,KAAKgN,EAAUrN,KAAK,cAAe,CACjC0D,KAAM6J,EAAa7J,EAAKjG,MACxB4Q,MAAOhB,EAAUrN,KAAK,gBAS9CQ,QAAQyb,UAAU,CACdC,QAAS3c,EAAS,iCAClB4c,kBAAkB,IAEtB,MAAMlM,EAAWpH,SAASuT,uBAAuB,aACjD,IAAK,IAAIlf,EAAI,EAAGA,EAAI+S,EAASlP,OAAQ7D,IAAK,CACtCsD,QAAQC,IAAIwP,EAAS/S,IACrB,IAAK,IAAImN,EAAI,EAAGA,EAAI4F,EAAS/S,GAAGmf,WAAWtb,OAAQsJ,IACJ,MAAvC4F,EAAS/S,GAAGmf,WAAWhS,GAAGiS,UAC1B9b,QAAQC,IAAIwP,EAAS/S,GAAGmf,WAAWhS,IAM/C,MAAMkS,EAAY,IAAIC,UAAU,cAwIhC,GAvIAD,EAAUpO,GAAG,WAAW,SAAUoB,GAC9BA,EAAEkN,iBAEFtc,EAAE,IAAMoP,EAAEqC,QAAQhJ,aAAa,OAAO+G,MAAM,WAC5CJ,EAAEqC,QAAQ8K,aAAa,eAAgBnN,EAAEqC,QAAQhJ,aAAa,iBAC9DzI,EAAE,IAAMoP,EAAEqC,QAAQhJ,aAAa,OAAO+G,MAAM,QAC5CJ,EAAEqC,QAAQ8K,aAAa,eAAgBnN,EAAEqC,QAAQhJ,aAAa,qBAGlE2T,EAAUpO,GAAG,SAAS,SAAUoB,GAC5BpP,EAAE,IAAMoP,EAAEqC,QAAQhJ,aAAa,OAAO+G,MAAM,WAC5CJ,EAAEqC,QAAQ8K,aAAa,eAAgBnN,EAAEqC,QAAQhJ,aAAa,eAC9DzI,EAAE,IAAMoP,EAAEqC,QAAQhJ,aAAa,OAAO+G,MAAM,QAC5CJ,EAAEqC,QAAQ8K,aAAa,eAAgBnN,EAAEqC,QAAQhJ,aAAa,qBAIlEzI,EAAE,kBAAkBF,MAAMoY,GAC1BlY,EAAE,mBAAmBF,MAAMwY,GAE3BtY,EAAE,yBAAyBF,MAAMoY,GAEjClY,EAAE,gBAAgBF,OAAM,WACpB,MAAMC,EAAQC,EAAEC,MAChBD,EAAEE,KAAKH,EAAMF,KAAK,OAAQ,CACtB,MAASV,EACT,GAAMY,EAAMF,KAAK,QAClB4P,MAAK,SAAS5P,GACbgC,OAAOC,SAASyF,KAAO1H,EAAKwY,eAGpCrY,EAAE,sBAAsBF,OAAM,WAC1BE,EAAEA,EAAEC,MAAMJ,KAAK,UAAUoL,UAE7BjL,EAAE,sBAAsBF,OAAM,WAC1BE,EAAEA,EAAEC,MAAMJ,KAAK,UAAU2L,MAAM,WAEnCxL,EAAE,uBAAuBF,OAAM,WAC3B,MAAMC,EAAQC,EAAEC,MAChBD,EAAEE,KAAKH,EAAMF,KAAK,eAAgB,CAC9B,MAASV,IACVsQ,MAAK,WACJ5N,OAAOC,SAASyF,KAAOxH,EAAMF,KAAK,kBAK1CG,EAAE,aAAaO,MAAK,WAChB,MAAM+M,EAAU,GAChBtN,EAAEC,MAAMN,KAAK,0BAA0BY,MAAK,WACxC,IAAIic,EAAOxc,EAAEC,MACb,MAAME,EAAMsc,mBAAmBD,EAAKxd,OAAOqK,cAAc5E,QAAQ,sCAAuC,IAAIA,QAAQ,OAAQ,MAC5H,IAAInH,EAAO6C,EACPmN,EAAQnN,GAAO,IACf7C,EAAO6C,EAAM,IAAMmN,EAAQnN,IAEXqX,MAAhBlK,EAAQnN,GACRmN,EAAQnN,GAAO,EAEfmN,EAAQnN,IAAQ,GAEpBqc,EAAOA,EAAKE,KAAK,YAAcpf,EAAO,kCACjC2G,OAAO,4BAA8B3G,EAAO,0DAIzD0C,EAAE,mBAAmBF,OAAM,WACJE,EAAE,mBAAmB2c,SAAS,iBAAiB/b,OACjD,GACbZ,EAAE,kBAAkBiG,SAAS,QAC7BjG,EAAE,kBAAkBgG,YAAY,UAEhChG,EAAE,kBAAkBgG,YAAY,QAChChG,EAAE,kBAAkBiG,SAAS,YAIrCjG,EAAE,iBAAiBF,OAAM,WACrB,IAAIsB,EAASnB,KAAK2c,QAAQxb,OACtBE,EAAYrB,KAAK2c,QAAQtb,UAC7B,MAAMub,EAAW7c,EAAE,mBAAmB2c,SAAS,iBAAiB9N,KAAI,WAChE,OAAO5O,KAAK2c,QAAQE,WACrBlf,MAAMwI,OACHjF,EAAMlB,KAAK2c,QAAQzb,IACP,MAAdG,GAAwC,cAAnBH,EAAI4B,QAAQ,KACjCzB,EAAY,GACZF,EAAS,SAEbF,EAAiBC,EAAKC,EAAQyb,EAAUvb,GAAWwE,MAAK,WAErC,UAAX1E,GAAiC,SAAXA,GAEtBpB,EAAE,0CAA0CO,MAAK,SAASwc,EAAE3N,GAAIA,EAAEhE,SAAU,KAEhFxJ,UAMR5B,EAAE,kDAAkDgd,QAAQzc,MAAK,SAASwc,EAAE3N,GACxEA,EAAEhE,SAAU,EACZpL,EAAEoP,GAAGtP,WAGTY,IAzfuBV,EAAE,oBACVid,OAAO,CAClBC,cAAe,EACfC,YAAa,CACThc,IAAK/B,EAAS,iCACdge,WAAY,SAASC,GACjB,MAAM9a,EAAQ,GAYd,OAXAvC,EAAEO,KAAK8c,EAASxd,MAAM,SAAUyd,EAAIlU,GAChC,IAAIoD,EAAQpD,EAAKmU,MACbnU,EAAKoU,WAAapU,EAAKoU,UAAU5c,OAAS,IAC1C4L,GAAS,KAAOzN,EAAWqK,EAAKoU,WAAa,KAEjDjb,EAAMqD,KAAK,CACP4G,MAAOA,EACPiR,MAAOrU,EAAKsU,gBAIb,CAAEC,QAASpb,KAG1Bqb,aAAc,CAAC,QAAS,aACxBrU,eAAe,IAIvB,WACI,MAAMsU,EAAiB7d,EAAE,oBACzB6d,EAAeZ,OAAO,CAClBC,cAAe,EACfC,YAAa,CACThc,IAAK/B,EAAS,gBAAkBye,EAAehe,KAAK,OAAS,0BAC7DyN,QAAS,CAAC,eAAgBnO,GAC1Bie,WAAY,SAASC,GACjB,MAAM9a,EAAQ,GAQd,OAPAvC,EAAEO,KAAK8c,EAASxd,MAAM,SAAUyd,EAAIlU,GAChC,MAAMoD,EAAQpD,EAAK9L,KAAO,KAAO8L,EAAK0U,WAAa,WACnDvb,EAAMqD,KAAK,CACP4G,MAAOA,OAIR,CAAEmR,QAASpb,KAG1Bqb,aAAc,CAAC,OAAQ,eACvBrU,eAAe,IA6cnBwU,GAzcJ,WACI,MAAMC,EAAiBhe,EAAE,oBACzBge,EAAef,OAAO,CAClBC,cAAe,EACfC,YAAa,CACThc,IAAK/B,EAAS,sCAAwC4e,EAAene,KAAK,OAC1Eud,WAAY,SAASC,GACjB,MAAM9a,EAAQ,GAQd,OAPAvC,EAAEO,KAAK8c,EAASxd,MAAM,SAAUyd,EAAIlU,GAChC7G,EAAMqD,KAAK,CACP4G,MAAOpD,EAAKoU,UAAU1c,MAAM,KAAK,GACjCmd,YAAa7U,EAAKoU,eAInB,CAAEG,QAASpb,KAG1Bqb,aAAc,CAAC,aACfrU,eAAe,IAubnB2U,GAEArZ,IA/vD4B,GAAxB7E,EAAE,YAAYY,SAIO,IAArBZ,EAAE,YAAYG,QACdH,EAAE,YAAYG,IAAI,kBAClBH,EAAE,YAAYG,IAAI,SAClBH,EAAE,YAAYG,IAAI,UAItBH,EAAE,YAAYmL,QAAO,WACjB,MAGMgT,EAASne,EAAEC,MAAME,MACvB,GAAe,YAAXge,EASA,OARAne,EAAE,iBAAiBkL,OACnBlL,EAAE,mBAAmBkL,OACrBlL,EAAE,mBAAmBkL,OACrBlL,EAAE,oBAAoBiL,YAEP,YAAXkT,GATY,mBASYne,EAAE,YAAYG,OACtCH,EAAE,YAAYG,IAXA,kBAgBtB,MAAMie,EAAa,CACf,MAAS,iBACT,WAAc,iBACd,MAAS,kBAGbpe,EAAE,oBAAoBkL,OACtBlL,EAAE,iBAAiBiL,OAEnBjL,EAAE,mBAAmBuM,OAAkB,eAAX4R,GAC5Bne,EAAE,mBAAmBuM,OAAkB,UAAX4R,GAC5Bne,EAAEO,KAAK6d,GAAY,SAASC,EAAOC,GAC/B,GAAIte,EAAE,YAAYG,OAASme,EAEvB,OADAte,EAAE,YAAYG,IAAIie,EAAWD,KACtB,QAMnBne,EAAE,uBAAuBmL,QAAO,WACxBnL,EAAEC,MAAMse,GAAG,cACXve,EAAE,qBAAqBub,SAAS,SAChCvb,EAAE,4BAA4Bub,SAAS,eAG/Cvb,EAAE,2BAA2BmL,QAAO,WAC5BnL,EAAEC,MAAMse,GAAG,YACXve,EAAE,4BAA4Bub,SAAS,WAEvCvb,EAAE,iBAAiBub,SAAS,cAGpCvb,EAAE,kCAAkCmL,QAAO,WACnCnL,EAAEC,MAAMse,GAAG,cACXve,EAAE,qBAAqBub,SAAS,WAChCvb,EAAE,iBAAiBub,SAAS,eAGpCvb,EAAE,+BAA+BmL,QAAO,WAChCnL,EAAEC,MAAMse,GAAG,YACNve,EAAE,+BAA+Bue,GAAG,aACrCve,EAAE,yBAAyBub,SAAS,SAGxCvb,EAAE,yBAAyBub,SAAS,cAG5Cvb,EAAE,+BAA+BmL,QAAO,WAChCnL,EAAEC,MAAMse,GAAG,aACXve,EAAE,mBAAmBub,SAAS,WAC9Bvb,EAAE,yBAAyBub,SAAS,YAEpCvb,EAAE,yBAAyBub,SAAS,YAG5Cvb,EAAE,yBAAyBmL,QAAO,WAC1BnL,EAAEC,MAAMse,GAAG,aACXve,EAAE,yBAAyBub,SAAS,eA2qD5CzU,IA5wCJ,WACI,MAAM0X,EAAmB,WACrB,MAAMC,EAAeze,EAAE,kBAAkBG,MACnCue,EAAY1e,EAAE,eAAeG,OAC9BH,EAAE,WAAWue,GAAG,aAA8B/G,MAAdiH,GAA2BA,EAAa7d,OAAS,GACvE4W,MAAXkH,IAAyBA,EAAUC,WAAW,uBAAyBD,EAAUC,WAAW,sBAC5F3e,EAAE,kBAAkBiL,OAEpBjL,EAAE,kBAAkBkL,QAI5BsT,IAEAxe,EAAE,eAAegO,GAAG,QAASwQ,GAC7Bxe,EAAE,kBAAkBgO,GAAG,QAASwQ,GAChCxe,EAAE,WAAWgO,GAAG,SAAUwQ,GA6vC1BI,GA7nCJ,WACI,MAAMlN,EAAY1R,EAAE,uCACpB,GAAI0R,EAAU9Q,OAAS,EAAG,CACtB,MAAMie,EAAY,IAAIpM,UAAU,CAC5BC,yBAAyB,EACzBlB,QAASE,EAAU,GACnBiB,WAAW,EACXM,cAAe,SAAUC,EAAWC,GAgBhC,OAfAC,YAAW,WAEPpT,EAAEE,KAAKwR,EAAU7R,KAAK,OAAQ,CACtB,MAASV,EACT,KAAQ,MACR,QAAWuS,EAAU7R,KAAK,WAC1B,KAAQqT,IAEZ,SAAUrT,GACNsT,EAAQE,UAAY,oCAAsCxT,EAAO,SACjEQ,QAAQC,IAAIN,EAAE,mBAAmB,SAG1C,GAEI,cAEX4S,gBAAiB,CACbC,kBAAkB,GAEtBC,gBAAgB,EAChBC,QAAS,EACTC,cAAc,EACdM,QAAS,CAAC,OAAQ,SAAU,gBAAiB,IACzC,YAAa,YAAa,YAAa,iBAAkB,kBAAmB,IAC5E,CACIhW,KAAM,cACN8D,OAAQ,SAASgO,GACb,MAAMsE,EAAKtE,EAAE0P,WACPpJ,EAAYhC,EAAG8B,eAErB,GADA9B,EAAGY,iBAAiB,IAAMoB,EAAY,MACjCA,EAAW,CACZ,MAAMqJ,EAAYrL,EAAGsL,YACrBtL,EAAGuL,UAAUF,EAAUG,KAAMH,EAAUI,GAAK,GAEhDzL,EAAGzJ,SAEPmV,UAAW,oBACX5S,MAAO,mBACT,OAAQ,QAAS,IAAK,CACpBlP,KAAM,iBACN8D,OAAQ,SAASgO,GACb,MAAMsE,EAAKtE,EAAE0P,WACbpL,EAAGY,iBAAiB,WAAaZ,EAAG8B,gBACpC9B,EAAGzJ,SAEPmV,UAAW,iBACX5S,MAAO,wBAEX,CACIlP,KAAM,mBACN8D,OAAQ,SAASgO,GACb,MAAMsE,EAAKtE,EAAE0P,WACbpL,EAAGY,iBAAiB,WAAaZ,EAAG8B,gBACpC9B,EAAGzJ,SAEPmV,UAAW,uBACX5S,MAAO,0BACR,IACH,iBAAkB,eAAgB,IAClC,OAAQ,QAAS,QAAS,kBAAmB,IAC7C,cAAe,UAAW,gBAElCxM,EAAE6e,EAAUC,WAAWO,iBAAiBpZ,SAAS,oBAujCrDqZ,GACA3e,IACAoQ,IAjyBiC,GAA7B/Q,EAAE,iBAAiBY,QAKnBZ,EAAE,kCAAkCY,OAAS,GAC7CZ,EAAE,aAAa8K,OAAM,WACjB,MAAMC,EAAU/K,EAAE,2BACdA,EAAEC,MAAME,MAAM6K,WAAW3B,eAAiBrJ,EAAEC,MAAMJ,KAAK,YAAYmL,WAAW3B,cAC9E0B,EAAQE,OAERF,EAAQG,UAoBxB,WACI,GAAgC,GAA5BlL,EAAE,gBAAgBY,OAClB,OAGJZ,EAAE,0BAA0BmL,QAAO,WAC3BnL,EAAEC,MAAMse,GAAG,aACXve,EAAE,kBAAkBiL,UAG5BjL,EAAE,8BAA8BmL,QAAO,WAC/BnL,EAAEC,MAAMse,GAAG,aACXve,EAAE,kBAAkBkL,UAI5B,MAAMqU,EAAoB,WACtB,MAAMxW,EAAsC,SAA5B/I,EAAE,gBAAgBG,MAClCH,EAAE,iBAAiBmG,SAASA,SAAS4C,EAAU,OAAS,WAE5DwW,IACAvf,EAAE,gBAAgBmL,QAAO,WACrBoU,OAIJvf,EAAE,kBAAkBF,OAAM,WACtB,MAAMC,EAAQC,EAAEC,MAChBF,EAAMkG,SAAS,oBACfjG,EAAEE,KAAKH,EAAMF,KAAK,QAAS,CACvB,MAASV,IACVsQ,KACC2D,YAAW,WACPvR,OAAOC,SAASyF,KAAOxH,EAAMF,KAAK,cACnC,SAkuBX2f,GA7tBJ,WACI,GAA0B,GAAtBxf,EAAE,UAAUY,OAAhB,CAmJA,IA9IIZ,EAAE,mBAAmBY,OAAS,GAC9BZ,EAAE,oBAAoBY,OAAS,IAC/BZ,EAAE,eAAemL,QAAO,WACiB,KAAjCnL,EAAEC,MAAME,MAAMkD,UAAU,EAAG,IAC3BrD,EAAE,eAAeyf,WAAW,YAC5Bzf,EAAE,cAAckL,OAChBlL,EAAE,UAAUiL,OACZjL,EAAE,cAAciK,QAEgB,YAA5BjK,EAAEC,MAAMJ,KAAK,aACbG,EAAE,aAAa2O,KAAK,WAAY,cAIpC3O,EAAE,eAAe2O,KAAK,WAAY,YAClC3O,EAAE,cAAciL,OAChBjL,EAAE,UAAUkL,OACZlL,EAAE,eAAeiK,QAEjBjK,EAAE,aAAayf,WAAW,gBA4ElCzf,EAAE,6BAA6BY,OAAS,IACxCZ,EAAE,cAAcmL,QAAO,WACnBnL,EAAE,mEAAmEkL,OAErElL,EAAE,kLAAkLyf,WAAW,YAC/Lzf,EAAE,mBAAmBgG,YAAY,YAEjC,MAAM0Z,EAAW1f,EAAEC,MAAME,MACzB,OAAQuf,GACJ,IAAK,IACD1f,EAAE,SAASiL,OACXjL,EAAE,+DAA+D2O,KAAK,WAAY,YAClF3O,EAAE,mBAAmBiG,SAAS,YAC9B,MACJ,IAAK,IACDjG,EAAE,SAASiL,OACXjL,EAAE,YAAYiL,OACdjL,EAAE,sCAAsC2O,KAAK,WAAY,YACzD,MACJ,IAAK,IACD3O,EAAE,QAAQiL,OACVjL,EAAE,cAAc2O,KAAK,WAAY,YACjC,MACJ,IAAK,IACD3O,EAAE,UAAUiL,OACZjL,EAAE,wCAAwC2O,KAAK,WAAY,YAC3D,MACJ,IAAK,IACD3O,EAAE,WAAWiL,OACbjL,EAAE,2HAA2H2O,KAAK,WAAY,YAC9IgR,IAGQ,KAAZD,GAA+B,KAAZA,GACnBE,IAEY,KAAZF,GACAG,OAGR7f,EAAE,cAAcmL,SAChBnL,EAAE,sBAAsBmL,OAAOyU,GAC/B5f,EAAE,qBAAqBmL,OAAO0U,GAC9B7f,EAAE,oBAAoBmL,OAAOwU,GAC7B3f,EAAE,0BAA0BmL,OAAO2U,IAGnC9f,EAAE,8BAA8BY,OAAS,EAAG,CAC5C,MAAM8e,EAAW1f,EAAE,cAAcG,MACjB,KAAZuf,GAA+B,KAAZA,GACnB1f,EAAE,sBAAsBmL,OAAOyU,GACf,KAAZF,GACA1f,EAAE,qBAAqBmL,OAAO0U,IAEf,KAAZH,IACP1f,EAAE,oBAAoBmL,OAAOwU,GAC7B3f,EAAE,0BAA0BmL,OAAO2U,GACnCH,KAKR,GAAI3f,EAAE,iBAAkB,CACpB,MAAM+f,EAAe/f,EAAE,iBAGvBA,EAAE,gBAAgBF,OAAM,WAGpB,OAFAigB,EAAapgB,KAAK,cAAcX,KAAKgB,EAAEC,MAAMJ,KAAK,YAClDkgB,EAAavU,MAAM,SACZ,KAIX,MAAMwU,EAAchgB,EAAE,8BACtBA,EAAE,kBAAkBF,OAAM,WACtB,OAAQE,EAAEC,MAAMJ,KAAK,WACjB,IAAK,aACDmgB,EAAYzE,SAAS,SACrB,MACJ,IAAK,eACDyE,EAAYzE,SAAS,WACrB,MACJ,IAAK,UACDyE,EAAYzE,SAAS,cAIjCvb,EAAE,qBAAqBF,OAAM,WACzB,MAAMC,EAAQC,EAAEC,MAChBF,EAAMkG,SAAS,oBACf,MAAMga,EAAM,GACZD,EAAYzf,MAAK,WACTP,EAAEC,MAAMsb,SAAS,eACjB0E,EAAIra,KAAK5F,EAAEC,MAAMJ,KAAK,UAG9BG,EAAEE,KAAKH,EAAMF,KAAK,QAAS,CACvB,MAASV,EACT,IAAO8gB,IACRxQ,MAAK,WACJ5N,OAAOC,SAASyF,KAAOxH,EAAMF,KAAK,mBA3K9C,SAAS+f,IACD5f,EAAE,sBAAsBG,MAAQ,EAChCH,EAAE,YAAYiL,OAEdjL,EAAE,YAAYkL,OAItB,SAAS2U,IACD7f,EAAE,qBAAqBgR,KAAK,WAC5BhR,EAAE,qBAAqBiL,OAClBtL,KAAK,SAASgP,KAAK,WAAY,YAEpC3O,EAAE,qBAAqBkL,OAClBvL,KAAK,SAAS8f,WAAW,YAItC,SAASE,IAKL,OAJA3f,EAAE,+DAA+DkL,OACjElL,EAAE,uDAAuDyf,WAAW,YAEnDzf,EAAE,oBAAoBG,OAEnC,IAAK,SACL,IAAK,SACL,IAAK,QACDH,EAAE,0BAA0BiL,OAC5B,MACJ,IAAK,gBACDjL,EAAE,6CAA6C2O,KAAK,WAAY,YAChE3O,EAAE,uCAAuCiL,OAGjD6U,IAGJ,SAASA,IACL,MAAMI,EAAWlgB,EAAE,oBAAoBG,MAIvC,GAHAH,EAAE,gCAAgCkL,OAClClL,EAAE,gDAAgDyf,WAAW,YAEzDzf,EAAE,0BAA0Bue,GAAG,YAa/B,OAZKve,EAAE,qBAAqBG,OACxBH,EAAE,qBAAqBG,IAAIH,EAAE,IAAMkgB,EAAW,cAAc/f,OAE3DH,EAAE,oBAAoBG,OACvBH,EAAE,oBAAoBG,IAAIH,EAAE,IAAMkgB,EAAW,aAAa/f,OAEzDH,EAAE,uBAAuBG,OAC1BH,EAAE,uBAAuBG,IAAIH,EAAE,IAAMkgB,EAAW,gBAAgB/f,OAE/DH,EAAE,qBAAqBG,OACxBH,EAAE,qBAAqBG,IAAIH,EAAE,IAAMkgB,EAAW,cAAc/f,OAExD+f,GACJ,IAAK,SACDlgB,EAAE,uGAAuG2O,KAAK,WAAY,YAC1H3O,EAAE,+EAA+EiL,OACjF,MACJ,IAAK,QACL,IAAK,SACDjL,EAAE,8EAA8E2O,KAAK,WAAY,YACjG3O,EAAE,4DAA4DiL,OAC9DjL,EAAE,qBAAqBG,IAAI,MAgoB3CggB,GACAjL,IAoVJ,WACI,MAAM7M,EAAKK,SAAS0X,eAAe,OACnC,IAAK/X,EACD,OA7KJF,IAAIkY,UAAU,cAAe,CACzBjY,WAHkB,CAAC,KAAM,KAKzBkY,MAAO,CACHC,YAAa,CACT7e,KAAMwX,OACNsH,QAAS,IAEbphB,OAAQ,CACJsC,KAAMgZ,OACN+F,UAAU,GAEdC,IAAK,CACDhf,KAAMwX,OACNuH,UAAU,GAEdE,cAAe,CACXjf,KAAM2I,MACNmW,QAAS,IAEbI,eAAgB,CACZlf,KAAMmf,QACNL,SAAS,GAEbM,sBAAuB,CACnBpf,KAAMmf,QACNL,SAAS,GAEbO,wBAAyB,CACrBrf,KAAMwX,OACNsH,QAAS,GAEbQ,cAAe,CACXtf,KAAMgZ,OACN8F,QAAS,KAIjB3gB,KAAM,WACF,MAAO,CACHD,IAAK,QACLqhB,MAAO,GACPC,gBAAiB,EACjBC,YAAa,UACbC,YAAa,GACbC,WAAW,EACXC,UAAW,CACP,IAAO,CACHC,MAAO,EACPC,WAAY,IAEhB,MAAS,CACLD,MAAO,EACPC,WAAY,QAEhB,QAAW,CACPD,MAAO,EACPC,WAAY,UAEhB,QAAW,CACPD,MAAO,EACPC,WAAY,UAEhB,cAAiB,CACbD,MAAO,EACPC,WAAY,oBAM5BvY,SAAU,CACNwY,kBAAmB,WACf,OAAOxhB,KAAKghB,MAAMrgB,OAAS,GAAKX,KAAKghB,MAAMrgB,OAASX,KAAKqhB,UAAUrhB,KAAKkhB,aAAaI,OAEzFG,UAAW,WACP,OAAOzhB,KAAKb,OAAS,oDAAsDa,KAAKygB,IAAM,MAAQzgB,KAAKmhB,YAC9E,UAAYnhB,KAAKsgB,YAAc,SAAWtgB,KAAKqhB,UAAUrhB,KAAKkhB,aAAaK,YACrD,QAArBvhB,KAAKkhB,YAAwB,eAAiB,KAExEQ,cAAe,WACX,OAAO1hB,KAAKqhB,UAAUrhB,KAAKkhB,aAAaI,QAIhDK,QAAS,WACL3hB,KAAK4hB,YAAY5hB,KAAKkhB,cAS1B3X,QAAS,CACLsY,UAAW,SAAS7jB,GAChBgC,KAAKL,IAAM3B,GAGf8jB,kBAAmB,SAAS5Y,GACxBlJ,KAAKkhB,YAAchY,EACnBlJ,KAAKghB,MAAQ,GACbhhB,KAAKqhB,UAAUnY,GAAQoY,MAAQ,EAC/BthB,KAAK4hB,YAAY1Y,IAGrB6Y,SAAU,SAASC,EAAM9Y,GACrB,OAAQA,GACJ,IAAK,UACD,OAAO8Y,EAAKC,MAAMxR,IAAMzQ,KAAKygB,MAAQuB,EAAKE,SAAWF,EAAKG,KAC9D,IAAK,QACD,OAAOH,EAAKC,MAAMxR,IAAMzQ,KAAKygB,MAAQuB,EAAKE,QAAUF,EAAKG,KAC7D,IAAK,UACD,OAAOH,EAAKE,OAChB,IAAK,gBACD,OAAOF,EAAKC,MAAMxR,IAAMzQ,KAAKygB,MAAQuB,EAAKE,OAC9C,QACI,OAAO,IAInBN,YAAa,SAASV,GAClB,MAAMkB,EAAOpiB,KAEbA,KAAKohB,WAAY,EAEjB,MAAMiB,EAAeriB,KAAKqhB,UAAUH,GAAaK,WAC3Ce,EAActiB,KAAKyhB,UACnBc,EAAgBviB,KAAKmhB,YAE3BphB,EAAEmO,QAAQoU,GAAa,SAASE,EAAQC,EAAaC,GACjD,GAAIJ,GAAeF,EAAKX,UAAW,CAC/BW,EAAKpB,MAAQwB,EAAO5iB,KACpB,MAAM0hB,EAAQoB,EAAQC,kBAAkB,iBAClB,KAAlBJ,GAAyC,KAAjBF,IACxBD,EAAKnB,gBAAkBK,GAE3Bc,EAAKf,UAAUH,GAAaI,MAAQA,MAEzCsB,QAAO,WACFN,GAAeF,EAAKX,YACpBW,EAAKhB,WAAY,OAK7ByB,UAAW,SAASb,GAChB,OAAIA,EAAKG,KACE,8BACAH,EAAKE,OACL,6BACAF,EAAKc,QACL,uBAEA,2BAuBvB,IAAI5a,IAAI,CACJC,WAAY,CAAC,KAAM,KACnBC,GAAIA,EAEJxI,KAAM,CACF0gB,YAAa7X,SAASsa,cAAc,4BAA4BlU,QAChE1P,OAAQsJ,SAASsa,cAAc,sBAAsBlU,QACrD4R,IAAKhY,SAASsa,cAAc,2BAA2BlU,WAlW/DmU,GA/oCAjjB,EAAE,iDAAiDmL,QAAO,WAE1C,UADAnL,EAAE,iCAAkC,0BAA0BG,MAEtEH,EAAE,sCAAsCkL,OAExClL,EAAE,sCAAsCiL,UAs9ChDjL,EAAE,oBAAoB4K,SAAQ,SAASwE,KAC7BA,EAAE8T,UAAY9T,EAAE+T,QAAW/T,EAAEgU,UAA0B,IAAbhU,EAAEvE,SAA8B,IAAbuE,EAAEvE,SACjE7K,EAAEC,MAAMoP,QAAQ,QAAQvF,YA2UpC,WACI,MAAMgF,EAAU9O,EAAE,WACZuM,EAASvM,EAAE,yBACjB,IAAIqjB,GAAa,EACjB9W,EAAOzM,OAAM,YACTujB,GAAcA,IAEVvU,EAAQ7I,SAAS,SACjBsG,EAAOtG,SAAS,YAGhB6I,EAAQ9I,YAAY,SACpBuG,EAAOvG,YAAY,cAlqB3Bsd,GAuqBJ,WACI,MAAMC,EAASvjB,EAAE,iBACXwjB,EAAUxjB,EAAE,eACZyjB,EAAUzjB,EAAE,gBACZ0jB,EAAU1jB,EAAE,eACZ2jB,EAAgB3jB,EAAE,yBAClB4jB,EAAY5jB,EAAE,uBACd6jB,EAON,WACI,MAAMC,EAAa9jB,EAAE,4BACjB+jB,EAAU,CACNC,YAAaF,EAAWnH,SAAS,iBAAiB3d,OAClDilB,aAAcH,EAAWnH,SAAS,kBAAkB3d,QAG5D,OADA8kB,EAAW5b,SACJ6b,EAdUG,GAErBX,EAAOzjB,OAAM,WACT2jB,EAAQvY,OACRsY,EAAQ5c,IAAI,UAAW,OAa3B8c,EAAQ5jB,OAAM,WACV,MAAMqkB,EAASnkB,EAAE,sBAAsBG,MAEvCH,EAAEE,KAAKwjB,EAAQ7jB,KAAK,QAAS,CACzB,MAASV,EACT,OAAUglB,IACX,SAASC,EAAO1B,EAAalf,GAC5B,GAAgC,OAA5BA,EAAI6gB,aAAa1gB,OAAiB,CAElC,GADA8f,EAAQ9G,SAAS,UAAUzU,SACvBic,EAAOvjB,OAAQ,CACf,MAAM0jB,EAAaH,EAAOrjB,MAAM,KAE1BwQ,EAAOmS,EAAQ9G,SAAS,KAAKrL,OACnC,IAAK,IAAIvU,EAAE,EAAGA,EAAIunB,EAAW1jB,OAAQ7D,IACjCiD,EAAE,6DAA6DskB,EAAWvnB,GAAG,UAAU6S,aAAa0B,GAG5GkS,EAAQ5c,IAAI,UAAW,QACvB6c,EAAQxY,WAEbkL,MAAK,SAAS3S,GACb,GAAmB,MAAfA,EAAIG,OACJ,GAAIH,EAAI6gB,aAAaE,cAAc3jB,OAAS,EAAG,CAC3CijB,EAAaI,aAAezgB,EAAI6gB,aAAa7c,QAE7C,MAAM+c,EAAgB/gB,EAAI6gB,aAAaE,cACnCC,EAAcb,EAAchH,SAAS,cAEzCwH,EAAOrjB,MAAM,KAAK2E,SAAQ,SAASzH,EAAOqc,GACtC,IAAK,IAAItd,EAAE,EAAGA,EAAIwnB,EAAc3jB,OAAQ7D,IAChCwnB,EAAcxnB,KAAOiB,GACrBwmB,EAAYjP,GAAG8E,GAAOrU,YAAY,SAASC,SAAS,eAKhE4d,EAAaG,YAAcxgB,EAAI6gB,aAAa7c,WAGrDqb,QAAO,WACNe,EAAUa,KAAK,uBAIvBd,EAAcre,SAAS,CACnBof,gBAAgB,EAChBC,gBAAgB,EAChBC,OAAQ,CAAEtnB,KAAM,cAAeU,MAAO,cACtC6mB,gBAAgB,EAChBnf,MAAO,CACH0V,WAAa,kBACb0J,SAAa,IACbC,WAAa,EACbC,MAAO,EACPC,OAAO,GAEX7F,UAAW,CACP1Z,MAAO,kBAEXyX,YAAa,CACThc,IAAK/B,EAAS,kCACd8lB,SAAU,IACVC,OAAO,EACP/H,WAAY,SAAShZ,GACjB,MAAMghB,EAAoB,CACtBzjB,SAAS,EACTgc,QAAS,IAMP0H,EAAkBplB,KAAKqlB,QAAQD,MAAME,OAH3B9gB,QAAQ,aAAc,IAItC,IAAI+gB,GAAc,EAClB,MAAMC,EAAiB,GAGvB,GAFA9B,EAAchkB,KAAK,2CAA2CY,MAAK,SAASwc,EAAE3N,GAAIqW,EAAe7f,KAAKwJ,EAAEwN,QAAQ5e,UAE5GoG,EAAI+f,OAAQ,CACZ,IAAIuB,GAAQ,EACZ,IAAK,IAAI3oB,EAAE,EAAEA,EAAIqH,EAAI+f,OAAOvjB,OAAO7D,KAE0B,GAArD0oB,EAAejjB,QAAQ4B,EAAI+f,OAAOpnB,GAAG4oB,cAIrCvhB,EAAI+f,OAAOpnB,GAAG4oB,WAAWtc,gBAAkBgc,EAAMhc,gBACjDmc,GAAc,GAElBJ,EAAkBzH,QAAQ/X,KAAK,CAAC,YAAexB,EAAI+f,OAAOpnB,GAAG4oB,WAAY,aAAcvhB,EAAI+f,OAAOpnB,GAAG4oB,aACrGD,GAAQ,GAEZN,EAAkBzjB,QAAU+jB,EAiBhC,OAdIL,EAAMzkB,OAAS,IAAM4kB,GACrBJ,EAAkBzjB,SAAU,EAC5ByjB,EAAkBzH,QAAQiI,QAAQ,CAAC,YAAeP,EAAO,aAAcA,KAChEA,EAAMzkB,OAAS,GAAK4kB,GAC3BJ,EAAkBzH,QAAQkI,MAAK,SAAS9N,EAAGC,GACvC,OAAID,EAAEkG,YAAY5U,gBAAkBgc,EAAMhc,eAAuB,EAC7D2O,EAAEiG,YAAY5U,gBAAkBgc,EAAMhc,cAAsB,EAC5D0O,EAAEkG,YAAcjG,EAAEiG,aAAqB,EACvClG,EAAEkG,YAAcjG,EAAEiG,YAAoB,EACnC,KAKRmH,IAGfU,cAAe,SAAS9nB,GAGpB,OAFAA,EAAQA,EAAMqL,cAAckc,OAC5BtlB,KAAK0O,KAAK,aAAc3Q,GAAO+nB,WAAW/I,QAAQgJ,YAAYhoB,GACvDgC,EAAEC,OAEbgmB,MAAO,SAASC,EAAYC,EAAYC,GACpCF,EAAaA,EAAW7c,cAAckc,OACtCvlB,EAAEomB,GAAczX,KAAK,aAAcuX,GACnClmB,EAAEomB,GAAczX,KAAK,YAAauX,MAI1ClmB,EAAE4Y,GAAG6L,KAAK4B,SAASC,MAAMC,cAAgB,SAASC,EAASC,GACvD,MAAMtC,EAASR,EAAchH,SAAS,cAClChZ,EAA2B,IAAlBwgB,EAAOvjB,QAAgBujB,EAAO7S,OAAO3C,KAAK,cAAciH,MAAM6Q,GAI3E,OAHK9iB,GACDwgB,EAAO7S,OAAOtL,YAAY,SAASC,SAAS,OAEzCtC,GAA8D,IAApDggB,EAAchH,SAAS,kBAAkB/b,QAG9DgjB,EAAUa,KAAK,CACPzW,GAAI,SACJnC,QAAS,EACT+Y,OAAQ,CACJT,OAAQ,CACJuC,WAAY,SACZJ,MAAO,CACH,CACI5kB,KAAM,gBACN1D,MAAO,4BACP2oB,OAAQ9C,EAAaI,cAEzB,CACIviB,KAAM,eACNilB,OAAQ9C,EAAaG,kBAh1B7C4C,GAtaiC,IAA9B5mB,EAAE,iBAAiBY,QAGtBsW,OAAO2P,gBACF/gB,MAAK,WACF9F,EAAEmO,QAAQ/O,EAAS,uBAAuBuC,SAAQ,SAASqV,GACvDE,OAAO4P,KAAK9P,EAAII,MAAOJ,EAAI+P,UAAW/P,EAAIC,eAAgB,IACrDnR,KAAKkQ,GACLsB,OAAM,SAAU0P,GAKb5Q,OAJWoB,IAARwP,EAIMA,EAAIvP,SAASC,KAHT,YAM1BJ,OAAM,WAELzV,OAAOC,SAASyF,KAAOnI,EAAS,sBAmExCY,EAAE,oBAAoBwL,MAAM,CAACyb,eAAe,IAC5CjnB,EAAE,cAAcwL,MAAM,CAACyb,eAAe,IACtCjnB,EAAE,0BAA0BgO,GAAG,SAAS,SAASoB,GAC7CA,EAAEzM,iBACFuU,OAAO2P,gBACF/gB,KAAKiR,GACLO,OAAM,WACHlB,EAAS,iBA6tCzB,WACI,MAAM8Q,EAAWlnB,EAAE,aAAaG,MAC1BgnB,EAASnnB,EAAE,WAAWG,MACtBinB,EAAkBpnB,EAAE,oBAAoBG,MAC9C,IAAIknB,EAAiBjoB,EAAS,iBAAmB8nB,EAAW,oBACpC,SAApBE,IACAC,EAAiBjoB,EAAS,0DAA4D+nB,GAE1FnnB,EAAE,6BACGsF,SAAS,CACN6X,YAAa,CACThc,IAAKkmB,EACLjK,WAAY,SAASC,GACjB,MAAMiK,EAAmB,CAAC,SAAW,EAAM,QAAW,IAChDC,EAAcvnB,EAAE,6BAA6BH,KAAK,YAaxD,OAXAG,EAAEO,KAAK8c,GAAU,SAASC,EAAIkK,GAEvBA,EAAM9W,KAAO6W,GAGhBD,EAAiB3J,QAAQ/X,KAAK,CAC1B,KAAU,IAAM4hB,EAAMvO,OAAS,IAAMla,EAAWyoB,EAAMhb,OAClD,0CAA4CzN,EAAWyoB,EAAMC,WAAWjK,WAAa,SACzF,MAAUgK,EAAM9W,QAGjB4W,GAEXnC,OAAO,GAGXle,gBAAgB,IAGxBjH,EAAE,6BAA6BO,MAAK,WAChCP,EAAEC,MAAMH,OAAM,SAASsP,GACnB,GAAIA,EAAE+T,OAAQ,CACV/T,EAAEzM,iBAEF,MAAM4E,EAAOvH,EAAEC,MAAM0O,KAAK,QAGpB+Y,EAAS,yBAFJ1nB,EAAEC,MAAMJ,KAAK,YAEuB,mBACzC8nB,EAAS,kBAEf9lB,OAAOC,SAAWyF,EAAK9C,QAAQ,IAAImjB,OAAOF,GAASC,UAK/D3nB,EAAE,mCAAmC4K,SAAQ,SAASwE,GAClD,GAAIA,EAAE+T,QAAuB,IAAb/T,EAAEvE,QAAe,CAC7B,MAAMgd,EAAgB7nB,EAAE,wDAExB,GAAI6nB,EAAcjnB,OAAS,EAAG,CAC1B,MAAMwI,EAAOpJ,EAAE6nB,EAAc,IAEvBtgB,EAAO6B,EAAKuF,KAAK,QAGjB+Y,EAAS,yBAFJte,EAAKvJ,KAAK,YAE0B,mBACzC8nB,EAAS,kBAEf9lB,OAAOC,SAAWyF,EAAK9C,QAAQ,IAAImjB,OAAOF,GAASC,QAh9B/DG,GA7SA9nB,EAAE,uBAAuBF,OAAM,SAAUsP,GACrCA,EAAEzM,iBAEF,MAAMyJ,EAAcpM,EAAE,gBACtBoM,EAAYnC,QACZ,MAAMjM,EAAQoO,EAAYjM,MAAMolB,OAAOwC,cAEvC,IAAK,MAAMhrB,KAAKirB,YACZ,GAAIhqB,EAAM2gB,WAAWqJ,YAAYjrB,GAAGgrB,eAChC,OAIR3b,EAAYjM,IAAI6nB,YAAY,GAAK,IAAM5b,EAAYjM,UAx+BvDH,EAAE,kBAAkBgO,GAAG,SAAS,SAAUoB,GACtCA,EAAEzM,iBACF,MAAM+N,EAAK1Q,EAAEC,MAAMJ,KAAK,WACxBG,EAAEC,MAAMgG,SAAS,QACjBjG,EAAE,kBAAoB0Q,GAAI1K,YAAY,QACtChG,EAAE,iBAAmB0Q,GAAI1K,YAAY,QACrChG,EAAE,kBAAoB0Q,GAAI1K,YAAY,WAG1ChG,EAAE,kBAAkBgO,GAAG,SAAS,SAAUoB,GACtCA,EAAEzM,iBACF,MAAM+N,EAAK1Q,EAAEC,MAAMJ,KAAK,WACxBG,EAAEC,MAAMgG,SAAS,QACjBjG,EAAE,kBAAoB0Q,GAAIzK,SAAS,QACnCjG,EAAE,iBAAmB0Q,GAAIzK,SAAS,QAClCjG,EAAE,kBAAoB0Q,GAAI1K,YAAY,WAG1ChG,EAAE,6BAA6BgO,GAAG,SAAS,SAAUoB,GACjDA,EAAEzM,iBACF3C,EAAEC,MAAMiL,OACR,MAAMuZ,EAAOzkB,EAAEC,MAAMkG,SAASxG,KAAK,iBACnC8kB,EAAKze,YAAY,QACjBwK,EAAqBiU,EAAK9kB,KAAK,aAGM,GAArCK,EAAE,yBAAyBY,SAI/BZ,EAAE,8BAA8BioB,SAEhCjoB,EAAE,eAAegO,GAAG,SAAS,SAASoB,GAClCA,EAAEzM,iBACF3C,EAAEC,MAAMoP,QAAQ,aAAa1P,KAAK,SAAS4M,OAAO,cACnD8C,QAAQ,aAAa1P,KAAK,eAAeqO,GAAG,SAAS,SAASoB,GAC7DA,EAAEzM,iBACF3C,EAAEC,MAAMoP,QAAQ,SAAS9C,OAAO,cAGpCvM,EAAE,gDACGgO,GAAG,cAAc,WACd,MAAM7H,EAASnG,EAAEC,MAAMoP,QAAQ,MAC/BrP,EAAEC,MAAMoP,QAAQ,MAAMpJ,SAClBE,EAAOJ,SAAS,kBAAoBI,EAAOJ,SAAS,kBAC9C,kBAAoB,sBAGjCiI,GAAG,cAAc,WACdhO,EAAEC,MAAMoP,QAAQ,MAAMrJ,YAAY,sCAE1ChG,EAAE,qBAAqBgO,GAAG,SAAS,SAASoB,GAExC,GAAIpP,EAAEoP,EAAEpN,QAAQ+D,SAAS,kBACvB,OAEFqJ,EAAEzM,iBACF,MAAMulB,EAAUloB,EAAEC,MAAMoP,QAAQ,cAActJ,SAAS,mBACjDoiB,EAAOnoB,EAAEC,MAAMJ,KAAK,QACpBuoB,EAAMpoB,EAAEC,MAAMJ,KAAK,OACnBwoB,EAAOroB,EAAEC,MAAMJ,KAAK,QACpB4kB,EAAOzkB,EAAE,4BAA4Bd,OACrCopB,EAAKtoB,EAAEC,MAAMoP,QAAQ,MAC3B,IAAIkZ,EAAMD,EAAG5b,OACR6b,EAAIxiB,SAAS,iBACdwiB,EAAMvoB,EAAE,4BACGkoB,EAAU,oMACA,iJACX,SACVI,EAAGE,MAAMD,IAEb,MAAME,EAAKF,EAAI5oB,KAAK,gBAAkBwoB,GACtC,IAAIO,EAAeD,EAAG9oB,KAAK,uBACC,IAAxB+oB,EAAa9nB,SACb6nB,EAAGvpB,KAAKulB,GAERjU,GADAkY,EAAeD,EAAG9oB,KAAK,wBACWA,KAAK,UAEvC8oB,EAAG9oB,KAAK,sBAAsBQ,IAAIioB,GAClCK,EAAG9oB,KAAK,sBAAsBQ,IAAa,SAATgoB,EAAkB,WAAW,YAC/DM,EAAG9oB,KAAK,sBAAsBQ,IAAIkoB,IAEtCK,EAAa/oB,KAAK,YAAYsK,YA58BtC,SAAS0e,IACL,MAAMC,EAAY5oB,EAAE,mBAEpB,GADAA,EAAE,0BAA0BkL,OACxB0d,EAAW,CACX,MAAMC,EAAYD,EAAUja,KAAK,QACjC,QAAyB,IAAdka,EACP,OAEJ7oB,EAAEyB,KAAK,CACHC,KAAM,MACNP,IAAK/B,EAAQ,IAAIypB,EAAU,UAC3BhpB,KAAM,CACF,MAASV,GAEb2pB,SAAU,SAAStlB,GACf,GAAkB,KAAdA,EAAIG,QACAH,EAAI6gB,aACJ,OAAkC,GAA9B7gB,EAAI6gB,aAAqB,YACzBviB,SAASF,cAIbwR,YAAW,WACPuV,MACD,KAIX3oB,EAAE,4BAA4BkL,OAC9BlL,EAAE,0BAA0BiL,WAwmExC0d,GA/RJ,WACI,MAAMI,EAAgB/oB,EAAE,kBAClBgpB,EAAgB,WAClB,MAAMC,EAAiBjpB,EAAE,mBACnBkpB,EAAelpB,EAAE,iBACK,KAAxB+oB,EAAc5oB,OACd8oB,EAAehe,OACfie,EAAahe,SAEb+d,EAAe/d,OACfge,EAAaje,SAGrB8d,EAAc5d,OAAO6d,GACrBA,IAEA,MAAMG,EAAc,WAChBnpB,EAAE,yBACGsF,SAAS,CACN6X,YAAa,CACThc,IAAK/B,EAAS,kEAAoEY,EAAE,QAAQG,MAC5Fid,WAAY,SAASC,GACjB,MAAMiK,EAAmB,CAAC,SAAW,EAAM,QAAW,IAYtD,OAXAA,EAAiB3J,QAAQ/X,KAAK,CAC1B,KAAQ,GACR,MAAS,KAGb5F,EAAEO,KAAK8c,EAASxd,MAAM,SAASupB,EAAInH,GAC/BqF,EAAiB3J,QAAQ/X,KAAK,CAC1B,KAAU7G,EAAWkjB,EAAKzE,WAC1B,MAAUyE,EAAKvR,QAGhB4W,GAEXnC,OAAO,GAGXle,gBAAgB,KAG5BjH,EAAE,QAAQmL,OAAOge,GACjBA,IAqPAE,GAGIrpB,EAAE,mBAAmBY,OAAS,EAC9B,OAAQwP,aAAakZ,QAAQ,wBACzB,IAAK,MAC2C,IAAxCtpB,EAAE,mBAAmBF,QAAQc,QAC7BZ,EAAE,qBAAqBF,QAE3B,MACJ,QACIE,EAAE,qBAAqBF,QAKnC,MAAMypB,EAAS,CACX,oBAAqBvU,EACrB,wCAAyClE,GAG7C,IAAI/L,EACJ,IAAKA,KAAYwkB,EACb,GAAIvpB,EAAE+E,GAAUnE,OAAS,EAAG,CACxB2oB,EAAOxkB,KACP,MAIR,MAAMykB,EAAaxpB,EAAE,eACrBwpB,EAAWre,QAAO,WACd,MAAMse,EAAYzpB,EAAE,cAChBwpB,EAAWrpB,MAAMS,OAAS,GAAgC,IAA3B6oB,EAAUtpB,MAAMS,QAC/C6oB,EAAUtpB,IAAIqpB,EAAWrpB,MAAMyV,MAAM,4BAA4B,UA+C7E5V,GAAE,WAGmC,IAA7BA,EAAE,gBAAgBY,QACpBZ,EAAE,2BAA2B2U,aAI/B3U,EAAE,oBAAoBgO,GAAG,sBAAqB,WAC1C,MAAM0b,EAAS1pB,EAAEC,MAAME,MAAMW,MAAM,KAC7B6oB,EAAS3pB,EAAE,kBACI,KAAjB2pB,EAAOxpB,OAAkC,IAAlBupB,EAAO9oB,QAA8B,KAAd8oB,EAAO,IACrDC,EAAOxpB,IAAIupB,EAAO,UAgQ9B7nB,OAAO+nB,cAAgB,WACnB5pB,EAAE,eACGwL,MAAM,CACHsZ,SAAU,IACVrZ,UAAW,WACPzL,EAAE,yBAAyB8J,YAEhC0B,MAAM,SAIjB3J,OAAOgoB,gBAAkB,WACrB7pB,EAAE,0BAA0B8J,UAEhCjI,OAAOioB,gBAAkB,WACrB9pB,EAAE,0BAA0B8J,UAGhCjI,OAAOkoB,YAAc,SAASC,EAAcC,EAAaC,GACrD,MAAM7hB,EAAKK,SAAS0X,eAAe4J,GACnC,IAAK3hB,EACD,QAGJ6hB,EAASA,GAAU,IAEZC,cAAgBD,EAAOC,eAAiB,gBAC/CD,EAAOE,iBAAmBF,EAAOE,kBAAoB,mBAErD,MAAMC,EAAgB,CAAC,KAAM,KAE7BliB,IAAIkY,UAAU,mBAAoB,CAC9BjY,WAAYiiB,EAEZ/J,MAAO,CACHgK,KAAM,CACF5oB,KAAMgZ,OACN+F,UAAU,GAEdrhB,OAAQ,CACJsC,KAAMgZ,OACN+F,UAAU,GAEdyJ,OAAQ,CACJxoB,KAAMjE,OACNgjB,UAAU,IAIlB5gB,KAAM,WACF,MAAO,CACHwhB,WAAW,EACXkJ,WAAY,GACZC,QAAS,KACTC,OAAQ,GACRC,mBAAoB,IAI5B9I,QAAS,WACL3hB,KAAKsqB,WAAa,CACdtqB,KAAK0qB,SAAS,GACd1qB,KAAK0qB,SAAS,GACd1qB,KAAK0qB,SAAS,GACd1qB,KAAK0qB,SAAS,GACd1qB,KAAK0qB,SAAS,GACd1qB,KAAK0qB,SAAS,IAElB1qB,KAAKuqB,QAAU,IAAII,KACnB3qB,KAAK4qB,YAAY5qB,KAAKqqB,OAG1B9gB,QAAS,CACLqhB,YAAa,SAASC,GAClB,MAAMzI,EAAOpiB,KACbD,EAAEpC,IAAIqC,KAAKb,OAAS,iBAAmB0rB,EAAW,YAAY,SAASC,GACnE,MAAMC,EAAY,GAClB,IAAK,IAAIjuB,EAAI,EAAGA,EAAIguB,EAAanqB,OAAQ7D,IACrCslB,EAAKqI,oBAAsBK,EAAahuB,GAAGotB,cAC3Ca,EAAUjuB,GAAK,CAAEkuB,KAAM,IAAIL,KAAiC,IAA5BG,EAAahuB,GAAGmuB,WAAmB3J,MAAOwJ,EAAahuB,GAAGotB,eAE9F9H,EAAKoI,OAASO,EACd3I,EAAKhB,WAAY,MAIzBsJ,SAAU,SAASvC,GACf,MAAM/f,EAAKK,SAASyiB,cAAc,OAClC9iB,EAAG+W,UAAY,iBAAmBgJ,EAClC1f,SAASC,KAAKyiB,YAAY/iB,GAE1B,MAAMgjB,EAAQC,iBAAiBjjB,GAAIkjB,gBAInC,OAFA7iB,SAASC,KAAK6iB,YAAYnjB,GAEnBgjB,IAIfI,SAAU,mZAGd,IAAItjB,IAAI,CACJC,WAAYiiB,EACZhiB,GAAIA,EAEJxI,KAAM,CACFT,OAAQsJ,SAASsa,cAAc,sBAAsBlU,QACrDmb,YAAaA,EACbC,OAAQA,MAgMpBlqB,EAAE,kBAAkBF,OAAM,SAASsP,GAC/BA,EAAEzM,iBACF3C,EAAEC,MAAMkG,SAASxG,KAAK,gBAAgB4M,YAqM1C1K,OAAO6pB,mBAAqB,WACxB1rB,EAAE,iBAAiB2rB,WAAW,MAGlC9pB,OAAO+pB,YAAc,YAKrB,SAAwBC,GACpB7rB,EAAE,8BAA8BkL,OAChClL,EAAE,oBAAoBiG,SAAS,WAE/B,IAAI6lB,EAAe,KACnB,GAAuB,KAAnBD,EAAuB,CAEvB,MAAME,EAAUnB,KAAKtmB,MAAMunB,GAE3B,GAAI1S,MAAM4S,GAGN,OAFA/rB,EAAE,oBAAoBgG,YAAY,WAClChG,EAAE,8BAA8BiL,QACzB,EAEX6gB,EAAe,IAAIlB,KAAKmB,GAG5B/rB,EAAEyB,KAAKzB,EAAE,+BAA+B2O,KAAK,UAAY,YAAa,CAClE9O,KAAMwE,KAAK4R,UAAU,CACjB,SAAY6V,IAEhBxe,QAAS,CACL,eAAgBnO,EAChB,YAAY,GAEhB+W,YAAa,mBACbxU,KAAM,OACNC,QAAS,WACLC,KAEJoqB,MAAO,WACHhsB,EAAE,oBAAoBgG,YAAY,WAClChG,EAAE,8BAA8BiL,UAnCxCghB,CADiBjsB,EAAE,iBAAiBG,QAyCxC0B,OAAOqqB,sBAAwB,SAASxb,EAAIhP,GACxC1B,EAAE,sBACGwL,MAAM,CACH4M,UAAU,EACV0M,SAAU,IACVrZ,UAAW,WACPzL,EAAE,uBAAuBG,IAAIuQ,GAC7B1Q,EAAE,mBAAmBG,IAAIuB,GACzB1B,EAAE,yBAAyB8J,YAEhC0B,MAAM,SAyEjB3J,OAAOsqB,kBAAoB,SAASC,GAChC,MAAM3H,EAAOzkB,EAAEosB,GAAK/c,QAAQ,QACzBoV,EAAK7jB,OAAS,GAAK6jB,EAAK1e,SAAS,iBAChC0e,EAAKxe,SAAS,QACdwe,EAAKte,SAASxG,KAAK,6BAA6BsL,QAEhDwZ,EAAKpV,QAAQ,uBAAuBnH,UAG5CrG,OAAOwqB,kBAAoB,WACvB,MAAMC,EAActsB,EAAE,wBAChBusB,EAAWvsB,EAAE,2BAEnBusB,EAASrhB,OACTohB,EAAYtmB,YAAY,YAExBoN,YAAW,WAGPkZ,EAAYrmB,SAAS,YACrBsmB,EAASthB,SACX","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* globals wipPrefixes, issuesTribute, emojiTribute */\n/* exported timeAddManual, toggleStopwatch, cancelStopwatch, initHeatmap */\n/* exported toggleDeadlineForm, setDeadline, deleteDependencyModal, cancelCodeComment, onOAuthLoginClick */\n'use strict';\n\nfunction htmlEncode(text) {\n   return jQuery('<div />').text(text).html()\n}\n\nlet csrf;\nlet suburl;\nlet previewFileModes;\nlet simpleMDEditor;\nlet codeMirrorEditor;\n\n// Disable Dropzone auto-discover because it's manually initialized\nif (typeof(Dropzone) !== \"undefined\") {\n    Dropzone.autoDiscover = false;\n}\n\n// Polyfill for IE9+ support (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)\nif (!Array.from) {\n    Array.from = (function () {\n        const toStr = Object.prototype.toString;\n        const isCallable = function (fn) {\n            return typeof fn === 'function' || toStr.call(fn) === '[object Function]';\n        };\n        const toInteger = function (value) {\n            const number = Number(value);\n            if (isNaN(number)) { return 0; }\n            if (number === 0 || !isFinite(number)) { return number; }\n            return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\n        };\n        const maxSafeInteger = Math.pow(2, 53) - 1;\n        const toLength = function (value) {\n            const len = toInteger(value);\n            return Math.min(Math.max(len, 0), maxSafeInteger);\n        };\n\n        // The length property of the from method is 1.\n        return function from(arrayLike/*, mapFn, thisArg */) {\n            // 1. Let C be the this value.\n            const C = this;\n\n            // 2. Let items be ToObject(arrayLike).\n            const items = Object(arrayLike);\n\n            // 3. ReturnIfAbrupt(items).\n            if (arrayLike == null) {\n                throw new TypeError(\"Array.from requires an array-like object - not null or undefined\");\n            }\n\n            // 4. If mapfn is undefined, then let mapping be false.\n            const mapFn = arguments.length > 1 ? arguments[1] : void undefined;\n            let T;\n            if (typeof mapFn !== 'undefined') {\n                // 5. else\n                // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\n                if (!isCallable(mapFn)) {\n                    throw new TypeError('Array.from: when provided, the second argument must be a function');\n                }\n\n                // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\n                if (arguments.length > 2) {\n                    T = arguments[2];\n                }\n            }\n\n            // 10. Let lenValue be Get(items, \"length\").\n            // 11. Let len be ToLength(lenValue).\n            const len = toLength(items.length);\n\n            // 13. If IsConstructor(C) is true, then\n            // 13. a. Let A be the result of calling the [[Construct]] internal method of C with an argument list containing the single item len.\n            // 14. a. Else, Let A be ArrayCreate(len).\n            const A = isCallable(C) ? Object(new C(len)) : new Array(len);\n\n            // 16. Let k be 0.\n            let k = 0;\n            // 17. Repeat, while k < len… (also steps a - h)\n            let kValue;\n            while (k < len) {\n                kValue = items[k];\n                if (mapFn) {\n                    A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);\n                } else {\n                    A[k] = kValue;\n                }\n                k += 1;\n            }\n            // 18. Let putStatus be Put(A, \"length\", len, true).\n            A.length = len;\n            // 20. Return A.\n            return A;\n        };\n    }());\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\nif (typeof Object.assign != 'function') {\n    // Must be writable: true, enumerable: false, configurable: true\n    Object.defineProperty(Object, \"assign\", {\n        value: function assign(target, _varArgs) { // .length of function is 2\n            'use strict';\n            if (target == null) { // TypeError if undefined or null\n                throw new TypeError('Cannot convert undefined or null to object');\n            }\n\n            const to = Object(target);\n\n            for (let index = 1; index < arguments.length; index++) {\n                const nextSource = arguments[index];\n\n                if (nextSource != null) { // Skip over if undefined or null\n                    for (const nextKey in nextSource) {\n                        // Avoid bugs when hasOwnProperty is shadowed\n                        if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                            to[nextKey] = nextSource[nextKey];\n                        }\n                    }\n                }\n            }\n            return to;\n        },\n        writable: true,\n        configurable: true\n    });\n}\n\nfunction initCommentPreviewTab($form) {\n    const $tabMenu = $form.find('.tabular.menu');\n    $tabMenu.find('.item').tab();\n    $tabMenu.find('.item[data-tab=\"' + $tabMenu.data('preview') + '\"]').click(function () {\n        const $this = $(this);\n        $.post($this.data('url'), {\n                \"_csrf\": csrf,\n                \"mode\": \"gfm\",\n                \"context\": $this.data('context'),\n                \"text\": $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('write') + '\"] textarea').val()\n            },\n            function (data) {\n                const $previewPanel = $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('preview') + '\"]');\n                $previewPanel.html(data);\n                emojify.run($previewPanel[0]);\n                $('pre code', $previewPanel[0]).each(function () {\n                    hljs.highlightBlock(this);\n                });\n            }\n        );\n    });\n\n    buttonsClickOnEnter();\n}\n\nfunction initEditPreviewTab($form) {\n    const $tabMenu = $form.find('.tabular.menu');\n    $tabMenu.find('.item').tab();\n    const $previewTab = $tabMenu.find('.item[data-tab=\"' + $tabMenu.data('preview') + '\"]');\n    if ($previewTab.length) {\n        previewFileModes = $previewTab.data('preview-file-modes').split(',');\n        $previewTab.click(function () {\n            const $this = $(this);\n            $.post($this.data('url'), {\n                    \"_csrf\": csrf,\n                    \"mode\": \"gfm\",\n                    \"context\": $this.data('context'),\n                    \"text\": $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('write') + '\"] textarea').val()\n                },\n                function (data) {\n                    const $previewPanel = $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('preview') + '\"]');\n                    $previewPanel.html(data);\n                    emojify.run($previewPanel[0]);\n                    $('pre code', $previewPanel[0]).each(function () {\n                        hljs.highlightBlock(this);\n                    });\n                }\n            );\n        });\n    }\n}\n\nfunction initEditDiffTab($form) {\n    const $tabMenu = $form.find('.tabular.menu');\n    $tabMenu.find('.item').tab();\n    $tabMenu.find('.item[data-tab=\"' + $tabMenu.data('diff') + '\"]').click(function () {\n        const $this = $(this);\n        $.post($this.data('url'), {\n                \"_csrf\": csrf,\n                \"context\": $this.data('context'),\n                \"content\": $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('write') + '\"] textarea').val()\n            },\n            function (data) {\n                const $diffPreviewPanel = $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('diff') + '\"]');\n                $diffPreviewPanel.html(data);\n                emojify.run($diffPreviewPanel[0]);\n            }\n        );\n    });\n}\n\n\nfunction initEditForm() {\n    if ($('.edit.form').length == 0) {\n        return;\n    }\n\n    initEditPreviewTab($('.edit.form'));\n    initEditDiffTab($('.edit.form'));\n}\n\nfunction initBranchSelector() {\n    const $selectBranch = $('.ui.select-branch')\n    const $branchMenu = $selectBranch.find('.reference-list-menu');\n    $branchMenu.find('.item:not(.no-select)').click(function () {\n        const selectedValue = $(this).data('id');\n        $($(this).data('id-selector')).val(selectedValue);\n        $selectBranch.find('.ui .branch-name').text(selectedValue);\n    });\n    $selectBranch.find('.reference.column').click(function () {\n        $selectBranch.find('.scrolling.reference-list-menu').css('display', 'none');\n        $selectBranch.find('.reference .text').removeClass('black');\n        $($(this).data('target')).css('display', 'block');\n        $(this).find('.text').addClass('black');\n        return false;\n    });\n}\n\nfunction updateIssuesMeta(url, action, issueIds, elementId) {\n    return new Promise(function(resolve) {\n        $.ajax({\n            type: \"POST\",\n            url: url,\n            data: {\n                \"_csrf\": csrf,\n                \"action\": action,\n                \"issue_ids\": issueIds,\n                \"id\": elementId\n            },\n            success: resolve\n        })\n    })\n}\n\nfunction initRepoStatusChecker() {\n    const migrating = $(\"#repo_migrating\");\n    $('#repo_migrating_failed').hide();\n    if (migrating) {\n        const repo_name = migrating.attr('repo');\n        if (typeof repo_name === 'undefined') {\n            return\n        }\n        $.ajax({\n            type: \"GET\",\n            url: suburl +\"/\"+repo_name+\"/status\",\n            data: {\n                \"_csrf\": csrf,\n            },\n            complete: function(xhr) {\n                if (xhr.status == 200) {\n                    if (xhr.responseJSON) {\n                        if (xhr.responseJSON[\"status\"] == 0) {\n                            location.reload();\n                            return\n                        }\n\n                        setTimeout(function () {\n                            initRepoStatusChecker()\n                        }, 2000);\n                        return\n                    }\n                }\n                $('#repo_migrating_progress').hide();\n                $('#repo_migrating_failed').show();\n            }\n        })\n    }\n}\n\nfunction initReactionSelector(parent) {\n    let reactions = '';\n    if (!parent) {\n        parent = $(document);\n        reactions = '.reactions > ';\n    }\n\n    parent.find(reactions + 'a.label').popup({'position': 'bottom left', 'metadata': {'content': 'title', 'title': 'none'}});\n\n    parent.find('.select-reaction > .menu > .item, ' + reactions + 'a.label').on('click', function(e){\n        const vm = this;\n        e.preventDefault();\n\n        if ($(this).hasClass('disabled')) return;\n\n        const actionURL = $(this).hasClass('item') ?\n                $(this).closest('.select-reaction').data('action-url') :\n                $(this).data('action-url');\n        const url = actionURL + '/' + ($(this).hasClass('blue') ? 'unreact' : 'react');\n        $.ajax({\n            type: 'POST',\n            url: url,\n            data: {\n                '_csrf': csrf,\n                'content': $(this).data('content')\n            }\n        }).done(function(resp) {\n            if (resp && (resp.html || resp.empty)) {\n                const content = $(vm).closest('.content');\n                let react = content.find('.segment.reactions');\n                if (!resp.empty && react.length > 0) {\n                    react.remove();\n                }\n                if (!resp.empty) {\n                    react = $('<div class=\"ui attached segment reactions\"></div>');\n                    const attachments = content.find('.segment.bottom:first');\n                    if (attachments.length > 0) {\n                        react.insertBefore(attachments);\n                    } else {\n                        react.appendTo(content);\n                    }\n                    react.html(resp.html);\n                    const hasEmoji = react.find('.has-emoji');\n                    for (let i = 0; i < hasEmoji.length; i++) {\n                        emojify.run(hasEmoji.get(i));\n                    }\n                    react.find('.dropdown').dropdown();\n                    initReactionSelector(react);\n                }\n            }\n        });\n    });\n}\n\nfunction insertAtCursor(field, value) {\n    if (field.selectionStart || field.selectionStart === 0) {\n        const startPos = field.selectionStart;\n        const endPos = field.selectionEnd;\n        field.value = field.value.substring(0, startPos)\n            + value\n            + field.value.substring(endPos, field.value.length);\n        field.selectionStart = startPos + value.length;\n        field.selectionEnd = startPos + value.length;\n    } else {\n        field.value += value;\n    }\n}\n\nfunction replaceAndKeepCursor(field, oldval, newval) {\n    if (field.selectionStart || field.selectionStart === 0) {\n        const startPos = field.selectionStart;\n        const endPos = field.selectionEnd;\n        field.value = field.value.replace(oldval, newval);\n        field.selectionStart = startPos + newval.length - oldval.length;\n        field.selectionEnd = endPos + newval.length - oldval.length;\n    } else {\n        field.value = field.value.replace(oldval, newval);\n    }\n}\n\nfunction retrieveImageFromClipboardAsBlob(pasteEvent, callback){\n    if (!pasteEvent.clipboardData) {\n        return;\n    }\n\n    const items = pasteEvent.clipboardData.items;\n    if (typeof(items) === \"undefined\") {\n        return;\n    }\n\n    for (let i = 0; i < items.length; i++) {\n        if (items[i].type.indexOf(\"image\") === -1) continue;\n        const blob = items[i].getAsFile();\n\n        if (typeof(callback) === \"function\") {\n            pasteEvent.preventDefault();\n            pasteEvent.stopPropagation();\n            callback(blob);\n        }\n    }\n}\n\nfunction uploadFile(file, callback) {\n    const xhr = new XMLHttpRequest();\n\n    xhr.onload = function() {\n        if (xhr.status == 200) {\n            callback(xhr.responseText);\n        }\n    };\n\n    xhr.open(\"post\", suburl + \"/attachments\", true);\n    xhr.setRequestHeader(\"X-Csrf-Token\", csrf);\n    const formData = new FormData();\n    formData.append('file', file, file.name);\n    xhr.send(formData);\n}\n\nfunction reload() {\n    window.location.reload();\n}\n\nfunction initImagePaste(target) {\n    target.each(function() {\n        const field = this;\n        field.addEventListener('paste', function(event){\n            retrieveImageFromClipboardAsBlob(event, function(img) {\n                const name = img.name.substr(0, img.name.lastIndexOf('.'));\n                insertAtCursor(field, '![' + name + ']()');\n                uploadFile(img, function(res) {\n                    const data = JSON.parse(res);\n                    replaceAndKeepCursor(field, '![' + name + ']()', '![' + name + '](' + suburl + '/attachments/' + data.uuid + ')');\n                    const input = $('<input id=\"' + data.uuid + '\" name=\"files\" type=\"hidden\">').val(data.uuid);\n                    $('.files').append(input);\n                });\n            });\n        }, false);\n    });\n}\n\nfunction initCommentForm() {\n    if ($('.comment.form').length == 0) {\n        return\n    }\n\n    initBranchSelector();\n    initCommentPreviewTab($('.comment.form'));\n    initImagePaste($('.comment.form textarea'));\n\n    // Listsubmit\n    function initListSubmits(selector, outerSelector) {\n        const $list = $('.ui.' + outerSelector + '.list');\n        const $noSelect = $list.find('.no-select');\n        const $listMenu = $('.' + selector + ' .menu');\n        let hasLabelUpdateAction = $listMenu.data('action') == 'update';\n        const labels = {};\n\n        $('.' + selector).dropdown('setting', 'onHide', function(){\n            hasLabelUpdateAction = $listMenu.data('action') == 'update'; // Update the var\n            if (hasLabelUpdateAction) {\n                const promises = [];\n                Object.keys(labels).forEach(function(elementId) {\n                    const label = labels[elementId];\n                    const promise = updateIssuesMeta(\n                        label[\"update-url\"],\n                        label[\"action\"],\n                        label[\"issue-id\"],\n                        elementId\n                    );\n                    promises.push(promise);\n                });\n                Promise.all(promises).then(reload);\n            }\n        });\n\n        $listMenu.find('.item:not(.no-select)').click(function () {\n\n            // we don't need the action attribute when updating assignees\n            if (selector == 'select-assignees-modify') {\n\n                // UI magic. We need to do this here, otherwise it would destroy the functionality of\n                // adding/removing labels\n                if ($(this).hasClass('checked')) {\n                    $(this).removeClass('checked');\n                    $(this).find('.octicon').removeClass('octicon-check');\n                } else {\n                    $(this).addClass('checked');\n                    $(this).find('.octicon').addClass('octicon-check');\n                }\n\n                updateIssuesMeta(\n                    $listMenu.data('update-url'),\n                    \"\",\n                    $listMenu.data('issue-id'),\n                    $(this).data('id')\n                );\n                $listMenu.data('action', 'update'); // Update to reload the page when we updated items\n                return false;\n            }\n\n            if ($(this).hasClass('checked')) {\n                $(this).removeClass('checked');\n                $(this).find('.octicon').removeClass('octicon-check');\n                if (hasLabelUpdateAction) {\n                    if (!($(this).data('id') in labels)) {\n                        labels[$(this).data('id')] = {\n                            \"update-url\": $listMenu.data('update-url'),\n                            \"action\": \"detach\",\n                            \"issue-id\": $listMenu.data('issue-id'),\n                        };\n                    } else {\n                        delete labels[$(this).data('id')];\n                    }\n                }\n            } else {\n                $(this).addClass('checked');\n                $(this).find('.octicon').addClass('octicon-check');\n                if (hasLabelUpdateAction) {\n                    if (!($(this).data('id') in labels)) {\n                        labels[$(this).data('id')] = {\n                            \"update-url\": $listMenu.data('update-url'),\n                            \"action\": \"attach\",\n                            \"issue-id\": $listMenu.data('issue-id'),\n                        };\n                    } else {\n                        delete labels[$(this).data('id')];\n                    }\n                }\n            }\n\n            const listIds = [];\n            $(this).parent().find('.item').each(function () {\n                if ($(this).hasClass('checked')) {\n                    listIds.push($(this).data('id'));\n                    $($(this).data('id-selector')).removeClass('hide');\n                } else {\n                    $($(this).data('id-selector')).addClass('hide');\n                }\n            });\n            if (listIds.length == 0) {\n                $noSelect.removeClass('hide');\n            } else {\n                $noSelect.addClass('hide');\n            }\n            $($(this).parent().data('id')).val(listIds.join(\",\"));\n            return false;\n        });\n        $listMenu.find('.no-select.item').click(function () {\n            if (hasLabelUpdateAction || selector == 'select-assignees-modify') {\n                updateIssuesMeta(\n                    $listMenu.data('update-url'),\n                    \"clear\",\n                    $listMenu.data('issue-id'),\n                    \"\"\n                ).then(reload);\n            }\n\n            $(this).parent().find('.item').each(function () {\n                $(this).removeClass('checked');\n                $(this).find('.octicon').removeClass('octicon-check');\n            });\n\n            $list.find('.item').each(function () {\n                $(this).addClass('hide');\n            });\n            $noSelect.removeClass('hide');\n            $($(this).parent().data('id')).val('');\n\n        });\n    }\n\n    // Init labels and assignees\n    initListSubmits('select-label', 'labels');\n    initListSubmits('select-assignees', 'assignees');\n    initListSubmits('select-assignees-modify', 'assignees');\n\n    function selectItem(select_id, input_id) {\n        const $menu = $(select_id + ' .menu');\n        const $list = $('.ui' + select_id + '.list');\n        const hasUpdateAction = $menu.data('action') == 'update';\n\n        $menu.find('.item:not(.no-select)').click(function () {\n            $(this).parent().find('.item').each(function () {\n                $(this).removeClass('selected active')\n            });\n\n            $(this).addClass('selected active');\n            if (hasUpdateAction) {\n                updateIssuesMeta(\n                    $menu.data('update-url'),\n                    \"\",\n                    $menu.data('issue-id'),\n                    $(this).data('id')\n                ).then(reload);\n            }\n            switch (input_id) {\n                case '#milestone_id':\n                    $list.find('.selected').html('<a class=\"item\" href=' + $(this).data('href') + '>' +\n                        htmlEncode($(this).text()) + '</a>');\n                    break;\n                case '#assignee_id':\n                    $list.find('.selected').html('<a class=\"item\" href=' + $(this).data('href') + '>' +\n                        '<img class=\"ui avatar image\" src=' + $(this).data('avatar') + '>' +\n                        htmlEncode($(this).text()) + '</a>');\n            }\n            $('.ui' + select_id + '.list .no-select').addClass('hide');\n            $(input_id).val($(this).data('id'));\n        });\n        $menu.find('.no-select.item').click(function () {\n            $(this).parent().find('.item:not(.no-select)').each(function () {\n                $(this).removeClass('selected active')\n            });\n\n            if (hasUpdateAction) {\n                updateIssuesMeta(\n                    $menu.data('update-url'),\n                    \"\",\n                    $menu.data('issue-id'),\n                    $(this).data('id')\n                ).then(reload);\n            }\n\n            $list.find('.selected').html('');\n            $list.find('.no-select').removeClass('hide');\n            $(input_id).val('');\n        });\n    }\n\n    // Milestone and assignee\n    selectItem('.select-milestone', '#milestone_id');\n    selectItem('.select-assignee', '#assignee_id');\n}\n\nfunction initInstall() {\n    if ($('.install').length == 0) {\n        return;\n    }\n\n    if ($('#db_host').val()==\"\") {\n        $('#db_host').val(\"127.0.0.1:3306\");\n        $('#db_user').val(\"gitea\");\n        $('#db_name').val(\"gitea\");\n    }\n\n    // Database type change detection.\n    $(\"#db_type\").change(function () {\n        const sqliteDefault = 'data/gitea.db';\n        const tidbDefault = 'data/gitea_tidb';\n\n        const dbType = $(this).val();\n        if (dbType === \"SQLite3\") {\n            $('#sql_settings').hide();\n            $('#pgsql_settings').hide();\n            $('#mysql_settings').hide();\n            $('#sqlite_settings').show();\n\n            if (dbType === \"SQLite3\" && $('#db_path').val() == tidbDefault) {\n                $('#db_path').val(sqliteDefault);\n            }\n            return;\n        }\n\n        const dbDefaults = {\n            \"MySQL\": \"127.0.0.1:3306\",\n            \"PostgreSQL\": \"127.0.0.1:5432\",\n            \"MSSQL\": \"127.0.0.1:1433\"\n        };\n\n        $('#sqlite_settings').hide();\n        $('#sql_settings').show();\n\n        $('#pgsql_settings').toggle(dbType === \"PostgreSQL\");\n        $('#mysql_settings').toggle(dbType === \"MySQL\");\n        $.each(dbDefaults, function(_type, defaultHost) {\n            if ($('#db_host').val() == defaultHost) {\n                $('#db_host').val(dbDefaults[dbType]);\n                return false;\n            }\n        });\n    });\n\n    // TODO: better handling of exclusive relations.\n    $('#offline-mode input').change(function () {\n        if ($(this).is(':checked')) {\n            $('#disable-gravatar').checkbox('check');\n            $('#federated-avatar-lookup').checkbox('uncheck');\n        }\n    });\n    $('#disable-gravatar input').change(function () {\n        if ($(this).is(':checked')) {\n            $('#federated-avatar-lookup').checkbox('uncheck');\n        } else {\n            $('#offline-mode').checkbox('uncheck');\n        }\n    });\n    $('#federated-avatar-lookup input').change(function () {\n        if ($(this).is(':checked')) {\n            $('#disable-gravatar').checkbox('uncheck');\n            $('#offline-mode').checkbox('uncheck');\n        }\n    });\n    $('#enable-openid-signin input').change(function () {\n        if ($(this).is(':checked')) {\n            if (!$('#disable-registration input').is(':checked')) {\n                $('#enable-openid-signup').checkbox('check');\n            }\n        } else {\n            $('#enable-openid-signup').checkbox('uncheck');\n        }\n    });\n    $('#disable-registration input').change(function () {\n        if ($(this).is(':checked')) {\n            $('#enable-captcha').checkbox('uncheck');\n            $('#enable-openid-signup').checkbox('uncheck');\n        } else {\n            $('#enable-openid-signup').checkbox('check');\n        }\n    });\n    $('#enable-captcha input').change(function () {\n        if ($(this).is(':checked')) {\n            $('#disable-registration').checkbox('uncheck');\n        }\n    });\n}\n\nfunction initRepository() {\n    if ($('.repository').length == 0) {\n        return;\n    }\n\n    function initFilterSearchDropdown(selector) {\n        const $dropdown = $(selector);\n        $dropdown.dropdown({\n            fullTextSearch: true,\n            selectOnKeydown: false,\n            onChange: function (_text, _value, $choice) {\n                if ($choice.data('url')) {\n                    window.location.href = $choice.data('url');\n                }\n            },\n            message: {noResults: $dropdown.data('no-results')}\n        });\n    }\n\n    // File list and commits\n    if ($('.repository.file.list').length > 0 ||\n        ('.repository.commits').length > 0) {\n        initFilterBranchTagDropdown('.choose.reference .dropdown');\n    }\n\n    // Wiki\n    if ($('.repository.wiki.view').length > 0) {\n        initFilterSearchDropdown('.choose.page .dropdown');\n    }\n\n    // Options\n    if ($('.repository.settings.options').length > 0) {\n        $('#repo_name').keyup(function () {\n            const $prompt = $('#repo-name-change-prompt');\n            if ($(this).val().toString().toLowerCase() != $(this).data('name').toString().toLowerCase()) {\n                $prompt.show();\n            } else {\n                $prompt.hide();\n            }\n        });\n\n        // Enable or select internal/external wiki system and issue tracker.\n        $('.enable-system').change(function () {\n            if (this.checked) {\n                $($(this).data('target')).removeClass('disabled');\n                if (!$(this).data('context')) $($(this).data('context')).addClass('disabled');\n            } else {\n                $($(this).data('target')).addClass('disabled');\n                if (!$(this).data('context')) $($(this).data('context')).removeClass('disabled');\n            }\n        });\n        $('.enable-system-radio').change(function () {\n            if (this.value == 'false') {\n                $($(this).data('target')).addClass('disabled');\n                if (typeof $(this).data('context') !== 'undefined') $($(this).data('context')).removeClass('disabled');\n            } else if (this.value == 'true') {\n                $($(this).data('target')).removeClass('disabled');\n                if (typeof $(this).data('context') !== 'undefined')  $($(this).data('context')).addClass('disabled');\n            }\n        });\n    }\n\n    // Labels\n    if ($('.repository.labels').length > 0) {\n        // Create label\n        const $newLabelPanel = $('.new-label.segment');\n        $('.new-label.button').click(function () {\n            $newLabelPanel.show();\n        });\n        $('.new-label.segment .cancel').click(function () {\n            $newLabelPanel.hide();\n        });\n\n        $('.color-picker').each(function () {\n            $(this).minicolors();\n        });\n        $('.precolors .color').click(function () {\n            const color_hex = $(this).data('color-hex');\n            $('.color-picker').val(color_hex);\n            $('.minicolors-swatch-color').css(\"background-color\", color_hex);\n        });\n        $('.edit-label-button').click(function () {\n            $('#label-modal-id').val($(this).data('id'));\n            $('.edit-label .new-label-input').val($(this).data('title'));\n            $('.edit-label .new-label-desc-input').val($(this).data('description'));\n            $('.edit-label .color-picker').val($(this).data('color'));\n            $('.minicolors-swatch-color').css(\"background-color\", $(this).data('color'));\n            $('.edit-label.modal').modal({\n                onApprove: function () {\n                    $('.edit-label.form').submit();\n                }\n            }).modal('show');\n            return false;\n        });\n    }\n\n    // Milestones\n    if ($('.repository.new.milestone').length > 0) {\n        const $datepicker = $('.milestone.datepicker');\n        $datepicker.datetimepicker({\n            lang: $datepicker.data('lang'),\n            inline: true,\n            timepicker: false,\n            startDate: $datepicker.data('start-date'),\n            formatDate: 'Y-m-d',\n            onSelectDate: function (ct) {\n                $('#deadline').val(ct.dateFormat('Y-m-d'));\n            }\n        });\n        $('#clear-date').click(function () {\n            $('#deadline').val('');\n            return false;\n        });\n    }\n\n    // Issues\n    if ($('.repository.view.issue').length > 0) {\n        // Edit issue title\n        const $issueTitle = $('#issue-title');\n        const $editInput = $('#edit-title-input input');\n        const editTitleToggle = function () {\n            $issueTitle.toggle();\n            $('.not-in-edit').toggle();\n            $('#edit-title-input').toggle();\n            $('.in-edit').toggle();\n            $editInput.focus();\n            return false;\n        };\n        $('#edit-title').click(editTitleToggle);\n        $('#cancel-edit-title').click(editTitleToggle);\n        $('#save-edit-title').click(editTitleToggle).click(function () {\n            if ($editInput.val().length == 0 ||\n                $editInput.val() == $issueTitle.text()) {\n                $editInput.val($issueTitle.text());\n                return false;\n            }\n\n            $.post($(this).data('update-url'), {\n                    \"_csrf\": csrf,\n                    \"title\": $editInput.val()\n                },\n                function (data) {\n                    $editInput.val(data.title);\n                    $issueTitle.text(data.title);\n                    reload();\n                });\n            return false;\n        });\n\n        // Edit issue or comment content\n        $('.edit-content').click(function () {\n            const $segment = $(this).parent().parent().parent().next();\n            const $editContentZone = $segment.find('.edit-content-zone');\n            const $renderContent = $segment.find('.render-content');\n            const $rawContent = $segment.find('.raw-content');\n            let $textarea;\n\n            // Setup new form\n            if ($editContentZone.html().length == 0) {\n                $editContentZone.html($('#edit-content-form').html());\n                $textarea = $editContentZone.find('textarea');\n                issuesTribute.attach($textarea.get());\n                emojiTribute.attach($textarea.get());\n\n                const $dropzone = $editContentZone.find('.dropzone');\n                $dropzone.data(\"saved\", false);\n                const $files = $editContentZone.find('.comment-files');\n                if ($dropzone.length > 0) {\n                    const filenameDict = {};\n                    $dropzone.dropzone({\n                        url: $dropzone.data('upload-url'),\n                        headers: {\"X-Csrf-Token\": csrf},\n                        maxFiles: $dropzone.data('max-file'),\n                        maxFilesize: $dropzone.data('max-size'),\n                        acceptedFiles: ($dropzone.data('accepts') === '*/*') ? null : $dropzone.data('accepts'),\n                        addRemoveLinks: true,\n                        dictDefaultMessage: $dropzone.data('default-message'),\n                        dictInvalidFileType: $dropzone.data('invalid-input-type'),\n                        dictFileTooBig: $dropzone.data('file-too-big'),\n                        dictRemoveFile: $dropzone.data('remove-file'),\n                        init: function () {\n                            this.on(\"success\", function (file, data) {\n                                filenameDict[file.name] = {\n                                    \"uuid\": data.uuid,\n                                    \"submitted\": false\n                                }\n                                const input = $('<input id=\"' + data.uuid + '\" name=\"files\" type=\"hidden\">').val(data.uuid);\n                                $files.append(input);\n                            });\n                            this.on(\"removedfile\", function (file) {\n                                if (!(file.name in filenameDict)) {\n                                    return;\n                                }\n                                $('#' + filenameDict[file.name].uuid).remove();\n                                if ($dropzone.data('remove-url') && $dropzone.data('csrf') && !filenameDict[file.name].submitted) {\n                                    $.post($dropzone.data('remove-url'), {\n                                        file: filenameDict[file.name].uuid,\n                                        _csrf: $dropzone.data('csrf')\n                                    });\n                                }\n                            });\n                            this.on(\"submit\", function () {\n                                $.each(filenameDict, function(name){\n                                    filenameDict[name].submitted = true;\n                                });\n                            });\n                            this.on(\"reload\", function (){\n                                $.getJSON($editContentZone.data('attachment-url'), function(data){\n                                    const drop = $dropzone.get(0).dropzone;\n                                    drop.removeAllFiles(true);\n                                    $files.empty();\n                                    $.each(data, function(){\n                                        const imgSrc =  $dropzone.data('upload-url') + \"/\" + this.uuid;\n                                        drop.emit(\"addedfile\", this);\n                                        drop.emit(\"thumbnail\", this, imgSrc);\n                                        drop.emit(\"complete\", this);\n                                        drop.files.push(this);\n                                        filenameDict[this.name] = {\n                                            \"submitted\": true,\n                                            \"uuid\": this.uuid\n                                        }\n                                        $dropzone.find(\"img[src='\" + imgSrc + \"']\").css(\"max-width\", \"100%\");\n                                        const input = $('<input id=\"' + this.uuid + '\" name=\"files\" type=\"hidden\">').val(this.uuid);\n                                        $files.append(input);\n                                    });\n                                });\n                            });\n                        }\n                    });\n                    $dropzone.get(0).dropzone.emit(\"reload\");\n                }\n                // Give new write/preview data-tab name to distinguish from others\n                const $editContentForm = $editContentZone.find('.ui.comment.form');\n                const $tabMenu = $editContentForm.find('.tabular.menu');\n                $tabMenu.attr('data-write', $editContentZone.data('write'));\n                $tabMenu.attr('data-preview', $editContentZone.data('preview'));\n                $tabMenu.find('.write.item').attr('data-tab', $editContentZone.data('write'));\n                $tabMenu.find('.preview.item').attr('data-tab', $editContentZone.data('preview'));\n                $editContentForm.find('.write.segment').attr('data-tab', $editContentZone.data('write'));\n                $editContentForm.find('.preview.segment').attr('data-tab', $editContentZone.data('preview'));\n\n                initCommentPreviewTab($editContentForm);\n\n                $editContentZone.find('.cancel.button').click(function () {\n                    $renderContent.show();\n                    $editContentZone.hide();\n                    $dropzone.get(0).dropzone.emit(\"reload\");\n                });\n                $editContentZone.find('.save.button').click(function () {\n                    $renderContent.show();\n                    $editContentZone.hide();\n                    const $attachments = $files.find(\"[name=files]\").map(function(){\n                        return $(this).val();\n                    }).get();\n                    $.post($editContentZone.data('update-url'), {\n                        \"_csrf\": csrf,\n                        \"content\": $textarea.val(),\n                        \"context\": $editContentZone.data('context'),\n                        \"files\": $attachments\n                    },\n                    function (data) {\n                        if (data.length == 0) {\n                            $renderContent.html($('#no-content').html());\n                        } else {\n                            $renderContent.html(data.content);\n                            emojify.run($renderContent[0]);\n                            $('pre code', $renderContent[0]).each(function () {\n                                hljs.highlightBlock(this);\n                            });\n                        }\n                        const $content = $segment.parent();\n                        if(!$content.find(\".ui.small.images\").length){\n                            if(data.attachments != \"\"){\n                                $content.append(\n                                '<div class=\"ui bottom attached segment\">' +\n                                '    <div class=\"ui small images\">' +\n                                '    </div>' +\n                                '</div>'\n                                );\n                                $content.find(\".ui.small.images\").html(data.attachments);\n                            }\n                        } else if (data.attachments == \"\") {\n                            $content.find(\".ui.small.images\").parent().remove();\n                        } else {\n                            $content.find(\".ui.small.images\").html(data.attachments);\n                        }\n                        $dropzone.get(0).dropzone.emit(\"submit\");\n                        $dropzone.get(0).dropzone.emit(\"reload\");\n                    });\n                });\n            } else {\n                $textarea = $segment.find('textarea');\n            }\n\n            // Show write/preview tab and copy raw content as needed\n            $editContentZone.show();\n            $renderContent.hide();\n            if ($textarea.val().length == 0) {\n                $textarea.val($rawContent.text());\n            }\n            $textarea.focus();\n            return false;\n        });\n\n        // Delete comment\n        $('.delete-comment').click(function () {\n            const $this = $(this);\n            if (confirm($this.data('locale'))) {\n                $.post($this.data('url'), {\n                    \"_csrf\": csrf\n                }).success(function () {\n                    $('#' + $this.data('comment-id')).remove();\n                });\n            }\n            return false;\n        });\n\n        // Change status\n        const $statusButton = $('#status-button');\n        $('#comment-form .edit_area').keyup(function () {\n            if ($(this).val().length == 0) {\n                $statusButton.text($statusButton.data('status'))\n            } else {\n                $statusButton.text($statusButton.data('status-and-comment'))\n            }\n        });\n        $statusButton.click(function () {\n            $('#status').val($statusButton.data('status-val'));\n            $('#comment-form').submit();\n        });\n\n        // Pull Request merge button\n        const $mergeButton = $('.merge-button > button');\n        $mergeButton.on('click', function(e) {\n            e.preventDefault();\n            $('.' + $(this).data('do') + '-fields').show();\n            $(this).parent().hide();\n        });\n        $('.merge-button > .dropdown').dropdown({\n            onChange: function (_text, _value, $choice) {\n                if ($choice.data('do')) {\n                    $mergeButton.find('.button-text').text($choice.text());\n                    $mergeButton.data('do', $choice.data('do'));\n                }\n            }\n        });\n        $('.merge-cancel').on('click', function(e) {\n            e.preventDefault();\n            $(this).closest('.form').hide();\n            $mergeButton.parent().show();\n        });\n\n        initReactionSelector();\n    }\n\n    // Diff\n    if ($('.repository.diff').length > 0) {\n        $('.diff-counter').each(function () {\n            const $item = $(this);\n            const addLine = $item.find('span[data-line].add').data(\"line\");\n            const delLine = $item.find('span[data-line].del').data(\"line\");\n            const addPercent = parseFloat(addLine) / (parseFloat(addLine) + parseFloat(delLine)) * 100;\n            $item.find(\".bar .add\").css(\"width\", addPercent + \"%\");\n        });\n    }\n\n    // Quick start and repository home\n    $('#repo-clone-ssh').click(function () {\n        $('.clone-url').text($(this).data('link'));\n        $('#repo-clone-url').val($(this).data('link'));\n        $(this).addClass('blue');\n        $('#repo-clone-https').removeClass('blue');\n        localStorage.setItem('repo-clone-protocol', 'ssh');\n    });\n    $('#repo-clone-https').click(function () {\n        $('.clone-url').text($(this).data('link'));\n        $('#repo-clone-url').val($(this).data('link'));\n        $(this).addClass('blue');\n        $('#repo-clone-ssh').removeClass('blue');\n        localStorage.setItem('repo-clone-protocol', 'https');\n    });\n    $('#repo-clone-url').click(function () {\n        $(this).select();\n    });\n\n    // Pull request\n    const $repoComparePull = $('.repository.compare.pull');\n    if ($repoComparePull.length > 0) {\n        initFilterSearchDropdown('.choose.branch .dropdown');\n        // show pull request form\n        $repoComparePull.find('button.show-form').on('click', function(e) {\n            e.preventDefault();\n            $repoComparePull.find('.pullrequest-form').show();\n            $(this).parent().hide();\n        });\n    }\n\n    // Branches\n    if ($('.repository.settings.branches').length > 0) {\n        initFilterSearchDropdown('.protected-branches .dropdown');\n        $('.enable-protection, .enable-whitelist').change(function () {\n            if (this.checked) {\n                $($(this).data('target')).removeClass('disabled');\n            } else {\n                $($(this).data('target')).addClass('disabled');\n            }\n        });\n    }\n}\n\nfunction initMigration() {\n    const toggleMigrations = function() {\n        const authUserName = $('#auth_username').val();\n        const cloneAddr = $('#clone_addr').val();\n        if (!$('#mirror').is(\":checked\") && (authUserName!=undefined && authUserName.length > 0)\n        && (cloneAddr!=undefined && (cloneAddr.startsWith(\"https://github.com\") || cloneAddr.startsWith(\"http://github.com\")))) {\n            $('#migrate_items').show();\n        } else {\n            $('#migrate_items').hide();\n        }\n    }\n\n    toggleMigrations();\n\n    $('#clone_addr').on('input', toggleMigrations)\n    $('#auth_username').on('input', toggleMigrations)\n    $('#mirror').on('change', toggleMigrations)\n}\n\nfunction initPullRequestReview() {\n    $('.show-outdated').on('click', function (e) {\n        e.preventDefault();\n        const id = $(this).data('comment');\n        $(this).addClass(\"hide\");\n        $(\"#code-comments-\" + id).removeClass('hide');\n        $(\"#code-preview-\" + id).removeClass('hide');\n        $(\"#hide-outdated-\" + id).removeClass('hide');\n    });\n\n    $('.hide-outdated').on('click', function (e) {\n        e.preventDefault();\n        const id = $(this).data('comment');\n        $(this).addClass(\"hide\");\n        $(\"#code-comments-\" + id).addClass('hide');\n        $(\"#code-preview-\" + id).addClass('hide');\n        $(\"#show-outdated-\" + id).removeClass('hide');\n    });\n\n    $('button.comment-form-reply').on('click', function (e) {\n        e.preventDefault();\n        $(this).hide();\n        const form = $(this).parent().find('.comment-form')\n        form.removeClass('hide');\n        assingMenuAttributes(form.find('.menu'));\n    });\n    // The following part is only for diff views\n    if ($('.repository.pull.diff').length == 0) {\n        return;\n    }\n\n    $('.diff-detail-box.ui.sticky').sticky();\n\n    $('.btn-review').on('click', function(e) {\n        e.preventDefault();\n        $(this).closest('.dropdown').find('.menu').toggle('visible');\n    }).closest('.dropdown').find('.link.close').on('click', function(e) {\n        e.preventDefault();\n        $(this).closest('.menu').toggle('visible');\n    });\n\n    $('.code-view .lines-code,.code-view .lines-num')\n        .on('mouseenter', function() {\n            const parent = $(this).closest('td');\n            $(this).closest('tr').addClass(\n                parent.hasClass('lines-num-old') || parent.hasClass('lines-code-old')\n                    ? 'focus-lines-old' : 'focus-lines-new'\n            );\n        })\n        .on('mouseleave', function() {\n            $(this).closest('tr').removeClass('focus-lines-new focus-lines-old');\n        });\n    $('.add-code-comment').on('click', function(e) {\n        // https://github.com/go-gitea/gitea/issues/4745\n        if ($(e.target).hasClass('btn-add-single')) {\n          return;\n        }\n        e.preventDefault();\n        const isSplit = $(this).closest('.code-diff').hasClass('code-diff-split');\n        const side = $(this).data('side');\n        const idx = $(this).data('idx');\n        const path = $(this).data('path');\n        const form = $('#pull_review_add_comment').html();\n        const tr = $(this).closest('tr');\n        let ntr = tr.next();\n        if (!ntr.hasClass('add-comment')) {\n            ntr = $('<tr class=\"add-comment\">'\n                    + (isSplit ? '<td class=\"lines-num\"></td><td class=\"lines-type-marker\"></td><td class=\"add-comment-left\"></td><td class=\"lines-num\"></td><td class=\"lines-type-marker\"></td><td class=\"add-comment-right\"></td>'\n                               : '<td class=\"lines-num\"></td><td class=\"lines-num\"></td><td class=\"lines-type-marker\"></td><td class=\"add-comment-left add-comment-right\"></td>')\n                    + '</tr>');\n            tr.after(ntr);\n        }\n        const td = ntr.find('.add-comment-' + side);\n        let commentCloud = td.find('.comment-code-cloud');\n        if (commentCloud.length === 0) {\n            td.html(form);\n            commentCloud = td.find('.comment-code-cloud');\n            assingMenuAttributes(commentCloud.find('.menu'));\n\n            td.find(\"input[name='line']\").val(idx);\n            td.find(\"input[name='side']\").val(side === \"left\" ? \"previous\":\"proposed\");\n            td.find(\"input[name='path']\").val(path);\n        }\n        commentCloud.find('textarea').focus();\n    });\n}\n\nfunction assingMenuAttributes(menu) {\n    const id = Math.floor(Math.random() * Math.floor(1000000));\n    menu.attr('data-write', menu.attr('data-write') + id);\n    menu.attr('data-preview', menu.attr('data-preview') + id);\n    menu.find('.item').each(function() {\n        const tab = $(this).attr('data-tab') + id;\n        $(this).attr('data-tab', tab);\n    });\n    menu.parent().find(\"*[data-tab='write']\").attr('data-tab', 'write' + id);\n    menu.parent().find(\"*[data-tab='preview']\").attr('data-tab', 'preview' + id);\n    initCommentPreviewTab(menu.parent(\".form\"));\n    return id;\n}\n\nfunction initRepositoryCollaboration() {\n    // Change collaborator access mode\n    $('.access-mode.menu .item').click(function () {\n        const $menu = $(this).parent();\n        $.post($menu.data('url'), {\n            \"_csrf\": csrf,\n            \"uid\": $menu.data('uid'),\n            \"mode\": $(this).data('value')\n        })\n    });\n}\n\nfunction initTeamSettings() {\n    // Change team access mode\n    $('.organization.new.team input[name=permission]').change(function () {\n        const val = $('input[name=permission]:checked', '.organization.new.team').val()\n        if (val === 'admin') {\n            $('.organization.new.team .team-units').hide();\n        } else {\n            $('.organization.new.team .team-units').show();\n        }\n    });\n}\n\nfunction initWikiForm() {\n    const $editArea = $('.repository.wiki textarea#edit_area');\n    if ($editArea.length > 0) {\n        const simplemde = new SimpleMDE({\n            autoDownloadFontAwesome: false,\n            element: $editArea[0],\n            forceSync: true,\n            previewRender: function (plainText, preview) { // Async method\n                setTimeout(function () {\n                    // FIXME: still send render request when return back to edit mode\n                    $.post($editArea.data('url'), {\n                            \"_csrf\": csrf,\n                            \"mode\": \"gfm\",\n                            \"context\": $editArea.data('context'),\n                            \"text\": plainText\n                        },\n                        function (data) {\n                            preview.innerHTML = '<div class=\"markdown ui segment\">' + data + '</div>';\n                            emojify.run($('.editor-preview')[0]);\n                        }\n                    );\n                }, 0);\n\n                return \"Loading...\";\n            },\n            renderingConfig: {\n                singleLineBreaks: false\n            },\n            indentWithTabs: false,\n            tabSize: 4,\n            spellChecker: false,\n            toolbar: [\"bold\", \"italic\", \"strikethrough\", \"|\",\n                \"heading-1\", \"heading-2\", \"heading-3\", \"heading-bigger\", \"heading-smaller\", \"|\",\n                {\n                    name: \"code-inline\",\n                    action: function(e){\n                        const cm = e.codemirror;\n                        const selection = cm.getSelection();\n                        cm.replaceSelection(\"`\" + selection + \"`\");\n                        if (!selection) {\n                            const cursorPos = cm.getCursor();\n                            cm.setCursor(cursorPos.line, cursorPos.ch - 1);\n                        }\n                        cm.focus();\n                    },\n                    className: \"fa fa-angle-right\",\n                    title: \"Add Inline Code\",\n                },\"code\", \"quote\", \"|\", {\n                    name: \"checkbox-empty\",\n                    action: function(e){\n                        const cm = e.codemirror;\n                        cm.replaceSelection(\"\\n- [ ] \" + cm.getSelection());\n                        cm.focus();\n                    },\n                    className: \"fa fa-square-o\",\n                    title: \"Add Checkbox (empty)\",\n                },\n                {\n                    name: \"checkbox-checked\",\n                    action: function(e){\n                        const cm = e.codemirror;\n                        cm.replaceSelection(\"\\n- [x] \" + cm.getSelection());\n                        cm.focus();\n                    },\n                    className: \"fa fa-check-square-o\",\n                    title: \"Add Checkbox (checked)\",\n                }, \"|\",\n                \"unordered-list\", \"ordered-list\", \"|\",\n                \"link\", \"image\", \"table\", \"horizontal-rule\", \"|\",\n                \"clean-block\", \"preview\", \"fullscreen\"]\n        })\n        $(simplemde.codemirror.getInputField()).addClass(\"js-quick-submit\");\n    }\n}\n\n// For IE\nString.prototype.endsWith = function (pattern) {\n    const d = this.length - pattern.length;\n    return d >= 0 && this.lastIndexOf(pattern) === d;\n};\n\n// Adding function to get the cursor position in a text field to jQuery object.\n$.fn.getCursorPosition = function () {\n    const el = $(this).get(0);\n    let pos = 0;\n    if ('selectionStart' in el) {\n        pos = el.selectionStart;\n    } else if ('selection' in document) {\n        el.focus();\n        const Sel = document.selection.createRange();\n        const SelLength = document.selection.createRange().text.length;\n        Sel.moveStart('character', -el.value.length);\n        pos = Sel.text.length - SelLength;\n    }\n    return pos;\n}\n\nfunction setSimpleMDE($editArea) {\n    if (codeMirrorEditor) {\n        codeMirrorEditor.toTextArea();\n        codeMirrorEditor = null;\n    }\n\n    if (simpleMDEditor) {\n        return true;\n    }\n\n    simpleMDEditor = new SimpleMDE({\n        autoDownloadFontAwesome: false,\n        element: $editArea[0],\n        forceSync: true,\n        renderingConfig: {\n            singleLineBreaks: false\n        },\n        indentWithTabs: false,\n        tabSize: 4,\n        spellChecker: false,\n        previewRender: function (plainText, preview) { // Async method\n            setTimeout(function () {\n                // FIXME: still send render request when return back to edit mode\n                $.post($editArea.data('url'), {\n                        \"_csrf\": csrf,\n                        \"mode\": \"gfm\",\n                        \"context\": $editArea.data('context'),\n                        \"text\": plainText\n                    },\n                    function (data) {\n                        preview.innerHTML = '<div class=\"markdown ui segment\">' + data + '</div>';\n                        emojify.run($('.editor-preview')[0]);\n                    }\n                );\n            }, 0);\n\n            return \"Loading...\";\n        },\n        toolbar: [\"bold\", \"italic\", \"strikethrough\", \"|\",\n            \"heading-1\", \"heading-2\", \"heading-3\", \"heading-bigger\", \"heading-smaller\", \"|\",\n            \"code\", \"quote\", \"|\",\n            \"unordered-list\", \"ordered-list\", \"|\",\n            \"link\", \"image\", \"table\", \"horizontal-rule\", \"|\",\n            \"clean-block\", \"preview\", \"fullscreen\", \"side-by-side\"]\n    });\n\n    return true;\n}\n\nfunction setCodeMirror($editArea) {\n    if (simpleMDEditor) {\n        simpleMDEditor.toTextArea();\n        simpleMDEditor = null;\n    }\n\n    if (codeMirrorEditor) {\n        return true;\n    }\n\n    codeMirrorEditor = CodeMirror.fromTextArea($editArea[0], {\n        lineNumbers: true\n    });\n    codeMirrorEditor.on(\"change\", function (cm, _change) {\n        $editArea.val(cm.getValue());\n    });\n\n    return true;\n}\n\nfunction initEditor() {\n    $('.js-quick-pull-choice-option').change(function () {\n        if ($(this).val() == 'commit-to-new-branch') {\n            $('.quick-pull-branch-name').show();\n            $('.quick-pull-branch-name input').prop('required',true);\n        } else {\n            $('.quick-pull-branch-name').hide();\n            $('.quick-pull-branch-name input').prop('required',false);\n        }\n        $('#commit-button').text($(this).attr('button_text'));\n    });\n\n    const $editFilename = $(\"#file-name\");\n    $editFilename.keyup(function (e) {\n        const $section = $('.breadcrumb span.section');\n        const $divider = $('.breadcrumb div.divider');\n        let value;\n        let parts;\n\n        if (e.keyCode == 8) {\n            if ($(this).getCursorPosition() == 0) {\n                if ($section.length > 0) {\n                    value = $section.last().find('a').text();\n                    $(this).val(value + $(this).val());\n                    $(this)[0].setSelectionRange(value.length, value.length);\n                    $section.last().remove();\n                    $divider.last().remove();\n                }\n            }\n        }\n        if (e.keyCode == 191) {\n            parts = $(this).val().split('/');\n            for (let i = 0; i < parts.length; ++i) {\n                value = parts[i];\n                if (i < parts.length - 1) {\n                    if (value.length) {\n                        $('<span class=\"section\"><a href=\"#\">' + value + '</a></span>').insertBefore($(this));\n                        $('<div class=\"divider\"> / </div>').insertBefore($(this));\n                    }\n                }\n                else {\n                    $(this).val(value);\n                }\n                $(this)[0].setSelectionRange(0, 0);\n            }\n        }\n        parts = [];\n        $('.breadcrumb span.section').each(function () {\n            const element = $(this);\n            if (element.find('a').length) {\n                parts.push(element.find('a').text());\n            } else {\n                parts.push(element.text());\n            }\n        });\n        if ($(this).val())\n            parts.push($(this).val());\n        $('#tree_path').val(parts.join('/'));\n    }).trigger('keyup');\n\n    const $editArea = $('.repository.editor textarea#edit_area');\n    if (!$editArea.length)\n        return;\n\n    const markdownFileExts = $editArea.data(\"markdown-file-exts\").split(\",\");\n    const lineWrapExtensions = $editArea.data(\"line-wrap-extensions\").split(\",\");\n\n    $editFilename.on(\"keyup\", function () {\n        const val = $editFilename.val();\n        let mode, spec, extension, extWithDot, dataUrl, apiCall;\n\n        extension = extWithDot = \"\";\n        const m = /.+\\.([^.]+)$/.exec(val);\n        if (m) {\n            extension = m[1];\n            extWithDot = \".\" + extension;\n        }\n\n        const info = CodeMirror.findModeByExtension(extension);\n        const previewLink = $('a[data-tab=preview]');\n        if (info) {\n            mode = info.mode;\n            spec = info.mime;\n            apiCall = mode;\n        }\n        else {\n            apiCall = extension\n        }\n\n        if (previewLink.length && apiCall && previewFileModes && previewFileModes.length && previewFileModes.indexOf(apiCall) >= 0) {\n            dataUrl = previewLink.data('url');\n            previewLink.data('url', dataUrl.replace(/(.*)\\/.*/i, '$1/' + mode));\n            previewLink.show();\n        }\n        else {\n            previewLink.hide();\n        }\n\n        // If this file is a Markdown extensions, we will load that editor and return\n        if (markdownFileExts.indexOf(extWithDot) >= 0) {\n            if (setSimpleMDE($editArea)) {\n                return;\n            }\n        }\n\n        // Else we are going to use CodeMirror\n        if (!codeMirrorEditor && !setCodeMirror($editArea)) {\n            return;\n        }\n\n        if (mode) {\n            codeMirrorEditor.setOption(\"mode\", spec);\n            CodeMirror.autoLoadMode(codeMirrorEditor, mode);\n        }\n\n        if (lineWrapExtensions.indexOf(extWithDot) >= 0) {\n            codeMirrorEditor.setOption(\"lineWrapping\", true);\n        }\n        else {\n            codeMirrorEditor.setOption(\"lineWrapping\", false);\n        }\n\n        // get the filename without any folder\n        let value = $editFilename.val();\n        if (value.length === 0) {\n            return;\n        }\n        value = value.split('/');\n        value = value[value.length - 1];\n\n        $.getJSON($editFilename.data('ec-url-prefix')+value, function(editorconfig) {\n            if (editorconfig.indent_style === 'tab') {\n                codeMirrorEditor.setOption(\"indentWithTabs\", true);\n                codeMirrorEditor.setOption('extraKeys', {});\n            } else {\n                codeMirrorEditor.setOption(\"indentWithTabs\", false);\n                // required because CodeMirror doesn't seems to use spaces correctly for {\"indentWithTabs\": false}:\n                // - https://github.com/codemirror/CodeMirror/issues/988\n                // - https://codemirror.net/doc/manual.html#keymaps\n                codeMirrorEditor.setOption('extraKeys', {\n                    Tab: function(cm) {\n                        const spaces = Array(parseInt(cm.getOption(\"indentUnit\")) + 1).join(\" \");\n                        cm.replaceSelection(spaces);\n                    }\n                });\n            }\n            codeMirrorEditor.setOption(\"indentUnit\", editorconfig.indent_size || 4);\n            codeMirrorEditor.setOption(\"tabSize\", editorconfig.tab_width || 4);\n        });\n    }).trigger('keyup');\n\n    // Using events from https://github.com/codedance/jquery.AreYouSure#advanced-usage\n    // to enable or disable the commit button\n    const $commitButton = $('#commit-button');\n    const $editForm = $('.ui.edit.form');\n    const dirtyFileClass = 'dirty-file';\n\n    // Disabling the button at the start\n    $commitButton.prop('disabled', true);\n\n    // Registering a custom listener for the file path and the file content\n    $editForm.areYouSure({\n        silent: true,\n        dirtyClass: dirtyFileClass,\n        fieldSelector: ':input:not(.commit-form-wrapper :input)',\n        change: function () {\n            const dirty = $(this).hasClass(dirtyFileClass);\n            $commitButton.prop('disabled', !dirty);\n        }\n    });\n\n    $commitButton.click(function (event) {\n        // A modal which asks if an empty file should be committed\n        if ($editArea.val().length === 0) {\n            $('#edit-empty-content-modal').modal({\n                onApprove: function () {\n                    $('.edit.form').submit();\n                }\n            }).modal('show');\n            event.preventDefault();\n        }\n    });\n}\n\nfunction initOrganization() {\n    if ($('.organization').length == 0) {\n        return;\n    }\n\n    // Options\n    if ($('.organization.settings.options').length > 0) {\n        $('#org_name').keyup(function () {\n            const $prompt = $('#org-name-change-prompt');\n            if ($(this).val().toString().toLowerCase() != $(this).data('org-name').toString().toLowerCase()) {\n                $prompt.show();\n            } else {\n                $prompt.hide();\n            }\n        });\n    }\n}\n\nfunction initUserSettings() {\n    // Options\n    if ($('.user.settings.profile').length > 0) {\n        $('#username').keyup(function () {\n            const $prompt = $('#name-change-prompt');\n            if ($(this).val().toString().toLowerCase() != $(this).data('name').toString().toLowerCase()) {\n                $prompt.show();\n            } else {\n                $prompt.hide();\n            }\n        });\n    }\n}\n\nfunction initWebhook() {\n    if ($('.new.webhook').length == 0) {\n        return;\n    }\n\n    $('.events.checkbox input').change(function () {\n        if ($(this).is(':checked')) {\n            $('.events.fields').show();\n        }\n    });\n    $('.non-events.checkbox input').change(function () {\n        if ($(this).is(':checked')) {\n            $('.events.fields').hide();\n        }\n    });\n\n    const updateContentType = function () {\n        const visible = $('#http_method').val() === 'POST';\n        $('#content_type').parent().parent()[visible ? 'show' : 'hide']();\n    };\n    updateContentType();\n    $('#http_method').change(function () {\n        updateContentType();\n    });\n\n    // Test delivery\n    $('#test-delivery').click(function () {\n        const $this = $(this);\n        $this.addClass('loading disabled');\n        $.post($this.data('link'), {\n            \"_csrf\": csrf\n        }).done(\n            setTimeout(function () {\n                window.location.href = $this.data('redirect');\n            }, 5000)\n        )\n    });\n}\n\nfunction initAdmin() {\n    if ($('.admin').length == 0) {\n        return;\n    }\n\n    // New user\n    if ($('.admin.new.user').length > 0 ||\n        $('.admin.edit.user').length > 0) {\n        $('#login_type').change(function () {\n            if ($(this).val().substring(0, 1) == '0') {\n                $('#login_name').removeAttr('required');\n                $('.non-local').hide();\n                $('.local').show();\n                $('#user_name').focus();\n\n                if ($(this).data('password') == \"required\") {\n                    $('#password').attr('required', 'required');\n                }\n\n            } else {\n                $('#login_name').attr('required', 'required');\n                $('.non-local').show();\n                $('.local').hide();\n                $('#login_name').focus();\n\n                $('#password').removeAttr('required');\n            }\n        });\n    }\n\n    function onSecurityProtocolChange() {\n        if ($('#security_protocol').val() > 0) {\n            $('.has-tls').show();\n        } else {\n            $('.has-tls').hide();\n        }\n    }\n\n    function onUsePagedSearchChange() {\n        if ($('#use_paged_search').prop('checked')) {\n            $('.search-page-size').show()\n                .find('input').attr('required', 'required');\n        } else {\n            $('.search-page-size').hide()\n                .find('input').removeAttr('required');\n        }\n    }\n\n    function onOAuth2Change() {\n        $('.open_id_connect_auto_discovery_url, .oauth2_use_custom_url').hide();\n        $('.open_id_connect_auto_discovery_url input[required]').removeAttr('required');\n\n        const provider = $('#oauth2_provider').val();\n        switch (provider) {\n            case 'github':\n            case 'gitlab':\n            case 'gitea':\n                $('.oauth2_use_custom_url').show();\n                break;\n            case 'openidConnect':\n                $('.open_id_connect_auto_discovery_url input').attr('required', 'required');\n                $('.open_id_connect_auto_discovery_url').show();\n                break;\n        }\n        onOAuth2UseCustomURLChange();\n    }\n\n    function onOAuth2UseCustomURLChange() {\n        const provider = $('#oauth2_provider').val();\n        $('.oauth2_use_custom_url_field').hide();\n        $('.oauth2_use_custom_url_field input[required]').removeAttr('required');\n\n        if ($('#oauth2_use_custom_url').is(':checked')) {\n            if (!$('#oauth2_token_url').val()) {\n                $('#oauth2_token_url').val($('#' + provider + '_token_url').val());\n            }\n            if (!$('#oauth2_auth_url').val()) {\n                $('#oauth2_auth_url').val($('#' + provider + '_auth_url').val());\n            }\n            if (!$('#oauth2_profile_url').val()) {\n                $('#oauth2_profile_url').val($('#' + provider + '_profile_url').val());\n            }\n            if (!$('#oauth2_email_url').val()) {\n                $('#oauth2_email_url').val($('#' + provider + '_email_url').val());\n            }\n            switch (provider) {\n                case 'github':\n                    $('.oauth2_token_url input, .oauth2_auth_url input, .oauth2_profile_url input, .oauth2_email_url input').attr('required', 'required');\n                    $('.oauth2_token_url, .oauth2_auth_url, .oauth2_profile_url, .oauth2_email_url').show();\n                    break;\n                case 'gitea':\n                case 'gitlab':\n                    $('.oauth2_token_url input, .oauth2_auth_url input, .oauth2_profile_url input').attr('required', 'required');\n                    $('.oauth2_token_url, .oauth2_auth_url, .oauth2_profile_url').show();\n                    $('#oauth2_email_url').val('');\n                    break;\n            }\n        }\n    }\n\n    // New authentication\n    if ($('.admin.new.authentication').length > 0) {\n        $('#auth_type').change(function () {\n            $('.ldap, .dldap, .smtp, .pam, .oauth2, .has-tls .search-page-size').hide();\n\n            $('.ldap input[required], .binddnrequired input[required], .dldap input[required], .smtp input[required], .pam input[required], .oauth2 input[required], .has-tls input[required]').removeAttr('required');\n            $('.binddnrequired').removeClass(\"required\");\n\n            const authType = $(this).val();\n            switch (authType) {\n                case '2':     // LDAP\n                    $('.ldap').show();\n                    $('.binddnrequired input, .ldap div.required:not(.dldap) input').attr('required', 'required');\n                    $('.binddnrequired').addClass(\"required\");\n                    break;\n                case '3':     // SMTP\n                    $('.smtp').show();\n                    $('.has-tls').show();\n                    $('.smtp div.required input, .has-tls').attr('required', 'required');\n                    break;\n                case '4':     // PAM\n                    $('.pam').show();\n                    $('.pam input').attr('required', 'required');\n                    break;\n                case '5':     // LDAP\n                    $('.dldap').show();\n                    $('.dldap div.required:not(.ldap) input').attr('required', 'required');\n                    break;\n                case '6':     // OAuth2\n                    $('.oauth2').show();\n                    $('.oauth2 div.required:not(.oauth2_use_custom_url,.oauth2_use_custom_url_field,.open_id_connect_auto_discovery_url) input').attr('required', 'required');\n                    onOAuth2Change();\n                    break;\n            }\n            if (authType == '2' || authType == '5') {\n                onSecurityProtocolChange()\n            }\n            if (authType == '2') {\n                onUsePagedSearchChange();\n            }\n        });\n        $('#auth_type').change();\n        $('#security_protocol').change(onSecurityProtocolChange);\n        $('#use_paged_search').change(onUsePagedSearchChange);\n        $('#oauth2_provider').change(onOAuth2Change);\n        $('#oauth2_use_custom_url').change(onOAuth2UseCustomURLChange);\n    }\n    // Edit authentication\n    if ($('.admin.edit.authentication').length > 0) {\n        const authType = $('#auth_type').val();\n        if (authType == '2' || authType == '5') {\n            $('#security_protocol').change(onSecurityProtocolChange);\n            if (authType == '2') {\n                $('#use_paged_search').change(onUsePagedSearchChange);\n            }\n        } else if (authType == '6') {\n            $('#oauth2_provider').change(onOAuth2Change);\n            $('#oauth2_use_custom_url').change(onOAuth2UseCustomURLChange);\n            onOAuth2Change();\n        }\n    }\n\n    // Notice\n    if ($('.admin.notice')) {\n        const $detailModal = $('#detail-modal');\n\n        // Attach view detail modals\n        $('.view-detail').click(function () {\n            $detailModal.find('.content p').text($(this).data('content'));\n            $detailModal.modal('show');\n            return false;\n        });\n\n        // Select actions\n        const $checkboxes = $('.select.table .ui.checkbox');\n        $('.select.action').click(function () {\n            switch ($(this).data('action')) {\n                case 'select-all':\n                    $checkboxes.checkbox('check');\n                    break;\n                case 'deselect-all':\n                    $checkboxes.checkbox('uncheck');\n                    break;\n                case 'inverse':\n                    $checkboxes.checkbox('toggle');\n                    break;\n            }\n        });\n        $('#delete-selection').click(function () {\n            const $this = $(this);\n            $this.addClass(\"loading disabled\");\n            const ids = [];\n            $checkboxes.each(function () {\n                if ($(this).checkbox('is checked')) {\n                    ids.push($(this).data('id'));\n                }\n            });\n            $.post($this.data('link'), {\n                \"_csrf\": csrf,\n                \"ids\": ids\n            }).done(function () {\n                window.location.href = $this.data('redirect');\n            });\n        });\n    }\n}\n\nfunction buttonsClickOnEnter() {\n    $('.ui.button').keypress(function (e) {\n        if (e.keyCode == 13 || e.keyCode == 32) // enter key or space bar\n            $(this).click();\n    });\n}\n\nfunction searchUsers() {\n    const $searchUserBox = $('#search-user-box');\n    $searchUserBox.search({\n        minCharacters: 2,\n        apiSettings: {\n            url: suburl + '/api/v1/users/search?q={query}',\n            onResponse: function(response) {\n                const items = [];\n                $.each(response.data, function (_i, item) {\n                    let title = item.login;\n                    if (item.full_name && item.full_name.length > 0) {\n                        title += ' (' + htmlEncode(item.full_name) + ')';\n                    }\n                    items.push({\n                        title: title,\n                        image: item.avatar_url\n                    })\n                });\n\n                return { results: items }\n            }\n        },\n        searchFields: ['login', 'full_name'],\n        showNoResults: false\n    });\n}\n\nfunction searchTeams() {\n    const $searchTeamBox = $('#search-team-box');\n    $searchTeamBox.search({\n        minCharacters: 2,\n        apiSettings: {\n            url: suburl + '/api/v1/orgs/' + $searchTeamBox.data('org') + '/teams/search?q={query}',\n            headers: {\"X-Csrf-Token\": csrf},\n            onResponse: function(response) {\n                const items = [];\n                $.each(response.data, function (_i, item) {\n                    const title = item.name + ' (' + item.permission + ' access)';\n                    items.push({\n                        title: title,\n                    })\n                });\n\n                return { results: items }\n            }\n        },\n        searchFields: ['name', 'description'],\n        showNoResults: false\n    });\n}\n\nfunction searchRepositories() {\n    const $searchRepoBox = $('#search-repo-box');\n    $searchRepoBox.search({\n        minCharacters: 2,\n        apiSettings: {\n            url: suburl + '/api/v1/repos/search?q={query}&uid=' + $searchRepoBox.data('uid'),\n            onResponse: function(response) {\n                const items = [];\n                $.each(response.data, function (_i, item) {\n                    items.push({\n                        title: item.full_name.split(\"/\")[1],\n                        description: item.full_name\n                    })\n                });\n\n                return { results: items }\n            }\n        },\n        searchFields: ['full_name'],\n        showNoResults: false\n    });\n}\n\nfunction initCodeView() {\n    if ($('.code-view .linenums').length > 0) {\n        $(document).on('click', '.lines-num span', function (e) {\n            const $select = $(this);\n            const $list = $select.parent().siblings('.lines-code').find('ol.linenums > li');\n            selectRange($list, $list.filter('[rel=' + $select.attr('id') + ']'), (e.shiftKey ? $list.filter('.active').eq(0) : null));\n            deSelect();\n        });\n\n        $(window).on('hashchange', function () {\n            let m = window.location.hash.match(/^#(L\\d+)-(L\\d+)$/);\n            const $list = $('.code-view ol.linenums > li');\n            let $first;\n            if (m) {\n                $first = $list.filter('.' + m[1]);\n                selectRange($list, $first, $list.filter('.' + m[2]));\n                $(\"html, body\").scrollTop($first.offset().top - 200);\n                return;\n            }\n            m = window.location.hash.match(/^#(L|n)(\\d+)$/);\n            if (m) {\n                $first = $list.filter('.L' + m[2]);\n                selectRange($list, $first);\n                $(\"html, body\").scrollTop($first.offset().top - 200);\n            }\n        }).trigger('hashchange');\n    }\n}\n\nfunction initU2FAuth() {\n    if($('#wait-for-key').length === 0) {\n        return\n    }\n    u2fApi.ensureSupport()\n        .then(function () {\n            $.getJSON(suburl + '/user/u2f/challenge').success(function(req) {\n                u2fApi.sign(req.appId, req.challenge, req.registeredKeys, 30)\n                    .then(u2fSigned)\n                    .catch(function (err) {\n                        if(err === undefined) {\n                            u2fError(1);\n                            return\n                        }\n                        u2fError(err.metaData.code);\n                    });\n            });\n        }).catch(function () {\n            // Fallback in case browser do not support U2F\n            window.location.href = suburl + \"/user/two_factor\"\n        })\n}\nfunction u2fSigned(resp) {\n    $.ajax({\n        url: suburl + '/user/u2f/sign',\n        type: \"POST\",\n        headers: {\"X-Csrf-Token\": csrf},\n        data: JSON.stringify(resp),\n        contentType: \"application/json; charset=utf-8\",\n    }).done(function(res){\n        window.location.replace(res);\n    }).fail(function () {\n        u2fError(1);\n    });\n}\n\nfunction u2fRegistered(resp) {\n    if (checkError(resp)) {\n        return;\n    }\n    $.ajax({\n        url: suburl + '/user/settings/security/u2f/register',\n        type: \"POST\",\n        headers: {\"X-Csrf-Token\": csrf},\n        data: JSON.stringify(resp),\n        contentType: \"application/json; charset=utf-8\",\n        success: function(){\n            reload();\n        },\n        fail: function () {\n            u2fError(1);\n        }\n    });\n}\n\nfunction checkError(resp) {\n    if (!('errorCode' in resp)) {\n        return false;\n    }\n    if (resp.errorCode === 0) {\n        return false;\n    }\n    u2fError(resp.errorCode);\n    return true;\n}\n\n\nfunction u2fError(errorType) {\n    const u2fErrors = {\n        'browser': $('#unsupported-browser'),\n        1: $('#u2f-error-1'),\n        2: $('#u2f-error-2'),\n        3: $('#u2f-error-3'),\n        4: $('#u2f-error-4'),\n        5: $('.u2f-error-5')\n    };\n    u2fErrors[errorType].removeClass('hide');\n    for(const type in u2fErrors){\n        if(type != errorType){\n            u2fErrors[type].addClass('hide');\n        }\n    }\n    $('#u2f-error').modal('show');\n}\n\nfunction initU2FRegister() {\n    $('#register-device').modal({allowMultiple: false});\n    $('#u2f-error').modal({allowMultiple: false});\n    $('#register-security-key').on('click', function(e) {\n        e.preventDefault();\n        u2fApi.ensureSupport()\n            .then(u2fRegisterRequest)\n            .catch(function() {\n                u2fError('browser');\n            })\n    })\n}\n\nfunction u2fRegisterRequest() {\n    $.post(suburl + \"/user/settings/security/u2f/request_register\", {\n        \"_csrf\": csrf,\n        \"name\": $('#nickname').val()\n    }).success(function(req) {\n        $(\"#nickname\").closest(\"div.field\").removeClass(\"error\");\n        $('#register-device').modal('show');\n        if(req.registeredKeys === null) {\n            req.registeredKeys = []\n        }\n        u2fApi.register(req.appId, req.registerRequests, req.registeredKeys, 30)\n            .then(u2fRegistered)\n            .catch(function (reason) {\n                if(reason === undefined) {\n                    u2fError(1);\n                    return\n                }\n                u2fError(reason.metaData.code);\n            });\n    }).fail(function(xhr) {\n        if(xhr.status === 409) {\n            $(\"#nickname\").closest(\"div.field\").addClass(\"error\");\n        }\n    });\n}\n\nfunction initWipTitle() {\n    $(\".title_wip_desc > a\").click(function (e) {\n        e.preventDefault();\n\n        const $issueTitle = $(\"#issue_title\");\n        $issueTitle.focus();\n        const value = $issueTitle.val().trim().toUpperCase();\n\n        for (const i in wipPrefixes) {\n            if (value.startsWith(wipPrefixes[i].toUpperCase())) {\n                return;\n            }\n        }\n\n        $issueTitle.val(wipPrefixes[0] + \" \" + $issueTitle.val());\n    });\n}\n\nfunction initTemplateSearch() {\n    const $repoTemplate = $(\"#repo_template\");\n    const checkTemplate = function() {\n        const $templateUnits = $(\"#template_units\");\n        const $nonTemplate = $(\"#non_template\");\n        if ($repoTemplate.val() !== \"\") {\n            $templateUnits.show();\n            $nonTemplate.hide();\n        } else {\n            $templateUnits.hide();\n            $nonTemplate.show();\n        }\n    };\n    $repoTemplate.change(checkTemplate);\n    checkTemplate();\n\n    const changeOwner = function() {\n        $(\"#repo_template_search\")\n            .dropdown({\n                apiSettings: {\n                    url: suburl + '/api/v1/repos/search?q={query}&template=true&priority_owner_id=' + $(\"#uid\").val(),\n                    onResponse: function(response) {\n                        const filteredResponse = {'success': true, 'results': []};\n                        filteredResponse.results.push({\n                            'name': '',\n                            'value': ''\n                        });\n                        // Parse the response from the api to work with our dropdown\n                        $.each(response.data, function(_r, repo) {\n                            filteredResponse.results.push({\n                                'name'  : htmlEncode(repo.full_name) ,\n                                'value' : repo.id\n                            });\n                        });\n                        return filteredResponse;\n                    },\n                    cache: false,\n                },\n\n                fullTextSearch: true\n            });\n    };\n    $(\"#uid\").change(changeOwner);\n    changeOwner();\n}\n\n$(document).ready(function () {\n    csrf = $('meta[name=_csrf]').attr(\"content\");\n    suburl = $('meta[name=_suburl]').attr(\"content\");\n\n    // Show exact time\n    $('.time-since').each(function () {\n        $(this).addClass('poping up').attr('data-content', $(this).attr('title')).attr('data-variation', 'inverted tiny').attr('title', '');\n    });\n\n    // Semantic UI modules.\n    $('.dropdown:not(.custom)').dropdown();\n    $('.jump.dropdown').dropdown({\n        action: 'hide',\n        onShow: function () {\n            $('.poping.up').popup('hide');\n        }\n    });\n    $('.slide.up.dropdown').dropdown({\n        transition: 'slide up'\n    });\n    $('.upward.dropdown').dropdown({\n        direction: 'upward'\n    });\n    $('.ui.accordion').accordion();\n    $('.ui.checkbox').checkbox();\n    $('.ui.progress').progress({\n        showActivity: false\n    });\n    $('.poping.up').popup();\n    $('.top.menu .poping.up').popup({\n        onShow: function () {\n            if ($('.top.menu .menu.transition').hasClass('visible')) {\n                return false;\n            }\n        }\n    });\n    $('.tabular.menu .item').tab();\n    $('.tabable.menu .item').tab();\n\n    $('.toggle.button').click(function () {\n        $($(this).data('target')).slideToggle(100);\n    });\n\n    // make table <tr> element clickable like a link\n    $('tr[data-href]').click(function() {\n        window.location = $(this).data('href');\n    });\n\n    // Highlight JS\n    if (typeof hljs != 'undefined') {\n        const nodes = [].slice.call(document.querySelectorAll('pre code') || []);\n        for (let i = 0; i < nodes.length; i++) {\n            hljs.highlightBlock(nodes[i]);\n        }\n    }\n\n    // Dropzone\n    const $dropzone = $('#dropzone');\n    if ($dropzone.length > 0) {\n        const filenameDict = {};\n\n        new Dropzone(\"#dropzone\", {\n            url: $dropzone.data('upload-url'),\n            headers: {\"X-Csrf-Token\": csrf},\n            maxFiles: $dropzone.data('max-file'),\n            maxFilesize: $dropzone.data('max-size'),\n            acceptedFiles: ($dropzone.data('accepts') === '*/*') ? null : $dropzone.data('accepts'),\n            addRemoveLinks: true,\n            dictDefaultMessage: $dropzone.data('default-message'),\n            dictInvalidFileType: $dropzone.data('invalid-input-type'),\n            dictFileTooBig: $dropzone.data('file-too-big'),\n            dictRemoveFile: $dropzone.data('remove-file'),\n            init: function () {\n                this.on(\"success\", function (file, data) {\n                    filenameDict[file.name] = data.uuid;\n                    const input = $('<input id=\"' + data.uuid + '\" name=\"files\" type=\"hidden\">').val(data.uuid);\n                    $('.files').append(input);\n                });\n                this.on(\"removedfile\", function (file) {\n                    if (file.name in filenameDict) {\n                        $('#' + filenameDict[file.name]).remove();\n                    }\n                    if ($dropzone.data('remove-url') && $dropzone.data('csrf')) {\n                        $.post($dropzone.data('remove-url'), {\n                            file: filenameDict[file.name],\n                            _csrf: $dropzone.data('csrf')\n                        });\n                    }\n                })\n            },\n        });\n    }\n\n    // Emojify\n    emojify.setConfig({\n        img_dir: suburl + '/vendor/plugins/emojify/images',\n        ignore_emoticons: true\n    });\n    const hasEmoji = document.getElementsByClassName('has-emoji');\n    for (let i = 0; i < hasEmoji.length; i++) {\n        emojify.run(hasEmoji[i]);\n        for (let j = 0; j < hasEmoji[i].childNodes.length; j++) {\n            if (hasEmoji[i].childNodes[j].nodeName === \"A\") {\n                emojify.run(hasEmoji[i].childNodes[j])\n            }\n        }\n    }\n\n    // Clipboard JS\n    const clipboard = new Clipboard('.clipboard');\n    clipboard.on('success', function (e) {\n        e.clearSelection();\n\n        $('#' + e.trigger.getAttribute('id')).popup('destroy');\n        e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-success'))\n        $('#' + e.trigger.getAttribute('id')).popup('show');\n        e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-original'))\n    });\n\n    clipboard.on('error', function (e) {\n        $('#' + e.trigger.getAttribute('id')).popup('destroy');\n        e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-error'))\n        $('#' + e.trigger.getAttribute('id')).popup('show');\n        e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-original'))\n    });\n\n    // Helpers.\n    $('.delete-button').click(showDeletePopup);\n    $('.add-all-button').click(showAddAllPopup);\n\n    $('.delete-branch-button').click(showDeletePopup);\n\n    $('.undo-button').click(function() {\n        const $this = $(this);\n        $.post($this.data('url'), {\n            \"_csrf\": csrf,\n            \"id\": $this.data(\"id\")\n        }).done(function(data) {\n            window.location.href = data.redirect;\n        });\n    });\n    $('.show-panel.button').click(function () {\n        $($(this).data('panel')).show();\n    });\n    $('.show-modal.button').click(function () {\n        $($(this).data('modal')).modal('show');\n    });\n    $('.delete-post.button').click(function () {\n        const $this = $(this);\n        $.post($this.data('request-url'), {\n            \"_csrf\": csrf\n        }).done(function () {\n            window.location.href = $this.data('done-url');\n        });\n    });\n\n    // Set anchor.\n    $('.markdown').each(function () {\n        const headers = {};\n        $(this).find('h1, h2, h3, h4, h5, h6').each(function () {\n            let node = $(this);\n            const val = encodeURIComponent(node.text().toLowerCase().replace(/[^\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w\\- ]/g, '').replace(/[ ]/g, '-'));\n            let name = val;\n            if (headers[val] > 0) {\n                name = val + '-' + headers[val];\n            }\n            if (headers[val] == undefined) {\n                headers[val] = 1;\n            } else {\n                headers[val] += 1;\n            }\n            node = node.wrap('<div id=\"' + name + '\" class=\"anchor-wrap\" ></div>');\n            node.append('<a class=\"anchor\" href=\"#' + name + '\"><span class=\"octicon octicon-link\"></span></a>');\n        });\n    });\n\n    $('.issue-checkbox').click(function() {\n        const numChecked = $('.issue-checkbox').children('input:checked').length;\n        if (numChecked > 0) {\n            $('#issue-filters').addClass(\"hide\");\n            $('#issue-actions').removeClass(\"hide\");\n        } else {\n            $('#issue-filters').removeClass(\"hide\");\n            $('#issue-actions').addClass(\"hide\");\n        }\n    });\n\n    $('.issue-action').click(function () {\n        let action = this.dataset.action;\n        let elementId = this.dataset.elementId;\n        const issueIDs = $('.issue-checkbox').children('input:checked').map(function() {\n            return this.dataset.issueId;\n        }).get().join();\n        const url = this.dataset.url;\n        if (elementId === '0' && url.substr(-9) === '/assignee'){\n            elementId = '';\n            action = 'clear';\n        }\n        updateIssuesMeta(url, action, issueIDs, elementId).then(function() {\n            // NOTICE: This reset of checkbox state targets Firefox caching behaviour, as the checkboxes stay checked after reload\n            if (action === \"close\" || action === \"open\" ){\n                //uncheck all checkboxes\n                $('.issue-checkbox input[type=\"checkbox\"]').each(function(_,e){ e.checked = false; });\n            }\n            reload();\n        });\n    });\n\n    // NOTICE: This event trigger targets Firefox caching behaviour, as the checkboxes stay checked after reload\n    // trigger ckecked event, if checkboxes are checked on load\n    $('.issue-checkbox input[type=\"checkbox\"]:checked').first().each(function(_,e) {\n        e.checked = false;\n        $(e).click();\n    });\n\n    buttonsClickOnEnter();\n    searchUsers();\n    searchTeams();\n    searchRepositories();\n\n    initCommentForm();\n    initInstall();\n    initRepository();\n    initMigration();\n    initWikiForm();\n    initEditForm();\n    initEditor();\n    initOrganization();\n    initWebhook();\n    initAdmin();\n    initCodeView();\n    initVueApp();\n    initTeamSettings();\n    initCtrlEnterSubmit();\n    initNavbarContentToggle();\n    initTopicbar();\n    initU2FAuth();\n    initU2FRegister();\n    initIssueList();\n    initWipTitle();\n    initPullRequestReview();\n    initRepoStatusChecker();\n    initTemplateSearch();\n\n    // Repo clone url.\n    if ($('#repo-clone-url').length > 0) {\n        switch (localStorage.getItem('repo-clone-protocol')) {\n            case 'ssh':\n                if ($('#repo-clone-ssh').click().length === 0) {\n                    $('#repo-clone-https').click();\n                }\n                break;\n            default:\n                $('#repo-clone-https').click();\n                break;\n        }\n    }\n\n    const routes = {\n        'div.user.settings': initUserSettings,\n        'div.repository.settings.collaboration': initRepositoryCollaboration\n    };\n\n    let selector;\n    for (selector in routes) {\n        if ($(selector).length > 0) {\n            routes[selector]();\n            break;\n        }\n    }\n\n    const $cloneAddr = $('#clone_addr');\n    $cloneAddr.change(function() {\n        const $repoName = $('#repo_name');\n        if ($cloneAddr.val().length > 0 && $repoName.val().length === 0) { // Only modify if repo_name input is blank\n            $repoName.val($cloneAddr.val().match(/^(.*\\/)?((.+?)(\\.git)?)$/)[3]);\n        }\n    });\n});\n\nfunction changeHash(hash) {\n    if (history.pushState) {\n        history.pushState(null, null, hash);\n    }\n    else {\n        location.hash = hash;\n    }\n}\n\nfunction deSelect() {\n    if (window.getSelection) {\n        window.getSelection().removeAllRanges();\n    } else {\n        document.selection.empty();\n    }\n}\n\nfunction selectRange($list, $select, $from) {\n    $list.removeClass('active');\n    if ($from) {\n        let a = parseInt($select.attr('rel').substr(1));\n        let b = parseInt($from.attr('rel').substr(1));\n        let c;\n        if (a != b) {\n            if (a > b) {\n                c = a;\n                a = b;\n                b = c;\n            }\n            const classes = [];\n            for (let i = a; i <= b; i++) {\n                classes.push('.L' + i);\n            }\n            $list.filter(classes.join(',')).addClass('active');\n            changeHash('#L' + a + '-' + 'L' + b);\n            return\n        }\n    }\n    $select.addClass('active');\n    changeHash('#' + $select.attr('rel'));\n}\n\n$(function () {\n    // Warn users that try to leave a page after entering data into a form.\n    // Except on sign-in pages, and for forms marked as 'ignore-dirty'.\n    if ($('.user.signin').length === 0) {\n      $('form:not(.ignore-dirty)').areYouSure();\n    }\n\n    // Parse SSH Key\n    $(\"#ssh-key-content\").on('change paste keyup',function(){\n        const arrays = $(this).val().split(\" \");\n        const $title = $(\"#ssh-key-title\")\n        if ($title.val() === \"\" && arrays.length === 3 && arrays[2] !== \"\") {\n            $title.val(arrays[2]);\n        }\n    });\n});\n\nfunction showDeletePopup() {\n    const $this = $(this);\n    let filter = \"\";\n    if ($this.attr(\"id\")) {\n        filter += \"#\" + $this.attr(\"id\")\n    }\n\n    const dialog = $('.delete.modal' + filter);\n    dialog.find('.name').text($this.data('name'));\n\n    dialog.modal({\n        closable: false,\n        onApprove: function() {\n            if ($this.data('type') == \"form\") {\n                $($this.data('form')).submit();\n                return;\n            }\n\n            $.post($this.data('url'), {\n                \"_csrf\": csrf,\n                \"id\": $this.data(\"id\")\n            }).done(function(data) {\n                window.location.href = data.redirect;\n            });\n        }\n    }).modal('show');\n    return false;\n}\n\nfunction showAddAllPopup() {\n    const $this = $(this);\n    let filter = \"\";\n    if ($this.attr(\"id\")) {\n        filter += \"#\" + $this.attr(\"id\")\n    }\n\n    const dialog = $('.addall.modal' + filter);\n    dialog.find('.name').text($this.data('name'));\n\n    dialog.modal({\n        closable: false,\n        onApprove: function() {\n            if ($this.data('type') == \"form\") {\n                $($this.data('form')).submit();\n                return;\n            }\n\n            $.post($this.data('url'), {\n                \"_csrf\": csrf,\n                \"id\": $this.data(\"id\")\n            }).done(function(data) {\n                window.location.href = data.redirect;\n            });\n        }\n    }).modal('show');\n    return false;\n}\n\nfunction initVueComponents(){\n    const vueDelimeters = ['${', '}'];\n\n    Vue.component('repo-search', {\n        delimiters: vueDelimeters,\n\n        props: {\n            searchLimit: {\n                type: Number,\n                default: 10\n            },\n            suburl: {\n                type: String,\n                required: true\n            },\n            uid: {\n                type: Number,\n                required: true\n            },\n            organizations: {\n                type: Array,\n                default: []\n            },\n            isOrganization: {\n                type: Boolean,\n                default: true\n            },\n            canCreateOrganization: {\n                type: Boolean,\n                default: false\n            },\n            organizationsTotalCount: {\n                type: Number,\n                default: 0\n            },\n            moreReposLink: {\n                type: String,\n                default: ''\n            }\n        },\n\n        data: function() {\n            return {\n                tab: 'repos',\n                repos: [],\n                reposTotalCount: 0,\n                reposFilter: 'sources',\n                searchQuery: '',\n                isLoading: false,\n                repoTypes: {\n                    'all': {\n                        count: 0,\n                        searchMode: '',\n                    },\n                    'forks': {\n                        count: 0,\n                        searchMode: 'fork',\n                    },\n                    'mirrors': {\n                        count: 0,\n                        searchMode: 'mirror',\n                    },\n                    'sources': {\n                        count: 0,\n                        searchMode: 'source',\n                    },\n                    'collaborative': {\n                        count: 0,\n                        searchMode: 'collaborative',\n                    },\n                }\n            }\n        },\n\n        computed: {\n            showMoreReposLink: function() {\n                return this.repos.length > 0 && this.repos.length < this.repoTypes[this.reposFilter].count;\n            },\n            searchURL: function() {\n                return this.suburl + '/api/v1/repos/search?sort=updated&order=desc&uid=' + this.uid + '&q=' + this.searchQuery\n                                   + '&limit=' + this.searchLimit + '&mode=' + this.repoTypes[this.reposFilter].searchMode\n                                   + (this.reposFilter !== 'all' ? '&exclusive=1' : '');\n            },\n            repoTypeCount: function() {\n                return this.repoTypes[this.reposFilter].count;\n            }\n        },\n\n        mounted: function() {\n            this.searchRepos(this.reposFilter);\n\n            // Disable auto-focusing the search box\n            //const self = this;\n            //Vue.nextTick(function() {\n            //    self.$refs.search.focus();\n            //});\n        },\n\n        methods: {\n            changeTab: function(t) {\n                this.tab = t;\n            },\n\n            changeReposFilter: function(filter) {\n                this.reposFilter = filter;\n                this.repos = [];\n                this.repoTypes[filter].count = 0;\n                this.searchRepos(filter);\n            },\n\n            showRepo: function(repo, filter) {\n                switch (filter) {\n                    case 'sources':\n                        return repo.owner.id == this.uid && !repo.mirror && !repo.fork;\n                    case 'forks':\n                        return repo.owner.id == this.uid && !repo.mirror && repo.fork;\n                    case 'mirrors':\n                        return repo.mirror;\n                    case 'collaborative':\n                        return repo.owner.id != this.uid && !repo.mirror;\n                    default:\n                        return true;\n                }\n            },\n\n            searchRepos: function(reposFilter) {\n                const self = this;\n\n                this.isLoading = true;\n\n                const searchedMode = this.repoTypes[reposFilter].searchMode;\n                const searchedURL = this.searchURL;\n                const searchedQuery = this.searchQuery;\n\n                $.getJSON(searchedURL, function(result, _textStatus, request) {\n                    if (searchedURL == self.searchURL) {\n                        self.repos = result.data;\n                        const count = request.getResponseHeader('X-Total-Count');\n                        if (searchedQuery === '' && searchedMode === '') {\n                            self.reposTotalCount = count;\n                        }\n                        self.repoTypes[reposFilter].count = count;\n                    }\n                }).always(function() {\n                    if (searchedURL == self.searchURL) {\n                        self.isLoading = false;\n                    }\n                });\n            },\n\n            repoClass: function(repo) {\n                if (repo.fork) {\n                    return 'octicon octicon-repo-forked';\n                } else if (repo.mirror) {\n                    return 'octicon octicon-repo-clone';\n                } else if (repo.private) {\n                    return 'octicon octicon-lock';\n                } else {\n                    return 'octicon octicon-repo';\n                }\n            }\n        }\n    })\n}\n\nfunction initCtrlEnterSubmit() {\n    $(\".js-quick-submit\").keydown(function(e) {\n        if (((e.ctrlKey && !e.altKey) || e.metaKey) && (e.keyCode == 13 || e.keyCode == 10)) {\n            $(this).closest(\"form\").submit();\n        }\n    });\n}\n\nfunction initVueApp() {\n    const el = document.getElementById('app');\n    if (!el) {\n        return;\n    }\n\n    initVueComponents();\n\n    new Vue({\n        delimiters: ['${', '}'],\n        el: el,\n\n        data: {\n            searchLimit: document.querySelector('meta[name=_search_limit]').content,\n            suburl: document.querySelector('meta[name=_suburl]').content,\n            uid: document.querySelector('meta[name=_context_uid]').content,\n        },\n    });\n}\n\nwindow.timeAddManual = function() {\n    $('.mini.modal')\n        .modal({\n            duration: 200,\n            onApprove: function() {\n                $('#add_time_manual_form').submit();\n            }\n        }).modal('show')\n    ;\n}\n\nwindow.toggleStopwatch = function() {\n    $(\"#toggle_stopwatch_form\").submit();\n}\nwindow.cancelStopwatch = function() {\n    $(\"#cancel_stopwatch_form\").submit();\n}\n\nwindow.initHeatmap = function(appElementId, heatmapUser, locale) {\n    const el = document.getElementById(appElementId);\n    if (!el) {\n        return;\n    }\n\n    locale = locale || {};\n\n    locale.contributions = locale.contributions || 'contributions';\n    locale.no_contributions = locale.no_contributions || 'No contributions';\n\n    const vueDelimeters = ['${', '}'];\n\n    Vue.component('activity-heatmap', {\n        delimiters: vueDelimeters,\n\n        props: {\n            user: {\n                type: String,\n                required: true\n            },\n            suburl: {\n                type: String,\n                required: true\n            },\n            locale: {\n                type: Object,\n                required: true\n            }\n        },\n\n        data: function () {\n            return {\n                isLoading: true,\n                colorRange: [],\n                endDate: null,\n                values: [],\n                totalContributions: 0,\n            };\n        },\n\n        mounted: function() {\n            this.colorRange = [\n                this.getColor(0),\n                this.getColor(1),\n                this.getColor(2),\n                this.getColor(3),\n                this.getColor(4),\n                this.getColor(5)\n            ];\n            this.endDate = new Date();\n            this.loadHeatmap(this.user);\n        },\n\n        methods: {\n            loadHeatmap: function(userName) {\n                const self = this;\n                $.get(this.suburl + '/api/v1/users/' + userName + '/heatmap', function(chartRawData) {\n                    const chartData = [];\n                    for (let i = 0; i < chartRawData.length; i++) {\n                        self.totalContributions += chartRawData[i].contributions;\n                        chartData[i] = { date: new Date(chartRawData[i].timestamp * 1000), count: chartRawData[i].contributions };\n                    }\n                    self.values = chartData;\n                    self.isLoading = false;\n                });\n            },\n\n            getColor: function(idx) {\n                const el = document.createElement('div');\n                el.className = 'heatmap-color-' + idx;\n                document.body.appendChild(el);\n\n                const color = getComputedStyle(el).backgroundColor;\n\n                document.body.removeChild(el);\n\n                return color;\n            }\n        },\n\n        template: '<div><div v-show=\"isLoading\"><slot name=\"loading\"></slot></div><h4 class=\"total-contributions\" v-if=\"!isLoading\"><span v-html=\"totalContributions\"></span> total contributions in the last 12 months</h4><calendar-heatmap v-show=\"!isLoading\" :locale=\"locale\" :no-data-text=\"locale.no_contributions\" :tooltip-unit=\"locale.contributions\" :end-date=\"endDate\" :values=\"values\" :range-color=\"colorRange\" />'\n    });\n\n    new Vue({\n        delimiters: vueDelimeters,\n        el: el,\n\n        data: {\n            suburl: document.querySelector('meta[name=_suburl]').content,\n            heatmapUser: heatmapUser,\n            locale: locale\n        },\n    });\n}\n\nfunction initFilterBranchTagDropdown(selector) {\n    $(selector).each(function() {\n        const $dropdown = $(this);\n        const $data = $dropdown.find('.data');\n        const data = {\n            items: [],\n            mode: $data.data('mode'),\n            searchTerm: '',\n            noResults: '',\n            canCreateBranch: false,\n            menuVisible: false,\n            active: 0\n        };\n        $data.find('.item').each(function() {\n            data.items.push({\n                name: $(this).text(),\n                url: $(this).data('url'),\n                branch: $(this).hasClass('branch'),\n                tag: $(this).hasClass('tag'),\n                selected: $(this).hasClass('selected')\n            });\n        });\n        $data.remove();\n        new Vue({\n            delimiters: ['${', '}'],\n            el: this,\n            data: data,\n\n            beforeMount: function () {\n                const vm = this;\n\n                this.noResults = vm.$el.getAttribute('data-no-results');\n                this.canCreateBranch = vm.$el.getAttribute('data-can-create-branch') === 'true';\n\n                document.body.addEventListener('click', function(event) {\n                    if (vm.$el.contains(event.target)) {\n                        return;\n                    }\n                    if (vm.menuVisible) {\n                        Vue.set(vm, 'menuVisible', false);\n                    }\n                });\n            },\n\n            watch: {\n                menuVisible: function(visible) {\n                    if (visible) {\n                        this.focusSearchField();\n                    }\n                }\n            },\n\n            computed: {\n                filteredItems: function() {\n                    const vm = this;\n\n                    const items = vm.items.filter(function (item) {\n                        return ((vm.mode === 'branches' && item.branch)\n                                || (vm.mode === 'tags' && item.tag))\n                            && (!vm.searchTerm\n                                || item.name.toLowerCase().indexOf(vm.searchTerm.toLowerCase()) >= 0);\n                    });\n\n                    vm.active = (items.length === 0 && vm.showCreateNewBranch ? 0 : -1);\n\n                    return items;\n                },\n                showNoResults: function() {\n                    return this.filteredItems.length === 0\n                            && !this.showCreateNewBranch;\n                },\n                showCreateNewBranch: function() {\n                    const vm = this;\n                    if (!this.canCreateBranch || !vm.searchTerm || vm.mode === 'tags') {\n                        return false;\n                    }\n\n                    return vm.items.filter(function (item) {\n                        return item.name.toLowerCase() === vm.searchTerm.toLowerCase()\n                    }).length === 0;\n                }\n            },\n\n            methods: {\n                selectItem: function(item) {\n                    const prev = this.getSelected();\n                    if (prev !== null) {\n                        prev.selected = false;\n                    }\n                    item.selected = true;\n                    window.location.href = item.url;\n                },\n                createNewBranch: function() {\n                    if (!this.showCreateNewBranch) {\n                        return;\n                    }\n                    this.$refs.newBranchForm.submit();\n                },\n                focusSearchField: function() {\n                    const vm = this;\n                    Vue.nextTick(function() {\n                        vm.$refs.searchField.focus();\n                    });\n                },\n                getSelected: function() {\n                    for (let i = 0, j = this.items.length; i < j; ++i) {\n                        if (this.items[i].selected)\n                            return this.items[i];\n                    }\n                    return null;\n                },\n                getSelectedIndexInFiltered: function() {\n                    for (let i = 0, j = this.filteredItems.length; i < j; ++i) {\n                        if (this.filteredItems[i].selected)\n                            return i;\n                    }\n                    return -1;\n                },\n                scrollToActive: function() {\n                    let el = this.$refs['listItem' + this.active];\n                    if (!el || el.length === 0) {\n                        return;\n                    }\n                    if (Array.isArray(el)) {\n                        el = el[0];\n                    }\n\n                    const cont = this.$refs.scrollContainer;\n\n                     if (el.offsetTop < cont.scrollTop) {\n                         cont.scrollTop = el.offsetTop;\n                     }\n                     else if (el.offsetTop + el.clientHeight > cont.scrollTop + cont.clientHeight) {\n                        cont.scrollTop = el.offsetTop + el.clientHeight - cont.clientHeight;\n                    }\n                },\n                keydown: function(event) {\n                    const vm = this;\n                    if (event.keyCode === 40) {\n                        // arrow down\n                        event.preventDefault();\n\n                        if (vm.active === -1) {\n                            vm.active = vm.getSelectedIndexInFiltered();\n                        }\n\n                        if (vm.active + (vm.showCreateNewBranch ? 0 : 1) >= vm.filteredItems.length) {\n                            return;\n                        }\n                        vm.active++;\n                        vm.scrollToActive();\n                    }\n                    if (event.keyCode === 38) {\n                        // arrow up\n                        event.preventDefault();\n\n                         if (vm.active === -1) {\n                            vm.active = vm.getSelectedIndexInFiltered();\n                        }\n\n                         if (vm.active <= 0) {\n                            return;\n                        }\n                        vm.active--;\n                        vm.scrollToActive();\n                    }\n                    if (event.keyCode == 13) {\n                        // enter\n                        event.preventDefault();\n\n                         if (vm.active >= vm.filteredItems.length) {\n                            vm.createNewBranch();\n                        } else if (vm.active >= 0) {\n                            vm.selectItem(vm.filteredItems[vm.active]);\n                        }\n                    }\n                    if (event.keyCode == 27) {\n                        // escape\n                        event.preventDefault();\n                        vm.menuVisible = false;\n                    }\n                }\n            }\n        });\n    });\n}\n\n$(\".commit-button\").click(function(e) {\n    e.preventDefault();\n    $(this).parent().find('.commit-body').toggle();\n});\n\nfunction initNavbarContentToggle() {\n    const content = $('#navbar');\n    const toggle = $('#navbar-expand-toggle');\n    let isExpanded = false;\n    toggle.click(function() {\n        isExpanded = !isExpanded;\n        if (isExpanded) {\n            content.addClass('shown');\n            toggle.addClass('active');\n        }\n        else {\n            content.removeClass('shown');\n            toggle.removeClass('active');\n        }\n    });\n}\n\nfunction initTopicbar() {\n    const mgrBtn = $(\"#manage_topic\");\n    const editDiv = $(\"#topic_edit\");\n    const viewDiv = $(\"#repo-topics\");\n    const saveBtn = $(\"#save_topic\");\n    const topicDropdown = $('#topic_edit .dropdown');\n    const topicForm = $('#topic_edit.ui.form');\n    const topicPrompts = getPrompts();\n\n    mgrBtn.click(function() {\n        viewDiv.hide();\n        editDiv.css('display', ''); // show Semantic UI Grid\n    });\n\n    function getPrompts() {\n        const hidePrompt = $(\"div.hide#validate_prompt\"),\n            prompts = {\n                countPrompt: hidePrompt.children('#count_prompt').text(),\n                formatPrompt: hidePrompt.children('#format_prompt').text()\n            };\n        hidePrompt.remove();\n        return prompts;\n    }\n\n    saveBtn.click(function() {\n        const topics = $(\"input[name=topics]\").val();\n\n        $.post(saveBtn.data('link'), {\n            \"_csrf\": csrf,\n            \"topics\": topics\n        }, function(_data, _textStatus, xhr){\n            if (xhr.responseJSON.status === 'ok') {\n                viewDiv.children(\".topic\").remove();\n                if (topics.length) {\n                    const topicArray = topics.split(\",\");\n\n                    const last = viewDiv.children(\"a\").last();\n                    for (let i=0; i < topicArray.length; i++) {\n                        $('<div class=\"ui small label topic\" style=\"cursor:pointer;\">'+topicArray[i]+'</div>').insertBefore(last)\n                    }\n                }\n                editDiv.css('display', 'none');\n                viewDiv.show();\n            }\n        }).fail(function(xhr){\n            if (xhr.status === 422) {\n                if (xhr.responseJSON.invalidTopics.length > 0) {\n                    topicPrompts.formatPrompt = xhr.responseJSON.message;\n\n                    const invalidTopics = xhr.responseJSON.invalidTopics,\n                        topicLables = topicDropdown.children('a.ui.label');\n\n                    topics.split(',').forEach(function(value, index) {\n                        for (let i=0; i < invalidTopics.length; i++) {\n                            if (invalidTopics[i] === value) {\n                                topicLables.eq(index).removeClass(\"green\").addClass(\"red\");\n                            }\n                        }\n                    });\n                } else {\n                    topicPrompts.countPrompt = xhr.responseJSON.message;\n                }\n            }\n        }).always(function() {\n            topicForm.form('validate form');\n        });\n    });\n\n    topicDropdown.dropdown({\n        allowAdditions: true,\n        forceSelection: false,\n        fields: { name: \"description\", value: \"data-value\" },\n        saveRemoteData: false,\n        label: {\n            transition : 'horizontal flip',\n            duration   : 200,\n            variation  : false,\n            blue : true,\n            basic: true,\n        },\n        className: {\n            label: 'ui small label'\n        },\n        apiSettings: {\n            url: suburl + '/api/v1/topics/search?q={query}',\n            throttle: 500,\n            cache: false,\n            onResponse: function(res) {\n                const formattedResponse = {\n                    success: false,\n                    results: [],\n                };\n                const stripTags = function (text) {\n                    return text.replace(/<[^>]*>?/gm, \"\");\n                };\n\n                const query = stripTags(this.urlData.query.trim());\n                let found_query = false;\n                const current_topics = [];\n                topicDropdown.find('div.label.visible.topic,a.label.visible').each(function(_,e){ current_topics.push(e.dataset.value); });\n\n                if (res.topics) {\n                    let found = false;\n                    for (let i=0;i < res.topics.length;i++) {\n                        // skip currently added tags\n                        if (current_topics.indexOf(res.topics[i].topic_name) != -1){\n                            continue;\n                        }\n\n                        if (res.topics[i].topic_name.toLowerCase() === query.toLowerCase()){\n                            found_query = true;\n                        }\n                        formattedResponse.results.push({\"description\": res.topics[i].topic_name, \"data-value\": res.topics[i].topic_name});\n                        found = true;\n                    }\n                    formattedResponse.success = found;\n                }\n\n                if (query.length > 0 && !found_query){\n                    formattedResponse.success = true;\n                    formattedResponse.results.unshift({\"description\": query, \"data-value\": query});\n                } else if (query.length > 0 && found_query) {\n                    formattedResponse.results.sort(function(a, b){\n                        if (a.description.toLowerCase() === query.toLowerCase()) return -1;\n                        if (b.description.toLowerCase() === query.toLowerCase()) return 1;\n                        if (a.description > b.description) return -1;\n                        if (a.description < b.description) return 1;\n                        return 0;\n                    });\n                }\n\n\n                return formattedResponse;\n            },\n        },\n        onLabelCreate: function(value) {\n            value = value.toLowerCase().trim();\n            this.attr(\"data-value\", value).contents().first().replaceWith(value);\n            return $(this);\n        },\n        onAdd: function(addedValue, _addedText, $addedChoice) {\n            addedValue = addedValue.toLowerCase().trim();\n            $($addedChoice).attr('data-value', addedValue);\n            $($addedChoice).attr('data-text', addedValue);\n        }\n    });\n\n    $.fn.form.settings.rules.validateTopic = function(_values, regExp) {\n        const topics = topicDropdown.children('a.ui.label'),\n            status = topics.length === 0 || topics.last().attr(\"data-value\").match(regExp);\n        if (!status) {\n            topics.last().removeClass(\"green\").addClass(\"red\");\n        }\n        return status && topicDropdown.children('a.ui.label.red').length === 0;\n    };\n\n    topicForm.form({\n            on: 'change',\n            inline : true,\n            fields: {\n                topics: {\n                    identifier: 'topics',\n                    rules: [\n                        {\n                            type: 'validateTopic',\n                            value: /^[a-z0-9][a-z0-9-]{1,35}$/,\n                            prompt: topicPrompts.formatPrompt\n                        },\n                        {\n                            type: 'maxCount[25]',\n                            prompt: topicPrompts.countPrompt\n                        }\n                    ]\n                },\n            }\n        });\n}\nwindow.toggleDeadlineForm = function() {\n    $('#deadlineForm').fadeToggle(150);\n}\n\nwindow.setDeadline = function() {\n    const deadline = $('#deadlineDate').val();\n    updateDeadline(deadline);\n}\n\nfunction updateDeadline(deadlineString) {\n    $('#deadline-err-invalid-date').hide();\n    $('#deadline-loader').addClass('loading');\n\n    let realDeadline = null;\n    if (deadlineString !== '') {\n\n        const newDate = Date.parse(deadlineString)\n\n        if (isNaN(newDate)) {\n            $('#deadline-loader').removeClass('loading');\n            $('#deadline-err-invalid-date').show();\n            return false;\n        }\n        realDeadline = new Date(newDate);\n    }\n\n    $.ajax($('#update-issue-deadline-form').attr('action') + '/deadline', {\n        data: JSON.stringify({\n            'due_date': realDeadline,\n        }),\n        headers: {\n            'X-Csrf-Token': csrf,\n            'X-Remote': true,\n        },\n        contentType: 'application/json',\n        type: 'POST',\n        success: function () {\n            reload();\n        },\n        error: function () {\n            $('#deadline-loader').removeClass('loading');\n            $('#deadline-err-invalid-date').show();\n        }\n    });\n}\n\nwindow.deleteDependencyModal = function(id, type) {\n    $('.remove-dependency')\n        .modal({\n            closable: false,\n            duration: 200,\n            onApprove: function () {\n                $('#removeDependencyID').val(id);\n                $('#dependencyType').val(type);\n                $('#removeDependencyForm').submit();\n            }\n        }).modal('show')\n    ;\n}\n\nfunction initIssueList() {\n    const repolink = $('#repolink').val();\n    const repoId = $('#repoId').val();\n    const crossRepoSearch = $('#crossRepoSearch').val();\n    let issueSearchUrl = suburl + '/api/v1/repos/' + repolink + '/issues?q={query}';\n    if (crossRepoSearch === 'true') {\n        issueSearchUrl = suburl + '/api/v1/repos/issues/search?q={query}&priority_repo_id=' + repoId;\n    }\n    $('#new-dependency-drop-list')\n        .dropdown({\n            apiSettings: {\n                url: issueSearchUrl,\n                onResponse: function(response) {\n                    const filteredResponse = {'success': true, 'results': []};\n                    const currIssueId = $('#new-dependency-drop-list').data('issue-id');\n                    // Parse the response from the api to work with our dropdown\n                    $.each(response, function(_i, issue) {\n                        // Don't list current issue in the dependency list.\n                        if(issue.id === currIssueId) {\n                            return;\n                        }\n                        filteredResponse.results.push({\n                            'name'  : '#' + issue.number + ' ' + htmlEncode(issue.title) +\n                                '<div class=\"text small dont-break-out\">' + htmlEncode(issue.repository.full_name) + '</div>',\n                            'value' : issue.id\n                        });\n                    });\n                    return filteredResponse;\n                },\n                cache: false,\n            },\n\n            fullTextSearch: true\n        });\n\n    $(\".menu a.label-filter-item\").each(function() {\n        $(this).click(function(e) {\n            if (e.altKey) {\n                e.preventDefault();\n\n                const href = $(this).attr(\"href\");\n                const id = $(this).data(\"label-id\");\n\n                const regStr = \"labels=(-?[0-9]+%2c)*(\" + id + \")(%2c-?[0-9]+)*&\";\n                const newStr = \"labels=$1-$2$3&\";\n\n                window.location = href.replace(new RegExp(regStr), newStr);\n            }\n        });\n    });\n\n    $(\".menu .ui.dropdown.label-filter\").keydown(function(e) {\n        if (e.altKey && e.keyCode == 13) {\n            const selectedItems = $(\".menu .ui.dropdown.label-filter .menu .item.selected\");\n\n            if (selectedItems.length > 0) {\n                const item = $(selectedItems[0]);\n\n                const href = item.attr(\"href\");\n                const id = item.data(\"label-id\");\n\n                const regStr = \"labels=(-?[0-9]+%2c)*(\" + id + \")(%2c-?[0-9]+)*&\";\n                const newStr = \"labels=$1-$2$3&\";\n\n                window.location = href.replace(new RegExp(regStr), newStr);\n            }\n        }\n    });\n}\nwindow.cancelCodeComment = function(btn) {\n    const form = $(btn).closest(\"form\");\n    if(form.length > 0 && form.hasClass('comment-form')) {\n        form.addClass('hide');\n        form.parent().find('button.comment-form-reply').show();\n    } else {\n        form.closest('.comment-code-cloud').remove()\n    }\n}\nwindow.onOAuthLoginClick = function() {\n    const oauthLoader = $('#oauth2-login-loader');\n    const oauthNav = $('#oauth2-login-navigator');\n\n    oauthNav.hide();\n    oauthLoader.removeClass('disabled');\n\n    setTimeout(function(){\n        // recover previous content to let user try again\n        // usually redirection will be performed before this action\n        oauthLoader.addClass('disabled');\n        oauthNav.show();\n    },5000);\n}\n"],"sourceRoot":""}