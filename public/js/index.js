!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function i(e){return jQuery("<div />").text(e).html()}let o,a,s,r,c;function l(e){const t=e.find(".tabular.menu");t.find(".item").tab(),t.find('.item[data-tab="'+t.data("preview")+'"]').click((function(){const n=$(this);$.post(n.data("url"),{_csrf:o,mode:"gfm",context:n.data("context"),text:e.find('.tab.segment[data-tab="'+t.data("write")+'"] textarea').val()},(function(n){const i=e.find('.tab.segment[data-tab="'+t.data("preview")+'"]');i.html(n),emojify.run(i[0]),$("pre code",i[0]).each((function(){hljs.highlightBlock(this)}))}))})),k()}function d(){0!=$(".edit.form").length&&(function(e){const t=e.find(".tabular.menu");t.find(".item").tab();const n=t.find('.item[data-tab="'+t.data("preview")+'"]');n.length&&(s=n.data("preview-file-modes").split(","),n.click((function(){const n=$(this);$.post(n.data("url"),{_csrf:o,mode:"gfm",context:n.data("context"),text:e.find('.tab.segment[data-tab="'+t.data("write")+'"] textarea').val()},(function(n){const i=e.find('.tab.segment[data-tab="'+t.data("preview")+'"]');i.html(n),emojify.run(i[0]),$("pre code",i[0]).each((function(){hljs.highlightBlock(this)}))}))})))}($(".edit.form")),function(e){const t=e.find(".tabular.menu");t.find(".item").tab(),t.find('.item[data-tab="'+t.data("diff")+'"]').click((function(){const n=$(this);$.post(n.data("url"),{_csrf:o,context:n.data("context"),content:e.find('.tab.segment[data-tab="'+t.data("write")+'"] textarea').val()},(function(n){const i=e.find('.tab.segment[data-tab="'+t.data("diff")+'"]');i.html(n),emojify.run(i[0])}))}))}($(".edit.form")))}function u(e,t,n,i){return new Promise((function(a){$.ajax({type:"POST",url:e,data:{_csrf:o,action:t,issue_ids:n,id:i},success:a})}))}function h(){window.location.reload()}function f(e){e.each((function(){const e=this;e.addEventListener("paste",(function(t){!function(e,t){if(!e.clipboardData)return;const n=e.clipboardData.items;if(void 0!==n)for(let i=0;i<n.length;i++){if(-1===n[i].type.indexOf("image"))continue;const o=n[i].getAsFile();"function"==typeof t&&(e.preventDefault(),e.stopPropagation(),t(o))}}(t,(function(t){const n=t.name.substr(0,t.name.lastIndexOf("."));!function(e,t){if(e.selectionStart||0===e.selectionStart){const n=e.selectionStart,i=e.selectionEnd;e.value=e.value.substring(0,n)+t+e.value.substring(i,e.value.length),e.selectionStart=n+t.length,e.selectionEnd=n+t.length}else e.value+=t}(e,"!["+n+"]()"),function(e,t){const n=new XMLHttpRequest;n.onload=function(){200==n.status&&t(n.responseText)},n.open("post",a+"/attachments",!0),n.setRequestHeader("X-Csrf-Token",o);const i=new FormData;i.append("file",e,e.name),n.send(i)}(t,(function(t){const i=JSON.parse(t);!function(e,t,n){if(e.selectionStart||0===e.selectionStart){const i=e.selectionStart,o=e.selectionEnd;e.value=e.value.replace(t,n),e.selectionStart=i+n.length-t.length,e.selectionEnd=o+n.length-t.length}else e.value=e.value.replace(t,n)}(e,"!["+n+"]()","!["+n+"]("+a+"/attachments/"+i.uuid+")");const o=$('<input id="'+i.uuid+'" name="files" type="hidden">').val(i.uuid);$(".files").append(o)}))}))}),!1)}))}function p(){function e(e,t){const n=$(".ui."+t+".list"),i=n.find(".no-select"),o=$("."+e+" .menu");let a="update"==o.data("action");const s={};$("."+e).dropdown("setting","onHide",(function(){if(a="update"==o.data("action")){const e=[];Object.keys(s).forEach((function(t){const n=s[t],i=u(n["update-url"],n.action,n["issue-id"],t);e.push(i)})),Promise.all(e).then(h)}})),o.find(".item:not(.no-select)").click((function(){if("select-assignees-modify"==e)return $(this).hasClass("checked")?($(this).removeClass("checked"),$(this).find(".octicon").removeClass("octicon-check")):($(this).addClass("checked"),$(this).find(".octicon").addClass("octicon-check")),u(o.data("update-url"),"",o.data("issue-id"),$(this).data("id")),o.data("action","update"),!1;$(this).hasClass("checked")?($(this).removeClass("checked"),$(this).find(".octicon").removeClass("octicon-check"),a&&($(this).data("id")in s?delete s[$(this).data("id")]:s[$(this).data("id")]={"update-url":o.data("update-url"),action:"detach","issue-id":o.data("issue-id")})):($(this).addClass("checked"),$(this).find(".octicon").addClass("octicon-check"),a&&($(this).data("id")in s?delete s[$(this).data("id")]:s[$(this).data("id")]={"update-url":o.data("update-url"),action:"attach","issue-id":o.data("issue-id")}));const t=[];return $(this).parent().find(".item").each((function(){$(this).hasClass("checked")?(t.push($(this).data("id")),$($(this).data("id-selector")).removeClass("hide")):$($(this).data("id-selector")).addClass("hide")})),0==t.length?i.removeClass("hide"):i.addClass("hide"),$($(this).parent().data("id")).val(t.join(",")),!1})),o.find(".no-select.item").click((function(){(a||"select-assignees-modify"==e)&&u(o.data("update-url"),"clear",o.data("issue-id"),"").then(h),$(this).parent().find(".item").each((function(){$(this).removeClass("checked"),$(this).find(".octicon").removeClass("octicon-check")})),n.find(".item").each((function(){$(this).addClass("hide")})),i.removeClass("hide"),$($(this).parent().data("id")).val("")}))}function t(e,t){const n=$(e+" .menu"),o=$(".ui"+e+".list"),a="update"==n.data("action");n.find(".item:not(.no-select)").click((function(){switch($(this).parent().find(".item").each((function(){$(this).removeClass("selected active")})),$(this).addClass("selected active"),a&&u(n.data("update-url"),"",n.data("issue-id"),$(this).data("id")).then(h),t){case"#milestone_id":o.find(".selected").html('<a class="item" href='+$(this).data("href")+">"+i($(this).text())+"</a>");break;case"#assignee_id":o.find(".selected").html('<a class="item" href='+$(this).data("href")+'><img class="ui avatar image" src='+$(this).data("avatar")+">"+i($(this).text())+"</a>")}$(".ui"+e+".list .no-select").addClass("hide"),$(t).val($(this).data("id"))})),n.find(".no-select.item").click((function(){$(this).parent().find(".item:not(.no-select)").each((function(){$(this).removeClass("selected active")})),a&&u(n.data("update-url"),"",n.data("issue-id"),$(this).data("id")).then(h),o.find(".selected").html(""),o.find(".no-select").removeClass("hide"),$(t).val("")}))}0!=$(".comment.form").length&&(!function(){const e=$(".ui.select-branch");e.find(".reference-list-menu").find(".item:not(.no-select)").click((function(){const t=$(this).data("id");$($(this).data("id-selector")).val(t),e.find(".ui .branch-name").text(t)})),e.find(".reference.column").click((function(){return e.find(".scrolling.reference-list-menu").css("display","none"),e.find(".reference .text").removeClass("black"),$($(this).data("target")).css("display","block"),$(this).find(".text").addClass("black"),!1}))}(),l($(".comment.form")),f($(".comment.form textarea")),e("select-label","labels"),e("select-assignees","assignees"),e("select-assignees-modify","assignees"),t(".select-milestone","#milestone_id"),t(".select-assignee","#assignee_id"))}function m(){if(0==$(".repository").length)return;function e(e){const t=$(e);t.dropdown({fullTextSearch:!0,selectOnKeydown:!1,onChange:function(e,t,n){n.data("url")&&(window.location.href=n.data("url"))},message:{noResults:t.data("no-results")}})}if(($(".repository.file.list").length>0||".repository.commits".length>0)&&$(".choose.reference .dropdown").each((function(){const e=$(this).find(".data"),t={items:[],mode:e.data("mode"),searchTerm:"",noResults:"",canCreateBranch:!1,menuVisible:!1,active:0};e.find(".item").each((function(){t.items.push({name:$(this).text(),url:$(this).data("url"),branch:$(this).hasClass("branch"),tag:$(this).hasClass("tag"),selected:$(this).hasClass("selected")})})),e.remove(),new Vue({delimiters:["${","}"],el:this,data:t,beforeMount:function(){const e=this;this.noResults=e.$el.getAttribute("data-no-results"),this.canCreateBranch="true"===e.$el.getAttribute("data-can-create-branch"),document.body.addEventListener("click",(function(t){e.$el.contains(t.target)||e.menuVisible&&Vue.set(e,"menuVisible",!1)}))},watch:{menuVisible:function(e){e&&this.focusSearchField()}},computed:{filteredItems:function(){const e=this,t=e.items.filter((function(t){return("branches"===e.mode&&t.branch||"tags"===e.mode&&t.tag)&&(!e.searchTerm||t.name.toLowerCase().indexOf(e.searchTerm.toLowerCase())>=0)}));return e.active=0===t.length&&e.showCreateNewBranch?0:-1,t},showNoResults:function(){return 0===this.filteredItems.length&&!this.showCreateNewBranch},showCreateNewBranch:function(){const e=this;return!(!this.canCreateBranch||!e.searchTerm||"tags"===e.mode)&&0===e.items.filter((function(t){return t.name.toLowerCase()===e.searchTerm.toLowerCase()})).length}},methods:{selectItem:function(e){const t=this.getSelected();null!==t&&(t.selected=!1),e.selected=!0,window.location.href=e.url},createNewBranch:function(){this.showCreateNewBranch&&this.$refs.newBranchForm.submit()},focusSearchField:function(){const e=this;Vue.nextTick((function(){e.$refs.searchField.focus()}))},getSelected:function(){for(let e=0,t=this.items.length;e<t;++e)if(this.items[e].selected)return this.items[e];return null},getSelectedIndexInFiltered:function(){for(let e=0,t=this.filteredItems.length;e<t;++e)if(this.filteredItems[e].selected)return e;return-1},scrollToActive:function(){let e=this.$refs["listItem"+this.active];if(!e||0===e.length)return;Array.isArray(e)&&(e=e[0]);const t=this.$refs.scrollContainer;e.offsetTop<t.scrollTop?t.scrollTop=e.offsetTop:e.offsetTop+e.clientHeight>t.scrollTop+t.clientHeight&&(t.scrollTop=e.offsetTop+e.clientHeight-t.clientHeight)},keydown:function(e){const t=this;if(40===e.keyCode){if(e.preventDefault(),-1===t.active&&(t.active=t.getSelectedIndexInFiltered()),t.active+(t.showCreateNewBranch?0:1)>=t.filteredItems.length)return;t.active++,t.scrollToActive()}if(38===e.keyCode){if(e.preventDefault(),-1===t.active&&(t.active=t.getSelectedIndexInFiltered()),t.active<=0)return;t.active--,t.scrollToActive()}13==e.keyCode&&(e.preventDefault(),t.active>=t.filteredItems.length?t.createNewBranch():t.active>=0&&t.selectItem(t.filteredItems[t.active])),27==e.keyCode&&(e.preventDefault(),t.menuVisible=!1)}}})})),$(".repository.wiki.view").length>0&&e(".choose.page .dropdown"),$(".repository.settings.options").length>0&&($("#repo_name").keyup((function(){const e=$("#repo-name-change-prompt");$(this).val().toString().toLowerCase()!=$(this).data("name").toString().toLowerCase()?e.show():e.hide()})),$(".enable-system").change((function(){this.checked?($($(this).data("target")).removeClass("disabled"),$(this).data("context")||$($(this).data("context")).addClass("disabled")):($($(this).data("target")).addClass("disabled"),$(this).data("context")||$($(this).data("context")).removeClass("disabled"))})),$(".enable-system-radio").change((function(){"false"==this.value?($($(this).data("target")).addClass("disabled"),void 0!==$(this).data("context")&&$($(this).data("context")).removeClass("disabled")):"true"==this.value&&($($(this).data("target")).removeClass("disabled"),void 0!==$(this).data("context")&&$($(this).data("context")).addClass("disabled"))}))),$(".repository.labels").length>0){const e=$(".new-label.segment");$(".new-label.button").click((function(){e.show()})),$(".new-label.segment .cancel").click((function(){e.hide()})),$(".color-picker").each((function(){$(this).minicolors()})),$(".precolors .color").click((function(){const e=$(this).data("color-hex");$(".color-picker").val(e),$(".minicolors-swatch-color").css("background-color",e)})),$(".edit-label-button").click((function(){return $("#label-modal-id").val($(this).data("id")),$(".edit-label .new-label-input").val($(this).data("title")),$(".edit-label .new-label-desc-input").val($(this).data("description")),$(".edit-label .color-picker").val($(this).data("color")),$(".minicolors-swatch-color").css("background-color",$(this).data("color")),$(".edit-label.modal").modal({onApprove:function(){$(".edit-label.form").submit()}}).modal("show"),!1}))}if($(".repository.new.milestone").length>0){const e=$(".milestone.datepicker");e.datetimepicker({lang:e.data("lang"),inline:!0,timepicker:!1,startDate:e.data("start-date"),formatDate:"Y-m-d",onSelectDate:function(e){$("#deadline").val(e.dateFormat("Y-m-d"))}}),$("#clear-date").click((function(){return $("#deadline").val(""),!1}))}if($(".repository.view.issue").length>0){const e=$("#issue-title"),t=$("#edit-title-input input"),n=function(){return e.toggle(),$(".not-in-edit").toggle(),$("#edit-title-input").toggle(),$(".in-edit").toggle(),t.focus(),!1};$("#edit-title").click(n),$("#cancel-edit-title").click(n),$("#save-edit-title").click(n).click((function(){return 0==t.val().length||t.val()==e.text()?(t.val(e.text()),!1):($.post($(this).data("update-url"),{_csrf:o,title:t.val()},(function(n){t.val(n.title),e.text(n.title),h()})),!1)})),$(".edit-content").click((function(){const e=$(this).parent().parent().parent().next(),t=e.find(".edit-content-zone"),n=e.find(".render-content"),i=e.find(".raw-content");let a;if(0==t.html().length){t.html($("#edit-content-form").html()),a=t.find("textarea"),issuesTribute.attach(a.get()),emojiTribute.attach(a.get());const i=t.find(".dropzone");i.data("saved",!1);const s=t.find(".comment-files");if(i.length>0){const e={};i.dropzone({url:i.data("upload-url"),headers:{"X-Csrf-Token":o},maxFiles:i.data("max-file"),maxFilesize:i.data("max-size"),acceptedFiles:"*/*"===i.data("accepts")?null:i.data("accepts"),addRemoveLinks:!0,dictDefaultMessage:i.data("default-message"),dictInvalidFileType:i.data("invalid-input-type"),dictFileTooBig:i.data("file-too-big"),dictRemoveFile:i.data("remove-file"),init:function(){this.on("success",(function(t,n){e[t.name]={uuid:n.uuid,submitted:!1};const i=$('<input id="'+n.uuid+'" name="files" type="hidden">').val(n.uuid);s.append(i)})),this.on("removedfile",(function(t){t.name in e&&($("#"+e[t.name].uuid).remove(),i.data("remove-url")&&i.data("csrf")&&!e[t.name].submitted&&$.post(i.data("remove-url"),{file:e[t.name].uuid,_csrf:i.data("csrf")}))})),this.on("submit",(function(){$.each(e,(function(t){e[t].submitted=!0}))})),this.on("reload",(function(){$.getJSON(t.data("attachment-url"),(function(t){const n=i.get(0).dropzone;n.removeAllFiles(!0),s.empty(),$.each(t,(function(){const t=i.data("upload-url")+"/"+this.uuid;n.emit("addedfile",this),n.emit("thumbnail",this,t),n.emit("complete",this),n.files.push(this),e[this.name]={submitted:!0,uuid:this.uuid},i.find("img[src='"+t+"']").css("max-width","100%");const o=$('<input id="'+this.uuid+'" name="files" type="hidden">').val(this.uuid);s.append(o)}))}))}))}}),i.get(0).dropzone.emit("reload")}const r=t.find(".ui.comment.form"),c=r.find(".tabular.menu");c.attr("data-write",t.data("write")),c.attr("data-preview",t.data("preview")),c.find(".write.item").attr("data-tab",t.data("write")),c.find(".preview.item").attr("data-tab",t.data("preview")),r.find(".write.segment").attr("data-tab",t.data("write")),r.find(".preview.segment").attr("data-tab",t.data("preview")),l(r),t.find(".cancel.button").click((function(){n.show(),t.hide(),i.get(0).dropzone.emit("reload")})),t.find(".save.button").click((function(){n.show(),t.hide();const r=s.find("[name=files]").map((function(){return $(this).val()})).get();$.post(t.data("update-url"),{_csrf:o,content:a.val(),context:t.data("context"),files:r},(function(t){0==t.length?n.html($("#no-content").html()):(n.html(t.content),emojify.run(n[0]),$("pre code",n[0]).each((function(){hljs.highlightBlock(this)})));const o=e.parent();o.find(".ui.small.images").length?""==t.attachments?o.find(".ui.small.images").parent().remove():o.find(".ui.small.images").html(t.attachments):""!=t.attachments&&(o.append('<div class="ui bottom attached segment">    <div class="ui small images">    </div></div>'),o.find(".ui.small.images").html(t.attachments)),i.get(0).dropzone.emit("submit"),i.get(0).dropzone.emit("reload")}))}))}else a=e.find("textarea");return t.show(),n.hide(),0==a.val().length&&a.val(i.text()),a.focus(),!1})),$(".delete-comment").click((function(){const e=$(this);return confirm(e.data("locale"))&&$.post(e.data("url"),{_csrf:o}).success((function(){$("#"+e.data("comment-id")).remove()})),!1}));const i=$("#status-button");$("#comment-form .edit_area").keyup((function(){0==$(this).val().length?i.text(i.data("status")):i.text(i.data("status-and-comment"))})),i.click((function(){$("#status").val(i.data("status-val")),$("#comment-form").submit()}));const a=$(".merge-button > button");a.on("click",(function(e){e.preventDefault(),$("."+$(this).data("do")+"-fields").show(),$(this).parent().hide()})),$(".merge-button > .dropdown").dropdown({onChange:function(e,t,n){n.data("do")&&(a.find(".button-text").text(n.text()),a.data("do",n.data("do")))}}),$(".merge-cancel").on("click",(function(e){e.preventDefault(),$(this).closest(".form").hide(),a.parent().show()})),function e(t){let n="";t||(t=$(document),n=".reactions > "),t.find(n+"a.label").popup({position:"bottom left",metadata:{content:"title",title:"none"}}),t.find(".select-reaction > .menu > .item, "+n+"a.label").on("click",(function(t){const n=this;if(t.preventDefault(),$(this).hasClass("disabled"))return;const i=($(this).hasClass("item")?$(this).closest(".select-reaction").data("action-url"):$(this).data("action-url"))+"/"+($(this).hasClass("blue")?"unreact":"react");$.ajax({type:"POST",url:i,data:{_csrf:o,content:$(this).data("content")}}).done((function(t){if(t&&(t.html||t.empty)){const i=$(n).closest(".content");let o=i.find(".segment.reactions");if(!t.empty&&o.length>0&&o.remove(),!t.empty){o=$('<div class="ui attached segment reactions"></div>');const n=i.find(".segment.bottom:first");n.length>0?o.insertBefore(n):o.appendTo(i),o.html(t.html);const a=o.find(".has-emoji");for(let e=0;e<a.length;e++)emojify.run(a.get(e));o.find(".dropdown").dropdown(),e(o)}}}))}))}()}$(".repository.diff").length>0&&$(".diff-counter").each((function(){const e=$(this),t=e.find("span[data-line].add").data("line"),n=e.find("span[data-line].del").data("line"),i=parseFloat(t)/(parseFloat(t)+parseFloat(n))*100;e.find(".bar .add").css("width",i+"%")})),$("#repo-clone-ssh").click((function(){$(".clone-url").text($(this).data("link")),$("#repo-clone-url").val($(this).data("link")),$(this).addClass("blue"),$("#repo-clone-https").removeClass("blue"),localStorage.setItem("repo-clone-protocol","ssh")})),$("#repo-clone-https").click((function(){$(".clone-url").text($(this).data("link")),$("#repo-clone-url").val($(this).data("link")),$(this).addClass("blue"),$("#repo-clone-ssh").removeClass("blue"),localStorage.setItem("repo-clone-protocol","https")})),$("#repo-clone-url").click((function(){$(this).select()}));const t=$(".repository.compare.pull");t.length>0&&(e(".choose.branch .dropdown"),t.find("button.show-form").on("click",(function(e){e.preventDefault(),t.find(".pullrequest-form").show(),$(this).parent().hide()}))),$(".repository.settings.branches").length>0&&(e(".protected-branches .dropdown"),$(".enable-protection, .enable-whitelist").change((function(){this.checked?$($(this).data("target")).removeClass("disabled"):$($(this).data("target")).addClass("disabled")})))}function g(e){const t=Math.floor(Math.random()*Math.floor(1e6));return e.attr("data-write",e.attr("data-write")+t),e.attr("data-preview",e.attr("data-preview")+t),e.find(".item").each((function(){const e=$(this).attr("data-tab")+t;$(this).attr("data-tab",e)})),e.parent().find("*[data-tab='write']").attr("data-tab","write"+t),e.parent().find("*[data-tab='preview']").attr("data-tab","preview"+t),l(e.parent(".form")),t}function v(){$(".access-mode.menu .item").click((function(){const e=$(this).parent();$.post(e.data("url"),{_csrf:o,uid:e.data("uid"),mode:$(this).data("value")})}))}function b(){$(".js-quick-pull-choice-option").change((function(){"commit-to-new-branch"==$(this).val()?($(".quick-pull-branch-name").show(),$(".quick-pull-branch-name input").prop("required",!0)):($(".quick-pull-branch-name").hide(),$(".quick-pull-branch-name input").prop("required",!1)),$("#commit-button").text($(this).attr("button_text"))}));const e=$("#file-name");e.keyup((function(e){const t=$(".breadcrumb span.section"),n=$(".breadcrumb div.divider");let i,o;if(8==e.keyCode&&0==$(this).getCursorPosition()&&t.length>0&&(i=t.last().find("a").text(),$(this).val(i+$(this).val()),$(this)[0].setSelectionRange(i.length,i.length),t.last().remove(),n.last().remove()),191==e.keyCode){o=$(this).val().split("/");for(let e=0;e<o.length;++e)i=o[e],e<o.length-1?i.length&&($('<span class="section"><a href="#">'+i+"</a></span>").insertBefore($(this)),$('<div class="divider"> / </div>').insertBefore($(this))):$(this).val(i),$(this)[0].setSelectionRange(0,0)}o=[],$(".breadcrumb span.section").each((function(){const e=$(this);e.find("a").length?o.push(e.find("a").text()):o.push(e.text())})),$(this).val()&&o.push($(this).val()),$("#tree_path").val(o.join("/"))})).trigger("keyup");const t=$(".repository.editor textarea#edit_area");if(!t.length)return;const n=t.data("markdown-file-exts").split(","),i=t.data("line-wrap-extensions").split(",");e.on("keyup",(function(){const a=e.val();let l,d,u,h,f,p;u=h="";const m=/.+\.([^.]+)$/.exec(a);m&&(h="."+(u=m[1]));const g=CodeMirror.findModeByExtension(u),v=$("a[data-tab=preview]");if(g?(l=g.mode,d=g.mime,p=l):p=u,v.length&&p&&s&&s.length&&s.indexOf(p)>=0?(f=v.data("url"),v.data("url",f.replace(/(.*)\/.*/i,"$1/"+l)),v.show()):v.hide(),n.indexOf(h)>=0&&function(e){return c&&(c.toTextArea(),c=null),!!r||(r=new SimpleMDE({autoDownloadFontAwesome:!1,element:e[0],forceSync:!0,renderingConfig:{singleLineBreaks:!1},indentWithTabs:!1,tabSize:4,spellChecker:!1,previewRender:function(t,n){return setTimeout((function(){$.post(e.data("url"),{_csrf:o,mode:"gfm",context:e.data("context"),text:t},(function(e){n.innerHTML='<div class="markdown ui segment">'+e+"</div>",emojify.run($(".editor-preview")[0])}))}),0),"Loading..."},toolbar:["bold","italic","strikethrough","|","heading-1","heading-2","heading-3","heading-bigger","heading-smaller","|","code","quote","|","unordered-list","ordered-list","|","link","image","table","horizontal-rule","|","clean-block","preview","fullscreen","side-by-side"]}),!0)}(t))return;if(!c&&!function(e){return r&&(r.toTextArea(),r=null),!!c||((c=CodeMirror.fromTextArea(e[0],{lineNumbers:!0})).on("change",(function(t,n){e.val(t.getValue())})),!0)}(t))return;l&&(c.setOption("mode",d),CodeMirror.autoLoadMode(c,l)),i.indexOf(h)>=0?c.setOption("lineWrapping",!0):c.setOption("lineWrapping",!1);let b=e.val();0!==b.length&&(b=(b=b.split("/"))[b.length-1],$.getJSON(e.data("ec-url-prefix")+b,(function(e){"tab"===e.indent_style?(c.setOption("indentWithTabs",!0),c.setOption("extraKeys",{})):(c.setOption("indentWithTabs",!1),c.setOption("extraKeys",{Tab:function(e){const t=Array(parseInt(e.getOption("indentUnit"))+1).join(" ");e.replaceSelection(t)}})),c.setOption("indentUnit",e.indent_size||4),c.setOption("tabSize",e.tab_width||4)})))})).trigger("keyup");const a=$("#commit-button"),l=$(".ui.edit.form");a.prop("disabled",!0),l.areYouSure({silent:!0,dirtyClass:"dirty-file",fieldSelector:":input:not(.commit-form-wrapper :input)",change:function(){const e=$(this).hasClass("dirty-file");a.prop("disabled",!e)}}),a.click((function(e){0===t.val().length&&($("#edit-empty-content-modal").modal({onApprove:function(){$(".edit.form").submit()}}).modal("show"),e.preventDefault())}))}function w(){$(".user.settings.profile").length>0&&$("#username").keyup((function(){const e=$("#name-change-prompt");$(this).val().toString().toLowerCase()!=$(this).data("name").toString().toLowerCase()?e.show():e.hide()}))}function k(){$(".ui.button").keypress((function(e){13!=e.keyCode&&32!=e.keyCode||$(this).click()}))}function _(){$(".code-view .linenums").length>0&&($(document).on("click",".lines-num span",(function(e){const t=$(this),n=t.parent().siblings(".lines-code").find("ol.linenums > li");T(n,n.filter("[rel="+t.attr("id")+"]"),e.shiftKey?n.filter(".active").eq(0):null),window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()})),$(window).on("hashchange",(function(){let e=window.location.hash.match(/^#(L\d+)-(L\d+)$/);const t=$(".code-view ol.linenums > li");let n;if(e)return n=t.filter("."+e[1]),T(t,n,t.filter("."+e[2])),void $("html, body").scrollTop(n.offset().top-200);(e=window.location.hash.match(/^#(L|n)(\d+)$/))&&(n=t.filter(".L"+e[2]),T(t,n),$("html, body").scrollTop(n.offset().top-200))})).trigger("hashchange"))}function y(e){$.ajax({url:a+"/user/u2f/sign",type:"POST",headers:{"X-Csrf-Token":o},data:JSON.stringify(e),contentType:"application/json; charset=utf-8"}).done((function(e){window.location.replace(e)})).fail((function(){x(1)}))}function C(e){(function(e){if(!("errorCode"in e))return!1;if(0===e.errorCode)return!1;return x(e.errorCode),!0})(e)||$.ajax({url:a+"/user/settings/security/u2f/register",type:"POST",headers:{"X-Csrf-Token":o},data:JSON.stringify(e),contentType:"application/json; charset=utf-8",success:function(){h()},fail:function(){x(1)}})}function x(e){const t={browser:$("#unsupported-browser"),1:$("#u2f-error-1"),2:$("#u2f-error-2"),3:$("#u2f-error-3"),4:$("#u2f-error-4"),5:$(".u2f-error-5")};t[e].removeClass("hide");for(const n in t)n!=e&&t[n].addClass("hide");$("#u2f-error").modal("show")}function S(){$.post(a+"/user/settings/security/u2f/request_register",{_csrf:o,name:$("#nickname").val()}).success((function(e){$("#nickname").closest("div.field").removeClass("error"),$("#register-device").modal("show"),null===e.registeredKeys&&(e.registeredKeys=[]),u2fApi.register(e.appId,e.registerRequests,e.registeredKeys,30).then(C).catch((function(e){x(void 0!==e?e.metaData.code:1)}))})).fail((function(e){409===e.status&&$("#nickname").closest("div.field").addClass("error")}))}function q(e){history.pushState?history.pushState(null,null,e):location.hash=e}function T(e,t,n){if(e.removeClass("active"),n){let i,o=parseInt(t.attr("rel").substr(1)),a=parseInt(n.attr("rel").substr(1));if(o!=a){o>a&&(i=o,o=a,a=i);const t=[];for(let e=o;e<=a;e++)t.push(".L"+e);return e.filter(t.join(",")).addClass("active"),void q("#L"+o+"-L"+a)}}t.addClass("active"),q("#"+t.attr("rel"))}function L(){const e=$(this);let t="";e.attr("id")&&(t+="#"+e.attr("id"));const n=$(".delete.modal"+t);return n.find(".name").text(e.data("name")),n.modal({closable:!1,onApprove:function(){"form"!=e.data("type")?$.post(e.data("url"),{_csrf:o,id:e.data("id")}).done((function(e){window.location.href=e.redirect})):$(e.data("form")).submit()}}).modal("show"),!1}function O(){const e=$(this);let t="";e.attr("id")&&(t+="#"+e.attr("id"));const n=$(".addall.modal"+t);return n.find(".name").text(e.data("name")),n.modal({closable:!1,onApprove:function(){"form"!=e.data("type")?$.post(e.data("url"),{_csrf:o,id:e.data("id")}).done((function(e){window.location.href=e.redirect})):$(e.data("form")).submit()}}).modal("show"),!1}"undefined"!=typeof Dropzone&&(Dropzone.autoDiscover=!1),Array.from||(Array.from=function(){const e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=Math.pow(2,53)-1,i=function(e){const t=function(e){const t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),n)};return function(e){const n=this,o=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");const a=arguments.length>1?arguments[1]:void 0;let s;if(void 0!==a){if(!t(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(s=arguments[2])}const r=i(o.length),c=t(n)?Object(new n(r)):new Array(r);let l,d=0;for(;d<r;)l=o[d],c[d]=a?void 0===s?a(l,d):a.call(s,l,d):l,d+=1;return c.length=r,c}}()),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const n=Object(e);for(let e=1;e<arguments.length;e++){const t=arguments[e];if(null!=t)for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}return n},writable:!0,configurable:!0}),String.prototype.endsWith=function(e){const t=this.length-e.length;return t>=0&&this.lastIndexOf(e)===t},$.fn.getCursorPosition=function(){const e=$(this).get(0);let t=0;if("selectionStart"in e)t=e.selectionStart;else if("selection"in document){e.focus();const n=document.selection.createRange(),i=document.selection.createRange().text.length;n.moveStart("character",-e.value.length),t=n.text.length-i}return t},$(document).ready((function(){if(o=$("meta[name=_csrf]").attr("content"),a=$("meta[name=_suburl]").attr("content"),$(".time-since").each((function(){$(this).addClass("poping up").attr("data-content",$(this).attr("title")).attr("data-variation","inverted tiny").attr("title","")})),$(".dropdown:not(.custom)").dropdown(),$(".jump.dropdown").dropdown({action:"hide",onShow:function(){$(".poping.up").popup("hide")}}),$(".slide.up.dropdown").dropdown({transition:"slide up"}),$(".upward.dropdown").dropdown({direction:"upward"}),$(".ui.accordion").accordion(),$(".ui.checkbox").checkbox(),$(".ui.progress").progress({showActivity:!1}),$(".poping.up").popup(),$(".top.menu .poping.up").popup({onShow:function(){if($(".top.menu .menu.transition").hasClass("visible"))return!1}}),$(".tabular.menu .item").tab(),$(".tabable.menu .item").tab(),$(".toggle.button").click((function(){$($(this).data("target")).slideToggle(100)})),$("tr[data-href]").click((function(){window.location=$(this).data("href")})),"undefined"!=typeof hljs){const e=[].slice.call(document.querySelectorAll("pre code")||[]);for(let t=0;t<e.length;t++)hljs.highlightBlock(e[t])}const e=$("#dropzone");if(e.length>0){const t={};new Dropzone("#dropzone",{url:e.data("upload-url"),headers:{"X-Csrf-Token":o},maxFiles:e.data("max-file"),maxFilesize:e.data("max-size"),acceptedFiles:"*/*"===e.data("accepts")?null:e.data("accepts"),addRemoveLinks:!0,dictDefaultMessage:e.data("default-message"),dictInvalidFileType:e.data("invalid-input-type"),dictFileTooBig:e.data("file-too-big"),dictRemoveFile:e.data("remove-file"),init:function(){this.on("success",(function(e,n){t[e.name]=n.uuid;const i=$('<input id="'+n.uuid+'" name="files" type="hidden">').val(n.uuid);$(".files").append(i)})),this.on("removedfile",(function(n){n.name in t&&$("#"+t[n.name]).remove(),e.data("remove-url")&&e.data("csrf")&&$.post(e.data("remove-url"),{file:t[n.name],_csrf:e.data("csrf")})}))}})}emojify.setConfig({img_dir:a+"/vendor/plugins/emojify/images",ignore_emoticons:!0});const t=document.getElementsByClassName("has-emoji");for(let e=0;e<t.length;e++){emojify.run(t[e]);for(let n=0;n<t[e].childNodes.length;n++)"A"===t[e].childNodes[n].nodeName&&emojify.run(t[e].childNodes[n])}const n=new Clipboard(".clipboard");if(n.on("success",(function(e){e.clearSelection(),$("#"+e.trigger.getAttribute("id")).popup("destroy"),e.trigger.setAttribute("data-content",e.trigger.getAttribute("data-success")),$("#"+e.trigger.getAttribute("id")).popup("show"),e.trigger.setAttribute("data-content",e.trigger.getAttribute("data-original"))})),n.on("error",(function(e){$("#"+e.trigger.getAttribute("id")).popup("destroy"),e.trigger.setAttribute("data-content",e.trigger.getAttribute("data-error")),$("#"+e.trigger.getAttribute("id")).popup("show"),e.trigger.setAttribute("data-content",e.trigger.getAttribute("data-original"))})),$(".delete-button").click(L),$(".add-all-button").click(O),$(".delete-branch-button").click(L),$(".undo-button").click((function(){const e=$(this);$.post(e.data("url"),{_csrf:o,id:e.data("id")}).done((function(e){window.location.href=e.redirect}))})),$(".show-panel.button").click((function(){$($(this).data("panel")).show()})),$(".show-modal.button").click((function(){$($(this).data("modal")).modal("show")})),$(".delete-post.button").click((function(){const e=$(this);$.post(e.data("request-url"),{_csrf:o}).done((function(){window.location.href=e.data("done-url")}))})),$(".markdown").each((function(){const e={};$(this).find("h1, h2, h3, h4, h5, h6").each((function(){let t=$(this);const n=encodeURIComponent(t.text().toLowerCase().replace(/[^\u00C0-\u1FFF\u2C00-\uD7FF\w\- ]/g,"").replace(/[ ]/g,"-"));let i=n;e[n]>0&&(i=n+"-"+e[n]),null==e[n]?e[n]=1:e[n]+=1,(t=t.wrap('<div id="'+i+'" class="anchor-wrap" ></div>')).append('<a class="anchor" href="#'+i+'"><span class="octicon octicon-link"></span></a>')}))})),$(".issue-checkbox").click((function(){$(".issue-checkbox").children("input:checked").length>0?($("#issue-filters").addClass("hide"),$("#issue-actions").removeClass("hide")):($("#issue-filters").removeClass("hide"),$("#issue-actions").addClass("hide"))})),$(".issue-action").click((function(){let e=this.dataset.action,t=this.dataset.elementId;const n=$(".issue-checkbox").children("input:checked").map((function(){return this.dataset.issueId})).get().join(),i=this.dataset.url;"0"===t&&"/assignee"===i.substr(-9)&&(t="",e="clear"),u(i,e,n,t).then((function(){"close"!==e&&"open"!==e||$('.issue-checkbox input[type="checkbox"]').each((function(e,t){t.checked=!1})),h()}))})),$('.issue-checkbox input[type="checkbox"]:checked').first().each((function(e,t){t.checked=!1,$(t).click()})),k(),$("#search-user-box").search({minCharacters:2,apiSettings:{url:a+"/api/v1/users/search?q={query}",onResponse:function(e){const t=[];return $.each(e.data,(function(e,n){let o=n.login;n.full_name&&n.full_name.length>0&&(o+=" ("+i(n.full_name)+")"),t.push({title:o,image:n.avatar_url})})),{results:t}}},searchFields:["login","full_name"],showNoResults:!1}),function(){const e=$("#search-team-box");e.search({minCharacters:2,apiSettings:{url:a+"/api/v1/orgs/"+e.data("org")+"/teams/search?q={query}",headers:{"X-Csrf-Token":o},onResponse:function(e){const t=[];return $.each(e.data,(function(e,n){const i=n.name+" ("+n.permission+" access)";t.push({title:i})})),{results:t}}},searchFields:["name","description"],showNoResults:!1})}(),function(){const e=$("#search-repo-box");e.search({minCharacters:2,apiSettings:{url:a+"/api/v1/repos/search?q={query}&uid="+e.data("uid"),onResponse:function(e){const t=[];return $.each(e.data,(function(e,n){t.push({title:n.full_name.split("/")[1],description:n.full_name})})),{results:t}}},searchFields:["full_name"],showNoResults:!1})}(),p(),0!=$(".install").length&&(""==$("#db_host").val()&&($("#db_host").val("127.0.0.1:3306"),$("#db_user").val("gitea"),$("#db_name").val("gitea")),$("#db_type").change((function(){const e=$(this).val();if("SQLite3"===e)return $("#sql_settings").hide(),$("#pgsql_settings").hide(),$("#mysql_settings").hide(),$("#sqlite_settings").show(),void("SQLite3"===e&&"data/gitea_tidb"==$("#db_path").val()&&$("#db_path").val("data/gitea.db"));const t={MySQL:"127.0.0.1:3306",PostgreSQL:"127.0.0.1:5432",MSSQL:"127.0.0.1:1433"};$("#sqlite_settings").hide(),$("#sql_settings").show(),$("#pgsql_settings").toggle("PostgreSQL"===e),$("#mysql_settings").toggle("MySQL"===e),$.each(t,(function(n,i){if($("#db_host").val()==i)return $("#db_host").val(t[e]),!1}))})),$("#offline-mode input").change((function(){$(this).is(":checked")&&($("#disable-gravatar").checkbox("check"),$("#federated-avatar-lookup").checkbox("uncheck"))})),$("#disable-gravatar input").change((function(){$(this).is(":checked")?$("#federated-avatar-lookup").checkbox("uncheck"):$("#offline-mode").checkbox("uncheck")})),$("#federated-avatar-lookup input").change((function(){$(this).is(":checked")&&($("#disable-gravatar").checkbox("uncheck"),$("#offline-mode").checkbox("uncheck"))})),$("#enable-openid-signin input").change((function(){$(this).is(":checked")?$("#disable-registration input").is(":checked")||$("#enable-openid-signup").checkbox("check"):$("#enable-openid-signup").checkbox("uncheck")})),$("#disable-registration input").change((function(){$(this).is(":checked")?($("#enable-captcha").checkbox("uncheck"),$("#enable-openid-signup").checkbox("uncheck")):$("#enable-openid-signup").checkbox("check")})),$("#enable-captcha input").change((function(){$(this).is(":checked")&&$("#disable-registration").checkbox("uncheck")}))),m(),function(){const e=function(){const e=$("#auth_username").val(),t=$("#clone_addr").val();!$("#mirror").is(":checked")&&null!=e&&e.length>0&&null!=t&&(t.startsWith("https://github.com")||t.startsWith("http://github.com"))?$("#migrate_items").show():$("#migrate_items").hide()};e(),$("#clone_addr").on("input",e),$("#auth_username").on("input",e),$("#mirror").on("change",e)}(),function(){const e=$(".repository.wiki textarea#edit_area");if(e.length>0){const t=new SimpleMDE({autoDownloadFontAwesome:!1,element:e[0],forceSync:!0,previewRender:function(t,n){return setTimeout((function(){$.post(e.data("url"),{_csrf:o,mode:"gfm",context:e.data("context"),text:t},(function(e){n.innerHTML='<div class="markdown ui segment">'+e+"</div>",emojify.run($(".editor-preview")[0])}))}),0),"Loading..."},renderingConfig:{singleLineBreaks:!1},indentWithTabs:!1,tabSize:4,spellChecker:!1,toolbar:["bold","italic","strikethrough","|","heading-1","heading-2","heading-3","heading-bigger","heading-smaller","|",{name:"code-inline",action:function(e){const t=e.codemirror,n=t.getSelection();if(t.replaceSelection("`"+n+"`"),!n){const e=t.getCursor();t.setCursor(e.line,e.ch-1)}t.focus()},className:"fa fa-angle-right",title:"Add Inline Code"},"code","quote","|",{name:"checkbox-empty",action:function(e){const t=e.codemirror;t.replaceSelection("\n- [ ] "+t.getSelection()),t.focus()},className:"fa fa-square-o",title:"Add Checkbox (empty)"},{name:"checkbox-checked",action:function(e){const t=e.codemirror;t.replaceSelection("\n- [x] "+t.getSelection()),t.focus()},className:"fa fa-check-square-o",title:"Add Checkbox (checked)"},"|","unordered-list","ordered-list","|","link","image","table","horizontal-rule","|","clean-block","preview","fullscreen"]});$(t.codemirror.getInputField()).addClass("js-quick-submit")}}(),d(),b(),0!=$(".organization").length&&$(".organization.settings.options").length>0&&$("#org_name").keyup((function(){const e=$("#org-name-change-prompt");$(this).val().toString().toLowerCase()!=$(this).data("org-name").toString().toLowerCase()?e.show():e.hide()})),function(){if(0==$(".new.webhook").length)return;$(".events.checkbox input").change((function(){$(this).is(":checked")&&$(".events.fields").show()})),$(".non-events.checkbox input").change((function(){$(this).is(":checked")&&$(".events.fields").hide()}));const e=function(){const e="POST"===$("#http_method").val();$("#content_type").parent().parent()[e?"show":"hide"]()};e(),$("#http_method").change((function(){e()})),$("#test-delivery").click((function(){const e=$(this);e.addClass("loading disabled"),$.post(e.data("link"),{_csrf:o}).done(setTimeout((function(){window.location.href=e.data("redirect")}),5e3))}))}(),function(){if(0!=$(".admin").length){if(($(".admin.new.user").length>0||$(".admin.edit.user").length>0)&&$("#login_type").change((function(){"0"==$(this).val().substring(0,1)?($("#login_name").removeAttr("required"),$(".non-local").hide(),$(".local").show(),$("#user_name").focus(),"required"==$(this).data("password")&&$("#password").attr("required","required")):($("#login_name").attr("required","required"),$(".non-local").show(),$(".local").hide(),$("#login_name").focus(),$("#password").removeAttr("required"))})),$(".admin.new.authentication").length>0&&($("#auth_type").change((function(){$(".ldap, .dldap, .smtp, .pam, .oauth2, .has-tls .search-page-size").hide(),$(".ldap input[required], .binddnrequired input[required], .dldap input[required], .smtp input[required], .pam input[required], .oauth2 input[required], .has-tls input[required]").removeAttr("required"),$(".binddnrequired").removeClass("required");const i=$(this).val();switch(i){case"2":$(".ldap").show(),$(".binddnrequired input, .ldap div.required:not(.dldap) input").attr("required","required"),$(".binddnrequired").addClass("required");break;case"3":$(".smtp").show(),$(".has-tls").show(),$(".smtp div.required input, .has-tls").attr("required","required");break;case"4":$(".pam").show(),$(".pam input").attr("required","required");break;case"5":$(".dldap").show(),$(".dldap div.required:not(.ldap) input").attr("required","required");break;case"6":$(".oauth2").show(),$(".oauth2 div.required:not(.oauth2_use_custom_url,.oauth2_use_custom_url_field,.open_id_connect_auto_discovery_url) input").attr("required","required"),n()}"2"!=i&&"5"!=i||e(),"2"==i&&t()})),$("#auth_type").change(),$("#security_protocol").change(e),$("#use_paged_search").change(t),$("#oauth2_provider").change(n),$("#oauth2_use_custom_url").change(i)),$(".admin.edit.authentication").length>0){const o=$("#auth_type").val();"2"==o||"5"==o?($("#security_protocol").change(e),"2"==o&&$("#use_paged_search").change(t)):"6"==o&&($("#oauth2_provider").change(n),$("#oauth2_use_custom_url").change(i),n())}if($(".admin.notice")){const e=$("#detail-modal");$(".view-detail").click((function(){return e.find(".content p").text($(this).data("content")),e.modal("show"),!1}));const t=$(".select.table .ui.checkbox");$(".select.action").click((function(){switch($(this).data("action")){case"select-all":t.checkbox("check");break;case"deselect-all":t.checkbox("uncheck");break;case"inverse":t.checkbox("toggle")}})),$("#delete-selection").click((function(){const e=$(this);e.addClass("loading disabled");const n=[];t.each((function(){$(this).checkbox("is checked")&&n.push($(this).data("id"))})),$.post(e.data("link"),{_csrf:o,ids:n}).done((function(){window.location.href=e.data("redirect")}))}))}}function e(){$("#security_protocol").val()>0?$(".has-tls").show():$(".has-tls").hide()}function t(){$("#use_paged_search").prop("checked")?$(".search-page-size").show().find("input").attr("required","required"):$(".search-page-size").hide().find("input").removeAttr("required")}function n(){switch($(".open_id_connect_auto_discovery_url, .oauth2_use_custom_url").hide(),$(".open_id_connect_auto_discovery_url input[required]").removeAttr("required"),$("#oauth2_provider").val()){case"github":case"gitlab":case"gitea":$(".oauth2_use_custom_url").show();break;case"openidConnect":$(".open_id_connect_auto_discovery_url input").attr("required","required"),$(".open_id_connect_auto_discovery_url").show()}i()}function i(){const e=$("#oauth2_provider").val();if($(".oauth2_use_custom_url_field").hide(),$(".oauth2_use_custom_url_field input[required]").removeAttr("required"),$("#oauth2_use_custom_url").is(":checked"))switch($("#oauth2_token_url").val()||$("#oauth2_token_url").val($("#"+e+"_token_url").val()),$("#oauth2_auth_url").val()||$("#oauth2_auth_url").val($("#"+e+"_auth_url").val()),$("#oauth2_profile_url").val()||$("#oauth2_profile_url").val($("#"+e+"_profile_url").val()),$("#oauth2_email_url").val()||$("#oauth2_email_url").val($("#"+e+"_email_url").val()),e){case"github":$(".oauth2_token_url input, .oauth2_auth_url input, .oauth2_profile_url input, .oauth2_email_url input").attr("required","required"),$(".oauth2_token_url, .oauth2_auth_url, .oauth2_profile_url, .oauth2_email_url").show();break;case"gitea":case"gitlab":$(".oauth2_token_url input, .oauth2_auth_url input, .oauth2_profile_url input").attr("required","required"),$(".oauth2_token_url, .oauth2_auth_url, .oauth2_profile_url").show(),$("#oauth2_email_url").val("")}}}(),_(),function(){const e=document.getElementById("app");if(!e)return;Vue.component("repo-search",{delimiters:["${","}"],props:{searchLimit:{type:Number,default:10},suburl:{type:String,required:!0},uid:{type:Number,required:!0},organizations:{type:Array,default:[]},isOrganization:{type:Boolean,default:!0},canCreateOrganization:{type:Boolean,default:!1},organizationsTotalCount:{type:Number,default:0},moreReposLink:{type:String,default:""}},data:function(){return{tab:"repos",repos:[],reposTotalCount:0,reposFilter:"sources",searchQuery:"",isLoading:!1,repoTypes:{all:{count:0,searchMode:""},forks:{count:0,searchMode:"fork"},mirrors:{count:0,searchMode:"mirror"},sources:{count:0,searchMode:"source"},collaborative:{count:0,searchMode:"collaborative"}}}},computed:{showMoreReposLink:function(){return this.repos.length>0&&this.repos.length<this.repoTypes[this.reposFilter].count},searchURL:function(){return this.suburl+"/api/v1/repos/search?sort=updated&order=desc&uid="+this.uid+"&q="+this.searchQuery+"&limit="+this.searchLimit+"&mode="+this.repoTypes[this.reposFilter].searchMode+("all"!==this.reposFilter?"&exclusive=1":"")},repoTypeCount:function(){return this.repoTypes[this.reposFilter].count}},mounted:function(){this.searchRepos(this.reposFilter)},methods:{changeTab:function(e){this.tab=e},changeReposFilter:function(e){this.reposFilter=e,this.repos=[],this.repoTypes[e].count=0,this.searchRepos(e)},showRepo:function(e,t){switch(t){case"sources":return e.owner.id==this.uid&&!e.mirror&&!e.fork;case"forks":return e.owner.id==this.uid&&!e.mirror&&e.fork;case"mirrors":return e.mirror;case"collaborative":return e.owner.id!=this.uid&&!e.mirror;default:return!0}},searchRepos:function(e){const t=this;this.isLoading=!0;const n=this.repoTypes[e].searchMode,i=this.searchURL,o=this.searchQuery;$.getJSON(i,(function(a,s,r){if(i==t.searchURL){t.repos=a.data;const i=r.getResponseHeader("X-Total-Count");""===o&&""===n&&(t.reposTotalCount=i),t.repoTypes[e].count=i}})).always((function(){i==t.searchURL&&(t.isLoading=!1)}))},repoClass:function(e){return e.fork?"octicon octicon-repo-forked":e.mirror?"octicon octicon-repo-clone":e.private?"octicon octicon-lock":"octicon octicon-repo"}}}),new Vue({delimiters:["${","}"],el:e,data:{searchLimit:document.querySelector("meta[name=_search_limit]").content,suburl:document.querySelector("meta[name=_suburl]").content,uid:document.querySelector("meta[name=_context_uid]").content}})}(),$(".organization.new.team input[name=permission]").change((function(){"admin"===$("input[name=permission]:checked",".organization.new.team").val()?$(".organization.new.team .team-units").hide():$(".organization.new.team .team-units").show()})),$(".js-quick-submit").keydown((function(e){!(e.ctrlKey&&!e.altKey||e.metaKey)||13!=e.keyCode&&10!=e.keyCode||$(this).closest("form").submit()})),function(){const e=$("#navbar"),t=$("#navbar-expand-toggle");let n=!1;t.click((function(){(n=!n)?(e.addClass("shown"),t.addClass("active")):(e.removeClass("shown"),t.removeClass("active"))}))}(),function(){const e=$("#manage_topic"),t=$("#topic_edit"),n=$("#repo-topics"),i=$("#save_topic"),s=$("#topic_edit .dropdown"),r=$("#topic_edit.ui.form"),c=function(){const e=$("div.hide#validate_prompt"),t={countPrompt:e.children("#count_prompt").text(),formatPrompt:e.children("#format_prompt").text()};return e.remove(),t}();e.click((function(){n.hide(),t.css("display","")})),i.click((function(){const e=$("input[name=topics]").val();$.post(i.data("link"),{_csrf:o,topics:e},(function(i,o,a){if("ok"===a.responseJSON.status){if(n.children(".topic").remove(),e.length){const t=e.split(","),i=n.children("a").last();for(let e=0;e<t.length;e++)$('<div class="ui small label topic" style="cursor:pointer;">'+t[e]+"</div>").insertBefore(i)}t.css("display","none"),n.show()}})).fail((function(t){if(422===t.status)if(t.responseJSON.invalidTopics.length>0){c.formatPrompt=t.responseJSON.message;const n=t.responseJSON.invalidTopics,i=s.children("a.ui.label");e.split(",").forEach((function(e,t){for(let o=0;o<n.length;o++)n[o]===e&&i.eq(t).removeClass("green").addClass("red")}))}else c.countPrompt=t.responseJSON.message})).always((function(){r.form("validate form")}))})),s.dropdown({allowAdditions:!0,forceSelection:!1,fields:{name:"description",value:"data-value"},saveRemoteData:!1,label:{transition:"horizontal flip",duration:200,variation:!1,blue:!0,basic:!0},className:{label:"ui small label"},apiSettings:{url:a+"/api/v1/topics/search?q={query}",throttle:500,cache:!1,onResponse:function(e){const t={success:!1,results:[]},n=this.urlData.query.trim().replace(/<[^>]*>?/gm,"");let i=!1;const o=[];if(s.find("div.label.visible.topic,a.label.visible").each((function(e,t){o.push(t.dataset.value)})),e.topics){let a=!1;for(let s=0;s<e.topics.length;s++)-1==o.indexOf(e.topics[s].topic_name)&&(e.topics[s].topic_name.toLowerCase()===n.toLowerCase()&&(i=!0),t.results.push({description:e.topics[s].topic_name,"data-value":e.topics[s].topic_name}),a=!0);t.success=a}return n.length>0&&!i?(t.success=!0,t.results.unshift({description:n,"data-value":n})):n.length>0&&i&&t.results.sort((function(e,t){return e.description.toLowerCase()===n.toLowerCase()?-1:t.description.toLowerCase()===n.toLowerCase()?1:e.description>t.description?-1:e.description<t.description?1:0})),t}},onLabelCreate:function(e){return e=e.toLowerCase().trim(),this.attr("data-value",e).contents().first().replaceWith(e),$(this)},onAdd:function(e,t,n){e=e.toLowerCase().trim(),$(n).attr("data-value",e),$(n).attr("data-text",e)}}),$.fn.form.settings.rules.validateTopic=function(e,t){const n=s.children("a.ui.label"),i=0===n.length||n.last().attr("data-value").match(t);return i||n.last().removeClass("green").addClass("red"),i&&0===s.children("a.ui.label.red").length},r.form({on:"change",inline:!0,fields:{topics:{identifier:"topics",rules:[{type:"validateTopic",value:/^[a-z0-9][a-z0-9-]{1,35}$/,prompt:c.formatPrompt},{type:"maxCount[25]",prompt:c.countPrompt}]}}})}(),0!==$("#wait-for-key").length&&u2fApi.ensureSupport().then((function(){$.getJSON(a+"/user/u2f/challenge").success((function(e){u2fApi.sign(e.appId,e.challenge,e.registeredKeys,30).then(y).catch((function(e){x(void 0!==e?e.metaData.code:1)}))}))})).catch((function(){window.location.href=a+"/user/two_factor"})),$("#register-device").modal({allowMultiple:!1}),$("#u2f-error").modal({allowMultiple:!1}),$("#register-security-key").on("click",(function(e){e.preventDefault(),u2fApi.ensureSupport().then(S).catch((function(){x("browser")}))})),function(){const e=$("#repolink").val(),t=$("#repoId").val(),n=$("#crossRepoSearch").val();let o=a+"/api/v1/repos/"+e+"/issues?q={query}";"true"===n&&(o=a+"/api/v1/repos/issues/search?q={query}&priority_repo_id="+t);$("#new-dependency-drop-list").dropdown({apiSettings:{url:o,onResponse:function(e){const t={success:!0,results:[]},n=$("#new-dependency-drop-list").data("issue-id");return $.each(e,(function(e,o){o.id!==n&&t.results.push({name:"#"+o.number+" "+i(o.title)+'<div class="text small dont-break-out">'+i(o.repository.full_name)+"</div>",value:o.id})})),t},cache:!1},fullTextSearch:!0}),$(".menu a.label-filter-item").each((function(){$(this).click((function(e){if(e.altKey){e.preventDefault();const t=$(this).attr("href"),n="labels=(-?[0-9]+%2c)*("+$(this).data("label-id")+")(%2c-?[0-9]+)*&",i="labels=$1-$2$3&";window.location=t.replace(new RegExp(n),i)}}))})),$(".menu .ui.dropdown.label-filter").keydown((function(e){if(e.altKey&&13==e.keyCode){const e=$(".menu .ui.dropdown.label-filter .menu .item.selected");if(e.length>0){const t=$(e[0]),n=t.attr("href"),i="labels=(-?[0-9]+%2c)*("+t.data("label-id")+")(%2c-?[0-9]+)*&",o="labels=$1-$2$3&";window.location=n.replace(new RegExp(i),o)}}}))}(),$(".title_wip_desc > a").click((function(e){e.preventDefault();const t=$("#issue_title");t.focus();const n=t.val().trim().toUpperCase();for(const e in wipPrefixes)if(n.startsWith(wipPrefixes[e].toUpperCase()))return;t.val(wipPrefixes[0]+" "+t.val())})),$(".show-outdated").on("click",(function(e){e.preventDefault();const t=$(this).data("comment");$(this).addClass("hide"),$("#code-comments-"+t).removeClass("hide"),$("#code-preview-"+t).removeClass("hide"),$("#hide-outdated-"+t).removeClass("hide")})),$(".hide-outdated").on("click",(function(e){e.preventDefault();const t=$(this).data("comment");$(this).addClass("hide"),$("#code-comments-"+t).addClass("hide"),$("#code-preview-"+t).addClass("hide"),$("#show-outdated-"+t).removeClass("hide")})),$("button.comment-form-reply").on("click",(function(e){e.preventDefault(),$(this).hide();const t=$(this).parent().find(".comment-form");t.removeClass("hide"),g(t.find(".menu"))})),0!=$(".repository.pull.diff").length&&($(".diff-detail-box.ui.sticky").sticky(),$(".btn-review").on("click",(function(e){e.preventDefault(),$(this).closest(".dropdown").find(".menu").toggle("visible")})).closest(".dropdown").find(".link.close").on("click",(function(e){e.preventDefault(),$(this).closest(".menu").toggle("visible")})),$(".code-view .lines-code,.code-view .lines-num").on("mouseenter",(function(){const e=$(this).closest("td");$(this).closest("tr").addClass(e.hasClass("lines-num-old")||e.hasClass("lines-code-old")?"focus-lines-old":"focus-lines-new")})).on("mouseleave",(function(){$(this).closest("tr").removeClass("focus-lines-new focus-lines-old")})),$(".add-code-comment").on("click",(function(e){if($(e.target).hasClass("btn-add-single"))return;e.preventDefault();const t=$(this).closest(".code-diff").hasClass("code-diff-split"),n=$(this).data("side"),i=$(this).data("idx"),o=$(this).data("path"),a=$("#pull_review_add_comment").html(),s=$(this).closest("tr");let r=s.next();r.hasClass("add-comment")||(r=$('<tr class="add-comment">'+(t?'<td class="lines-num"></td><td class="lines-type-marker"></td><td class="add-comment-left"></td><td class="lines-num"></td><td class="lines-type-marker"></td><td class="add-comment-right"></td>':'<td class="lines-num"></td><td class="lines-num"></td><td class="lines-type-marker"></td><td class="add-comment-left add-comment-right"></td>')+"</tr>"),s.after(r));const c=r.find(".add-comment-"+n);let l=c.find(".comment-code-cloud");0===l.length&&(c.html(a),g((l=c.find(".comment-code-cloud")).find(".menu")),c.find("input[name='line']").val(i),c.find("input[name='side']").val("left"===n?"previous":"proposed"),c.find("input[name='path']").val(o)),l.find("textarea").focus()}))),function e(){const t=$("#repo_migrating");if($("#repo_migrating_failed").hide(),t){const n=t.attr("repo");if(void 0===n)return;$.ajax({type:"GET",url:a+"/"+n+"/status",data:{_csrf:o},complete:function(t){if(200==t.status&&t.responseJSON)return 0==t.responseJSON.status?void location.reload():void setTimeout((function(){e()}),2e3);$("#repo_migrating_progress").hide(),$("#repo_migrating_failed").show()}})}}(),function(){const e=$("#repo_template"),t=function(){const t=$("#template_units"),n=$("#non_template");""!==e.val()?(t.show(),n.hide()):(t.hide(),n.show())};e.change(t),t();const n=function(){$("#repo_template_search").dropdown({apiSettings:{url:a+"/api/v1/repos/search?q={query}&template=true&priority_owner_id="+$("#uid").val(),onResponse:function(e){const t={success:!0,results:[]};return t.results.push({name:"",value:""}),$.each(e.data,(function(e,n){t.results.push({name:i(n.full_name),value:n.id})})),t},cache:!1},fullTextSearch:!0})};$("#uid").change(n),n()}(),$("#repo-clone-url").length>0)switch(localStorage.getItem("repo-clone-protocol")){case"ssh":0===$("#repo-clone-ssh").click().length&&$("#repo-clone-https").click();break;default:$("#repo-clone-https").click()}const s={"div.user.settings":w,"div.repository.settings.collaboration":v};let r;for(r in s)if($(r).length>0){s[r]();break}const c=$("#clone_addr");c.change((function(){const e=$("#repo_name");c.val().length>0&&0===e.val().length&&e.val(c.val().match(/^(.*\/)?((.+?)(\.git)?)$/)[3])}))})),$((function(){0===$(".user.signin").length&&$("form:not(.ignore-dirty)").areYouSure(),$("#ssh-key-content").on("change paste keyup",(function(){const e=$(this).val().split(" "),t=$("#ssh-key-title");""===t.val()&&3===e.length&&""!==e[2]&&t.val(e[2])}))})),window.timeAddManual=function(){$(".mini.modal").modal({duration:200,onApprove:function(){$("#add_time_manual_form").submit()}}).modal("show")},window.toggleStopwatch=function(){$("#toggle_stopwatch_form").submit()},window.cancelStopwatch=function(){$("#cancel_stopwatch_form").submit()},window.initHeatmap=function(e,t,n){const i=document.getElementById(e);if(!i)return;(n=n||{}).contributions=n.contributions||"contributions",n.no_contributions=n.no_contributions||"No contributions";const o=["${","}"];Vue.component("activity-heatmap",{delimiters:o,props:{user:{type:String,required:!0},suburl:{type:String,required:!0},locale:{type:Object,required:!0}},data:function(){return{isLoading:!0,colorRange:[],endDate:null,values:[],totalContributions:0}},mounted:function(){this.colorRange=[this.getColor(0),this.getColor(1),this.getColor(2),this.getColor(3),this.getColor(4),this.getColor(5)],this.endDate=new Date,this.loadHeatmap(this.user)},methods:{loadHeatmap:function(e){const t=this;$.get(this.suburl+"/api/v1/users/"+e+"/heatmap",(function(e){const n=[];for(let i=0;i<e.length;i++)t.totalContributions+=e[i].contributions,n[i]={date:new Date(1e3*e[i].timestamp),count:e[i].contributions};t.values=n,t.isLoading=!1}))},getColor:function(e){const t=document.createElement("div");t.className="heatmap-color-"+e,document.body.appendChild(t);const n=getComputedStyle(t).backgroundColor;return document.body.removeChild(t),n}},template:'<div><div v-show="isLoading"><slot name="loading"></slot></div><h4 class="total-contributions" v-if="!isLoading"><span v-html="totalContributions"></span> total contributions in the last 12 months</h4><calendar-heatmap v-show="!isLoading" :locale="locale" :no-data-text="locale.no_contributions" :tooltip-unit="locale.contributions" :end-date="endDate" :values="values" :range-color="colorRange" />'}),new Vue({delimiters:o,el:i,data:{suburl:document.querySelector("meta[name=_suburl]").content,heatmapUser:t,locale:n}})},$(".commit-button").click((function(e){e.preventDefault(),$(this).parent().find(".commit-body").toggle()})),window.toggleDeadlineForm=function(){$("#deadlineForm").fadeToggle(150)},window.setDeadline=function(){!function(e){$("#deadline-err-invalid-date").hide(),$("#deadline-loader").addClass("loading");let t=null;if(""!==e){const n=Date.parse(e);if(isNaN(n))return $("#deadline-loader").removeClass("loading"),$("#deadline-err-invalid-date").show(),!1;t=new Date(n)}$.ajax($("#update-issue-deadline-form").attr("action")+"/deadline",{data:JSON.stringify({due_date:t}),headers:{"X-Csrf-Token":o,"X-Remote":!0},contentType:"application/json",type:"POST",success:function(){h()},error:function(){$("#deadline-loader").removeClass("loading"),$("#deadline-err-invalid-date").show()}})}($("#deadlineDate").val())},window.deleteDependencyModal=function(e,t){$(".remove-dependency").modal({closable:!1,duration:200,onApprove:function(){$("#removeDependencyID").val(e),$("#dependencyType").val(t),$("#removeDependencyForm").submit()}}).modal("show")},window.cancelCodeComment=function(e){const t=$(e).closest("form");t.length>0&&t.hasClass("comment-form")?(t.addClass("hide"),t.parent().find("button.comment-form-reply").show()):t.closest(".comment-code-cloud").remove()},window.onOAuthLoginClick=function(){const e=$("#oauth2-login-loader"),t=$("#oauth2-login-navigator");t.hide(),e.removeClass("disabled"),setTimeout((function(){e.addClass("disabled"),t.show()}),5e3)}}]);
//# sourceMappingURL=index.js.map